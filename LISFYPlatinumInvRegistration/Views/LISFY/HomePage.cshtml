@*@{
        ViewBag.Title = "HomePage";
        Layout = "~/Views/Shared/_InvRegistrationLayout.cshtml";
    }

    <h2>HomePage</h2>*@


@model LISFYPlatinumInvRegistration.Models.branchdetails
@{
    var Layouts = "~/Views/Shared/_CreateUserLayout.cshtml";
}
@{
    ViewBag.Title = "HomePage";
    Layout = "~/Views/Shared/_homelayout.cshtml";
}

@using (Html.BeginForm("HomePage", "LISFY", FormMethod.Post, new { id = "form1", enctype = "multipart/from-data" }))
{

    <div class="wrapper">
        <nav class="main-header navbar navbar-expand navbar-white navbar-light" style="background-color:#428bca;color:white">

            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button">
                        <i class="fas fa-bars" style="margin-top:8px;"></i>

                    </a>
                </li>
                <h4 class="page-heading">
                    <label class="page-heading" id="LabCorp_Name">
                        @if (ViewBag.BrnchName != null)
                        {
                            @Html.Label((string)ViewBag.BrnchName)
                        }
                        else
                        {
                            @Html.Label("")
                        }
                    </label>
                </h4>
                @*<h4 class="page-heading">
                        <img src="~/Content/LOGO.svg" />
                    </h4>*@
            </ul>

            <ul class="navbar-nav ml-auto"></ul>
        </nav>

        <aside class="main-sidebar sidebar-dark-primary elevation-4">

            <a href="" class="brand-link">
                @*<img src="~/Content/LOGO.svg" />*@
                @*<img src="~/Content/HYGEA_SVG.svg" />*@
                <span class="brand-text font-weight-light client-logo"><img src="~/Content/logintemplate/img/@(ViewBag.HomeImage)" alt="logo" width="230"></span>
            </a>

            <div class="sidebar" id="main">

                <nav class="mt-2 ">

                    <ul class="nav nav-pills nav-sidebar flex-column" id="MainMenu" data-widget="treeview" role="menu" data-accordion="false">
                        @*<li class="nav-item dropright ">
                                <a href="HomePage" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    <i class="nav-icon fas fa-th"></i>
                                    <p>Dashboard</p>
                                </a>
                            </li>*@
                        <li class="nav-item ">
                            <a href="HomePage" id="HomePage" class="nav-link">
                                <i class="nav-icon far fa-plus-square"></i>
                                <p>Dashboard</p>
                            </a>
                        </li>
                        <li class="nav-item dropright" style="display:none">
                            <a href="#" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">

                                <p id="cng">Front Office <i class="right fas fa-chevron-right"></i></p>
                            </a>
                            <div class="dropdown-menu " style="will-change: transform; position: absolute; transform: translate3d(234px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                <a href="" id="submenu" class="nav-link">Patient Registration</a>
                                <a href="" id="submenu" class="nav-link">Edit Invoice</a>
                                <a href="" id="submenu" class="nav-link">Pending Collection</a>
                                <a href="" id="submenu" class="nav-link">Cash Closing</a>
                                <a href="" id="submenu" class="nav-link">Report Dispatching</a>
                                <a href="" id="submenu" class="nav-link">OP Registration</a>
                                <a href="" id="submenu" class="nav-link">Cancel Invoice</a>
                                <a href="" id="submenu" class="nav-link">Billwise Collection</a>
                                <a href="" id="submenu" class="nav-link">Billwise Collection Area</a>
                                <a href="" id="submenu" class="nav-link">Home Collection Booking</a>
                                <a href="" id="submenu" class="nav-link">Home Collection View</a>
                                <a href="" id="submenu" class="nav-link">Home Collection Pending Coll</a>
                                <a href="" id="submenu" class="nav-link">Scan Booking</a>
                                <a href="" id="submenu" class="nav-link">Envelop</a>
                                <a href="" id="submenu" class="nav-link">PatientView</a>
                                <a href="" id="submenu" class="nav-link">Result Delivery Status</a>
                            </div>
                        </li>

                        @*********************@
                        <li class="nav-item dropright " style="display:none">
                            <a href="#" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                @*<i class="nav-icon fas fa-th"></i>*@
                                <p>Sample Flow <i class="right fas fa-chevron-right"></i></p>
                            </a>
                            <div class="dropdown-menu" style="will-change: transform; position: absolute; transform: translate3d(234px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                <a href="" class="nav-link">Barcode Generation</a>
                                <a href="" class="nav-link">Biochemistry Sample Receiving</a>
                                <a href="" class="nav-link">Haemetology Sample Receiving</a>
                                <a href="" class="nav-link">Microbiology Sample Receiving</a>
                                <a href="" class="nav-link">Clinical Pathology Sample Receiving</a>
                                <a href="" class="nav-link">Sample Tracking</a>
                                <a href="" class="nav-link">Sample Rejection</a>
                                <a href="" class="nav-link">Sample Receiving</a>
                            </div>
                        </li>
                        <li class="nav-item dropright " style="display:none">
                            <a href="#" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                @*<i class="nav-icon fas fa-th"></i>*@
                                <p>Technical <i class="right fas fa-chevron-right"></i></p>
                            </a>
                            <div class="dropdown-menu " style="will-change: transform; position: absolute; transform: translate3d(234px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                <a href="" class="nav-link">Result Issuing</a>
                                <a href="" class="nav-link">Referal Lab Management</a>
                                <a href="" class="nav-link">TAT out Explanation</a>
                                <a href="" class="nav-link">Result Register</a>
                                <a href="" class="nav-link">Test Wise Register</a>
                                <a href="" class="nav-link">ECHO Report</a>
                                <a href="" class="nav-link">Work Register(Test Wise)</a>
                                <a href="" class="nav-link">Work Register(Bill Wise)</a>
                                <a href="" class="nav-link">Work Order</a>
                                <a href="" class="nav-link">Attatch Document</a>
                                <a href="" class="nav-link">Us Scan/X-Ray/Ecg/Mammography Management</a>
                                <a href="" class="nav-link">Remove authorization</a>
                                <a href="" class="nav-link">First Level authorization</a>
                                <a href="" class="nav-link">Second Authorization Queue</a>
                                <a href="" class="nav-link">Email Queue</a>
                                <a href="" class="nav-link">Email Radiology Report</a>
                                <a href="" class="nav-link">Pending Test</a>
                                <a href="" class="nav-link">covid-19</a>
                                <a href="" class="nav-link">wrktestreg</a>
                                <a href="" class="nav-link">edit pend</a>
                            </div>
                        </li>
                        <li class="nav-item dropright " style="display:none">
                            <a href="#" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                @*<i class="nav-icon fas fa-th"></i>*@
                                <p>Accounts <i class="right fas fa-chevron-right"></i></p>
                            </a>
                            <div class="dropdown-menu " style="will-change: transform; position: absolute; transform: translate3d(234px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                <a href="" class="nav-link">Account Ledger</a>
                                <a href="" class="nav-link">Cash Payments</a>
                                <a href="" class="nav-link">Cash Receipts</a>
                                <a href="" class="nav-link">Day Book</a>
                                <a href="" class="nav-link">Journal</a>
                                <a href="" class="nav-link">Cheque Issue</a>
                                <a href="" class="nav-link">Cheque Receipt</a>
                                <a href="" class="nav-link">Cheque Transaction</a>
                                <a href="" class="nav-link">TestReqQue</a>
                                <a href="" class="nav-link">Referallabbilwise</a>
                            </div>
                        </li>
                        @**********************************@
                        <li class="nav-item dropright " style="position:relative">
                            <a href="#" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                @*<i class="nav-icon fas fa-th"></i>*@
                                <i class="nav-icon fas fa-file"></i>
                                <p>Reports <i class="right fas fa-chevron-right"></i></p>
                            </a>

                            <div class="dropdown-menu " id="SubMenu" style="will-change: transform;width:300px; position: relative; transform: translate3d(234px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                <ul class="nav nav-pills nav-sidebar flex-column site-menu-sub" data-widget="treeview" role="menu" data-accordion="false">
                                    <li class="nav-item dropright site-menu-item">
                                        <a href="#dailyclctnstmnts" onclick="toggle_visibility('menu1');" id="sub" class="nav-link" data-toggle="dropdown" data-target="#dailyclctnstmnts" @*aria-haspopup="true"*@ aria-expanded="true">

                                            <p id="sub">Daily Periodic Collection Statements <i class="right fas fa-chevron-right"></i></p>
                                        </a>
                                        <div class="dropdown-menu " id="menu1" style="height: 380px; overflow-y: scroll;will-change: transform;width:300px; position: absolute;display:none; transform: translate3d(285px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                            <a href="" class="nav-link btndlyClnStmnt">Daily Collection Statements</a>
                                            <a href="" class="nav-link btndlyClnSmry">Daily Collection Summary</a>
                                            <a href="" class="nav-link btndlyClnSmry2">Daily Collection Summary2</a>
                                            <a href="" class="nav-link colstmtbrnch">Collection Statement Branch Wise</a>
                                            <a href="" class="nav-link colsmrybrnch">Collection Summary Branch Wise</a>
                                            <a href="" class="nav-link dailyCashInvoice">Daily Cash Invoice</a>
                                            <a href="" class="nav-link pidWiseBillClctn">Patient ID Wise Bill Collection</a>
                                            <a href="" class="nav-link mnthlyClctnSmry">Monthly Collection Summary</a>
                                            <a href="" class="nav-link DivisionSummary">Monthly Collection Division Summary</a>
                                            <a href="" class="nav-link MonthlyCollBrnchWise">Monthly Collection Summary BranchWise</a>
                                            <a href="" class="nav-link usrWiseClctn">User Wise Collection</a>
                                            <a href="" class="nav-link usrWiseClctnSmry">User Wise Collection Summary</a>
                                            <a href="" class="nav-link PatWiseInvoice">Patient Wise Invoices</a>
                                            <a href="" class="nav-link DivWiseInvoice">Division Wise Invoices</a>
                                            <a href="" class="nav-link DivWiseInv2">Division Wise Invoices2</a>
                                            <a href="" class="nav-link divWiseSmry">Division Wise Summary</a>
                                            <a href="" class="nav-link usrTackRpt">User Track Report</a>
                                            <a href="" class="nav-link brnchWiseInv">Branch Wise Invoices</a>
                                            <a href="" class="nav-link discWiseInv">Discount Wise Invoices</a>
                                            <a href="" class="nav-link CncldInvoices">Cancelled Invoices</a>
                                            <a href="" class="nav-link doctrMeeting">Doctors Meeting</a>
                                            <a href="" class="nav-link DptWiseInv">Department Wise Invoices</a>
                                            <a href="" class="nav-link DivWisePerfomance">Division Wise Perfomance</a>
                                            <a href="" class="nav-link refundStmnts">Refund Statements</a>
                                            <a href="" class="nav-link DctrVisit">Doctors List(Visit)</a>
                                            <a href="" class="nav-link newPtntStmnt">New Patient List</a>
                                            <a href="" class="nav-link SrvceChrgStmnt">Service Charge Statement</a>
                                            <a href="" class="nav-link oldPtntStmnt">Old Patient List</a>
                                            @*<a href="" data-toggle="modal" data-target="#refundStmnts" class="nav-link">Refund Statements</a>*@
                                            @*<a href="" data-toggle="modal" data-target="#DctrVisit" class="nav-link">Doctors List(Visit)</a>
                                                <a href="" data-toggle="modal" data-target="#newPtntStmnt" class="nav-link">New Patient List</a>
                                                <a href="" data-toggle="modal" data-target="#SrvceChrgStmnt" class="nav-link">Service Charge Statement</a>
                                                <a href="" data-toggle="modal" data-target="#oldPtntStmnt" class="nav-link">Old Patient List</a>*@
                                        </div>
                                    </li>
                                </ul>
                                <ul class="nav nav-pills nav-sidebar flex-column site-menu-sub" data-widget="treeview" role="menu" data-accordion="false">
                                    <li class="nav-item dropright site-menu-item">
                                        <a href="#creditclcnstmnts" onclick="toggle_visibility('menu2');" id="sub" class="nav-link" data-toggle="dropdown" data-target="#creditclcnstmnts" @*aria-haspopup="true"*@ aria-expanded="true">

                                            <p id="sub">Credit Collection Statements <i class="right fas fa-chevron-right"></i></p>
                                        </a>
                                        <div class="dropdown-menu " id="menu2" style="height: 350px; overflow-y: scroll;will-change: transform;display:none; position: absolute; transform: translate3d(285px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                            <a href="" data-toggle="modal" data-target="#crWiseClctn" class="nav-link">Credit CardWise Collection</a>
                                            <a href="" data-toggle="modal" data-target="#insrnceWiseClctn" class="nav-link">Insurance Wise Collection</a>
                                            <a href="" data-toggle="modal" data-target="#corpInv" class="nav-link">Corporate Invoice</a>
                                            <a href="" data-toggle="modal" data-target="#corpCollSmry" class="nav-link">Corporate Collection Summary</a>
                                            <a href="" data-toggle="modal" data-target="#corpCollSmryDiv" class="nav-link">Corporate Collection Summary(Division)</a>
                                            <a href="" data-toggle="modal" data-target="#corpOutStndng" class="nav-link">Corporate Outstanding</a>
                                            <a href="" data-toggle="modal" data-target="#corpDivPerfmnce" class="nav-link">Corporate Division Perfomance</a>
                                            <a href="" data-toggle="modal" data-target="#corpTstPrfmnce" class="nav-link">Corporate Test Perfomance</a>
                                            <a href="" data-toggle="modal" data-target="#BillWiseClctn" class="nav-link">Billwise Collection Statements</a>
                                            <a href="" data-toggle="modal" data-target="#BillWiseDue" class="nav-link">Billwise Due Statements</a>
                                            <a href="" data-toggle="modal" data-target="#corpPendColl" class="nav-link">Corporate Wise Pending Collection</a>
                                            <a href="" data-toggle="modal" data-target="#areaWsSmry" class="nav-link">Area Wise Summary</a>
                                            <a href="" data-toggle="modal" data-target="#corpMnthSmry" class="nav-link">Corporate Bill Monthly Summary</a>
                                            <a href="" data-toggle="modal" data-target="#corpMnDetStmnt" class="nav-link">Corporate Monthly Detailed Statements</a>
                                            <a href="" data-toggle="modal" data-target="#corpDctrStmnt" class="nav-link">Corporate Doctor Statements</a>
                                            <a href="" data-toggle="modal" data-target="#corpAgntRpt" class="nav-link">Corporate Agent Reports</a>
                                            <a href="" data-toggle="modal" data-target="#corpDepStmnts" class="nav-link">Corporate Department Statements</a>
                                            <a href="" data-toggle="modal" data-target="#CorpTstAreaWise" class="nav-link">Corporate Test Perfomance Area Wise</a>
                                            <a href="" data-toggle="modal" data-target="#CorpBillDet" class="nav-link">Corporate Bill Detailed</a>
                                            <a href="" data-toggle="modal" data-target="#agntCorpStmnt" class="nav-link">Agent Corporate</a>
                                            <a href="" data-toggle="modal" data-target="#crLimitStmnt" class="nav-link">Credit Limit Statements</a>
                                            @*<a href="" class="nav-link" style="font-weight:bold">BHIM/UPI Online Payment Report</a>
                                                <a href="" class="nav-link" style="font-weight:bold">Corporate Invoice 2</a>*@

                                        </div>
                                    </li>
                                </ul>
                                <ul class="nav nav-pills nav-sidebar flex-column site-menu-sub" data-widget="treeview" role="menu" data-accordion="false">
                                    <li class="nav-item dropright site-menu-item">
                                        <a href="#cashduestmnts" onclick="toggle_visibility('menu3');" id="sub" class="nav-link" data-toggle="dropdown" data-target="#cashduestmnts" @*aria-haspopup="true"*@ aria-expanded="true">

                                            <p id="sub">Cash Due/Pending Statements <i class="right fas fa-chevron-right"></i></p>
                                        </a>
                                        <div class="dropdown-menu " id="menu3" style="will-change: transform; display:none;position: absolute; transform: translate3d(285px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                            <a href="" data-toggle="modal" data-target="#pndRgstr" class="nav-link">Pending Register</a>
                                            <a href="" data-toggle="modal" data-target="#pndRgstr2" class="nav-link">Pending Register2</a>
                                            <a href="" data-toggle="modal" data-target="#pndClctnReg" class="nav-link">Pending Collection Register</a>

                                        </div>
                                    </li>
                                </ul>
                                <ul class="nav nav-pills nav-sidebar flex-column site-menu-sub" data-widget="treeview" role="menu" data-accordion="false">
                                    <li class="nav-item dropright site-menu-item">
                                        <a href="#DRrefbystmnts" onclick="toggle_visibility('menu4');" id="sub" class="nav-link" data-toggle="dropdown" data-target="#DRrefbystmnts" @*aria-haspopup="true"*@ aria-expanded="true">

                                            <p id="sub">Doctor/Ref.by Statements <i class="right fas fa-chevron-right"></i></p>
                                        </a>
                                        <div class="dropdown-menu " id="menu4" style="will-change: transform;display:none; position: absolute; transform: translate3d(285px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                            <a href="" data-toggle="modal" data-target="#docWiseClctn" class="nav-link">Doctor Wise Collection</a>
                                            <a href="" data-toggle="modal" data-target="#docPrfmnce" class="nav-link">Doctors Perfomance</a>
                                            <a href="" data-toggle="modal" data-target="#docSplzdLst" class="nav-link">Doctors Specialized List</a>
                                            <a href="" data-toggle="modal" data-target="#hospWiseDocStmnt" class="nav-link">Hospital Wise Doctors List</a>
                                            <a href="" data-toggle="modal" data-target="#docEnvelop" class="nav-link">Doctors Envelop</a>
                                            <a href="" data-toggle="modal" data-target="#outDrWiseClctn" class="nav-link">Out Doctors Wise Collection</a>
                                            <a href="" data-toggle="modal" data-target="#areaWiseDrList" style="display:none" class="nav-link">AreaWiseDrList</a>
                                            <a href="" class="nav-link" style="display:none">drtestperfomance2</a>
                                            <a href="" data-toggle="modal" data-target="#NoDrPatLst" class="nav-link">NO Dr Patient Test</a>

                                        </div>
                                    </li>
                                </ul>
                                <ul class="nav nav-pills nav-sidebar flex-column site-menu-sub" data-widget="treeview" role="menu" data-accordion="false">
                                    <li class="nav-item dropright site-menu-item">
                                        <a href="#technicalstmnts" onclick="toggle_visibility('menu5');" id="sub" class="nav-link" data-toggle="dropdown" data-target="#technicalstmnts" @*aria-haspopup="true"*@ aria-expanded="true">

                                            <p id="sub">Technical statements <i class="right fas fa-chevron-right"></i></p>
                                        </a>
                                        <div class="dropdown-menu " id="menu5" style="height: 280px; will-change: transform;display:none; position: absolute; transform: translate3d(285px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                            <a href="" data-toggle="modal" data-target="#refLabRpt" style="display:none" class="nav-link">Referal Lab</a>
                                            <a href="" data-toggle="modal" data-target="#removeAuthStmnts" class="nav-link">Remove Authorization Statements</a>
                                            <a href="" data-toggle="modal" data-target="#rptDispStmnts" class="nav-link">Report Dispatching Statements</a>
                                            <a href="" data-toggle="modal" data-target="#SmplClctnInv" class="nav-link">Sample Collection/Agent Wise Invoices</a>
                                            <a href="" data-toggle="modal" data-target="#rptDisp2" class="nav-link">Report Dispatching 2</a>
                                            <a href="" data-toggle="modal" data-target="#timeOvrStmnt" class="nav-link">Time Over Statements</a>
                                            <a href="" data-toggle="modal" data-target="#authDls" class="nav-link">Authorization Details</a>
                                            <a href="" data-toggle="modal" data-target="#cust2RsltReg" class="nav-link">Customize2 Result Register</a>
                                            <a href="" data-toggle="modal" data-target="#nonBarcodedTsts" class="nav-link">Non Barcoded Tests</a>
                                            <a href="" data-toggle="modal" data-target="#IPOPrpt" class="nav-link">IP/OP Wise Report</a>
                                            <a href="" class="nav-link">Testwise Result Register</a>

                                        </div>
                                    </li>
                                </ul>
                                <ul class="nav nav-pills nav-sidebar flex-column site-menu-sub" data-widget="treeview" role="menu" data-accordion="false">
                                    <li class="nav-item dropright site-menu-item">
                                        <a href="#teststatements" onclick="toggle_visibility('menu6');" id="sub" class="nav-link" data-toggle="dropdown" data-target="#teststatements" @*aria-haspopup="true"*@ aria-expanded="true">

                                            <p id="sub">Test Statements <i class="right fas fa-chevron-right"></i></p>
                                        </a>
                                        <div class="dropdown-menu " id="menu6" style="height: 250px; overflow-y: scroll;will-change: transform;display:none; position: absolute; transform: translate3d(285px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                            <a href="" data-toggle="modal" data-target="#tstWiseInvce" class="nav-link">Test Wise Invoices</a>
                                            <a href="" data-toggle="modal" data-target="#tstPrfmnce" class="nav-link">Test Perfomance</a>
                                            <a href="" data-toggle="modal" data-target="#tstPrDivWise" class="nav-link">Test Perfomance(Division Wise)</a>
                                            <a href="" data-toggle="modal" data-target="#MulTstInvoice" class="nav-link">Multiple Teat Wise Invoices</a>
                                            <a href="" data-toggle="modal" data-target="#PatTstWise" class="nav-link">Test Wise Patients</a>
                                            <a href="" class="nav-link">Outside Test Statements</a>
                                            <a href="" class="nav-link" style="font-weight:bold">Doctor Wise Test Perfomance</a>
                                            <a href="" class="nav-link" style="font-weight:bold">op patient graph report</a>
                                            <a href="" class="nav-link" style="font-weight:bold">pro dr income report</a>
                                            <a href="" class="nav-link" style="font-weight:bold">collectioboyincome</a>
                                            <a href="" class="nav-link" style="font-weight:bold">Proincme</a>
                                            <a href="" class="nav-link" style="font-weight:bold">clientlabindvl</a>
                                            <a href="" class="nav-link" style="font-weight:bold">Ptient Details</a>
                                        </div>
                                    </li>
                                </ul>

                                @*<a href="" class="nav-link">Master Values</a>*@
                                <ul class="nav nav-pills nav-sidebar flex-column site-menu-sub" data-widget="treeview" role="menu" data-accordion="false">
                                    <li class="nav-item dropright site-menu-item">
                                        <a href="#mastervalues" onclick="toggle_visibility('menu7');" id="sub" class="nav-link" data-toggle="dropdown" data-target="#mastervalues" @*aria-haspopup="true"*@ aria-expanded="true">

                                            <p id="sub">Master Values <i class="right fas fa-chevron-right"></i></p>
                                        </a>
                                        <div class="dropdown-menu " id="menu7" style="will-change: transform;display:none; position: absolute; transform: translate3d(285px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                            <a href="" class="nav-link">Test Price List</a>
                                            <a href="" class="nav-link">Test Detailed</a>
                                            <a href="" class="nav-link">Doctors List</a>
                                            <a href="" class="nav-link">Test Detailed(Perform Wise)</a>
                                            <a href="" class="nav-link">Corporate List</a>
                                            <a href="" class="nav-link" style="font-weight:bold">Doctors List Categorywise</a>
                                            <a href="" class="nav-link" style="font-weight:bold">dr payment</a>
                                            <a href="" class="nav-link" style="font-weight:bold">authorization payment</a>
                                            <a href="" class="nav-link" style="font-weight:bold">Pending Statemnts</a>
                                            <a href="" class="nav-link" style="font-weight:bold">Covid Result Statement</a>
                                        </div>
                                    </li>
                                </ul>

                                @*<a href="" class="nav-link">Accounts</a>*@
                                <ul class="nav nav-pills nav-sidebar flex-column site-menu-sub" data-widget="treeview" role="menu" data-accordion="false">
                                    <li class="nav-item dropright site-menu-item">
                                        <a href="#" onclick="toggle_visibility('menu8');" id="sub" class="nav-link" data-toggle="dropdown" data-target="#accounts" @*aria-haspopup="true"*@ aria-expanded="true">

                                            <p id="sub">Accounts <i class="right fas fa-chevron-right"></i></p>
                                        </a>
                                        <div class="dropdown-menu " id="menu8" style="transform: translate3d(285px, 0px, 0px); display:none;top: 0px; left: 0px;">
                                            <a href="" class="nav-link">Cash Payments</a>
                                            <a href="" class="nav-link">Cash Payments Summary</a>
                                            <a href="" class="nav-link">Cash Receipts</a>
                                            <a href="" class="nav-link">Cash Receipts Summary</a>
                                            <a href="" class="nav-link">Ledger</a>

                                        </div>
                                    </li>
                                </ul>

                            </div>
                        </li>
                        @**********************************@
                        <li class="nav-item dropright ">
                            <a href="#" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <i class="nav-icon fas fa-users"></i>
                                <p>Marketing <i class="right fas fa-chevron-right"></i></p>
                            </a>
                            <div class="dropdown-menu " style="will-change: transform; position: absolute; transform: translate3d(234px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                <a href="" class="nav-link">PRO Hospital Wise</a>
                                <a href="" class="nav-link">PRO Specialized Wise</a>
                                <a href="" class="nav-link">Doctors List(No Buissiness)</a>
                                <a href="" class="nav-link">Doctor Wise Monthly Summary</a>
                                <a href="" class="nav-link">Monthly Incentive Statements</a>
                                <a href="" class="nav-link">Set Dr Incentive</a>
                                <a href="" class="nav-link">Monthly Incentice</a>
                                <a href="" class="nav-link">Monthly Incentice(DateWise)</a>
                                <a href="" class="nav-link">Incentive(Division)</a>
                                <a href="" class="nav-link">Set Dr IncenticeTest</a>
                                <a href="" class="nav-link">Receiving sample</a>
                            </div>
                        </li>
                        <li class="nav-item dropright " style="display:none">
                            <a href="#" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                @*<i class="nav-icon fas fa-th"></i>*@
                                <p>Administrator <i class="right fas fa-chevron-right"></i></p>
                            </a>
                            <div class="dropdown-menu " style="will-change: transform; position: absolute; transform: translate3d(234px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">

                                @*******************************************@
                                <a href="#" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    @*<i class="nav-icon fas fa-th"></i>*@
                                    <p>User Settings <i class="right fas fa-chevron-right"></i></p>
                                </a>
                                <div class="dropdown-menu " style="will-change: transform; position: absolute; transform: translate3d(170px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                    <a href="" class="nav-link">Create New User</a>
                                    <a href="" class="nav-link">Change Password</a>
                                    <a href="" class="nav-link">User Privilege</a>
                                    <a href="" class="nav-link">Users List</a>
                                </div>


                                @*******************************************@
                                <a href="" class="nav-link">User Logins</a>
                                <a href="" class="nav-link">Edited Invoice</a>
                                <a href="" class="nav-link">Edit Discount</a>
                                <a href="" class="nav-link">Email Configuration</a>
                                <a href="" class="nav-link">Create New Finanacial Year</a>
                                <a href="" class="nav-link">Settings</a>
                                <a href="" class="nav-link">Remove Barcode Data</a>
                                <a href="" class="nav-link">Agent Wise Incentive</a>
                                <a href="" class="nav-link">Convert Invoice</a>
                                <a href="" class="nav-link">Merge Accounts</a>
                                <a href="" class="nav-link">Result Letter Head</a>
                            </div>
                        </li>
                        <li class="nav-item dropright " style="display:none">
                            <a href="#" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                @*<i class="nav-icon fas fa-th"></i>*@
                                <p>Master Settings <i class="right fas fa-chevron-right"></i></p>
                            </a>
                            <div class="dropdown-menu " style="height: 580px; overflow-y: scroll;will-change: transform; position: absolute; transform: translate3d(234px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                <a href="" class="nav-link">Test</a>
                                <a href="" class="nav-link">Doctor</a>
                                <a href="" class="nav-link">Doctor Schedule</a>
                                <a href="" class="nav-link">Doctor's Leave</a>
                                <a href="" class="nav-link">Hospital</a>
                                <a href="" class="nav-link">Agent</a>
                                <a href="" class="nav-link">Patient</a>
                                <a href="" class="nav-link">Employee</a>
                                <a href="" class="nav-link">Antibiotic</a>
                                <a href="" class="nav-link">Look Up Entry</a>
                                <a href="" class="nav-link">Appoinment Session</a>
                                <a href="" class="nav-link">Set customize1</a>
                                <a href="" class="nav-link">Set customize2</a>
                                <a href="" class="nav-link">Set customize3</a>
                                <a href="" class="nav-link">Set customize4</a>
                                <a href="" class="nav-link">Set Culture</a>
                                <a href="" class="nav-link">Set Test Order</a>
                                <a href="" class="nav-link">Set Antibiotic Order</a>
                                <a href="" class="nav-link">Set Special Rate</a>
                                <a href="" class="nav-link">Set Result Template</a>
                                <a href="" class="nav-link">Contacts</a>
                                <a href="" class="nav-link">Set Doctor Payments</a>
                                <a href="" class="nav-link">Assign Study To Doctor</a>
                                <a href="" class="nav-link">Analyzer</a>
                                <a href="" class="nav-link">Set Corporate</a>
                                <a href="" class="nav-link">Set Analyzer Normal Range</a>
                                <a href="" class="nav-link">Set Doctor</a>
                                <a href="" class="nav-link">PRO Daily Report</a>
                                <a href="" class="nav-link">Set Doctor Signature</a>
                                <a href="" class="nav-link">Members</a>
                            </div>
                        </li>
                        <li class="nav-item dropright ">
                            <a href="#" id="cng" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                @*<i class="nav-icon fas fa-th"></i>*@
                                <i class="nav-icon fas fa-question-circle"></i>
                                <p>Help <i class="right fas fa-chevron-right"></i></p>
                            </a>
                            <div class="dropdown-menu " style="will-change: transform; position: absolute; transform: translate3d(234px, 0px, 0px); top: 0px; left: 0px;" x-placement="right-start">
                                <a href="" class="nav-link">About Us</a>
                                <a href="" class="nav-link" style="display:none">Settings</a>
                                <a href="" class="nav-link" style="display:none">Barcode</a>

                            </div>
                        </li>
                        <li class="nav-item ">
                            <a href="/InvoiceRegister/IvoiceRegistration" class="nav-link">
                                <i class="nav-icon far fa-plus-square"></i>
                                <p>Inv. Registration</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="/MasterTestDetails/MasterTestDetail" class="nav-link">
                                <i class="nav-icon far fa-newspaper"></i>
                                <p>Test</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                @*<i class="nav-icon fas fa-qrcode"></i>*@
                                <i class="nav-icon fas fa-barcode"></i>
                                <p>Barcode/Labeling</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#SetTestOrderModel" data-backdrop="static" data-keyboard="false" id="testorderload" @*onclick="focusMethod()"*@>
                                <i class="nav-icon far fa-newspaper"></i>
                                <p>Set Test Order</p>
                            </a>

                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#ChequeTransactionModel" data-backdrop="static" data-keyboard="false" id="testorderload" @*onclick="focusMethod()"*@>
                                <i class="nav-icon far fa-newspaper"></i>
                                <p>Cheque Transaction</p>
                            </a>

                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#DayBookEntryModel" data-backdrop="static" data-keyboard="false" id="testorderload" @*onclick="focusMethod()"*@>
                                <i class="nav-icon far fa-newspaper"></i>
                                <p>Day Book Entry</p>
                            </a>

                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#UserPrivillageModal" data-backdrop="static" data-keyboard="false" id="Usrpriload">
                                <i class="nav-icon far fa-newspaper"></i>
                                <p>User Privilege</p>
                            </a>

                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#ChequeissueModal" data-backdrop="static" data-keyboard="false" id="Usrpriload">
                                <i class="nav-icon far fa-newspaper"></i>
                                <p>Cheque Issue</p>
                            </a>

                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#ChequeRecModal" data-backdrop="static" data-keyboard="false" id="Usrpriload">
                                <i class="nav-icon far fa-newspaper"></i>
                                <p>Cheque Receival</p>
                            </a>

                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#accountledger" data-backdrop="static" data-keyboard="false" id="accountledgload" @*onclick="focusMethod()"*@>
                                <i class="nav-icon far fa-newspaper"></i>
                                <p>Account Ledger</p>
                            </a>

                        </li>

                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#HospitalModal" data-backdrop="static" data-keyboard="false" id="hospitalload">

                                <i class="nav-icon fas fa-hospital-alt"></i>
                                <p>Hospital</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#employeeModal" data-backdrop="static" data-keyboard="false" id="employeeload">

                                <i class="nav-icon fas fa-user-friends "></i>
                                <p>Employee</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#CreateuserModal" data-backdrop="static" data-keyboard="false" id="createuserload">

                                <i class="nav-icon fas fa-user-plus "></i>
                                <p>Create User</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#lookupentry" data-backdrop="static" data-keyboard="false" id="lookupload">

                                <i class="nav-icon far fa-address-book "></i>
                                <p>LookUpEntry</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#cancellModal" data-backdrop="static" data-keyboard="false" id="cancellload">

                                <i class="nav-icon far fa-address-book "></i>
                                <p>CancelInvoice</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#editModal" data-backdrop="static" data-keyboard="false" id="editload">

                                <i class="nav-icon far fa-address-book "></i>
                                <p>EditInvoice</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#PendingCollectionModal" data-backdrop="static" data-keyboard="false" id="pendingload">
                                <i class="nav-icon fas fa-microscope"></i>
                                <p>Pending Collection</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-poll"></i>
                                <p>Result Releasing</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon far fa-money-bill-alt"></i>
                                <p>Payments</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#CashClosingModel" data-backdrop="static" data-keyboard="false" id="cashclosingload">
                                <i class="nav-icon fas fa-cash-register"></i>
                                <p>Cash Closing</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#ReportDispachingModel" data-backdrop="static" data-keyboard="false" id="reportdispatchload">
                                <i class="nav-icon fas fa-cash-register"></i>
                                <p>Report Dispatching</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#BillwiseCollectionAreaModal" data-backdrop="static" data-keyboard="false" id="billwiseareaload">
                                <i class="nav-icon fas fa-cash-register"></i>
                                <p>Bill wise Collection - Area</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#CashReceiptModal" data-backdrop="static" data-keyboard="false" id="cashrecieptload">
                                <i class="nav-icon fas fa-cash-register"></i>
                                <p>Cash Receipt</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#SetsplRateModal" data-backdrop="static" data-keyboard="false" id="SetSplRateload">
                                <i class="nav-icon fas fa-cash-register"></i>
                                <p>Set Special Rate</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#CashPaymentModel" data-backdrop="static" data-keyboard="false" id="cashrecieptload">
                                <i class="nav-icon fas fa-cash-register"></i>
                                <p>Cash Payment</p>
                            </a>
                        </li>
                        
                        <li class="nav-item ">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#BillwiseCollectionModal" data-backdrop="static" data-keyboard="false" id="billwiseload">
                                <i class="nav-icon fas fa-cash-register"></i>
                                <p>Bill wise Collection</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-calculator"></i>
                                <p>Calculator</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon far fa-calendar-check"></i>
                                <p>Appointment</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon far fa-comment-dots"></i>
                                <p>Chat/Alerts</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-house-user"></i>
                                <p>Home Collection</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon far fa-envelope-open"></i>
                                <p>Email List</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon far fa-bell"></i>
                                <p>Alarm</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon far fa-newspaper"></i>
                                <p>News & Events</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon far fa-user-circle"></i>
                                <p>About Us</p>
                            </a>
                        </li>
                        <li class="nav-item ">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-sign-out-alt"></i>
                                <p>Exit</p>
                            </a>
                        </li>
                    </ul>

                </nav>


            </div>
            @*@Html.Partial("Navigationbar")*@
        </aside>
        @*/////////////////////////////////////////////////////////////////////////*@
        <div class="content-wrapper" style="margin-bottom: 42px;">

            <div>
                @Html.Partial("Accountledgerview")
            </div>
            <div>
                @Html.Partial("hospitalmodel")
            </div>

            <div class="modal" id="lookupentry" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup modal-large" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Look Up Entry</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closelookup" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-bg-div">
                                <div class="row">
                                    <div class="col-lg-4" id="treeviewlookup">
                                        <table class="table-responsive test-table" id="Lckuptb" style="width: 200px;height:500px">
                                            <thead>
                                                <tr>
                                                    <th scope="col" style="width: 100px;text-align:center" id="masters">Masters</th>

                                                </tr>
                                            </thead>

                                            <tbody>
                                        </table>
                                    </div>
                                    <div class="col-lg-8">
                                        <div class="table-responsive firstauth-table">
                                            <table class="table-responsive test-table" id="getlookup" style="height:400px">
                                                <thead>
                                                    <tr>
                                                        <th scope="col" style="width:160px;height:20px">S.N</th>
                                                        <th scope="col" style="width:150px">Code</th>
                                                        <th scope="col" style="width:150px">Name</th>
                                                        <th scope="col" style="width:150px">Details</th>
                                                        <th scope="col" style="width:160px">Value</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    <tr>
                                                        <td style="height:20px">1</td>
                                                        <td style="height:20px"></td>
                                                        <td style="height:20px"></td>
                                                        <td style="height:20px"></td>
                                                        <td style="height:20px"></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <div class="row lookup-form">
                                            <div class="col-lg-4">
                                                <div class="field-item">
                                                    <label for="">Code</label>
                                                    <input type="text" id="Mstr_key" style="display:none" required="" class="fcs">
                                                    <input type="text" id="codes" style="width:70px">
                                                </div>
                                            </div>
                                            <div class="col-lg-8">
                                                <div class="field-item">
                                                    <label for="">Name</label>
                                                    <input type="text" id="names" class="fcs">
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="field-item">
                                                    <label for="">Details</label>
                                                    <textarea name="" id="detailss" cols="30" rows="10" class="fcs"></textarea>
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="field-item">
                                                    <label for="">Value</label>
                                                    <input type="text" id="values" class="fcs">
                                                    <input type="text" id="mastertype" style="display:none">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn" id="refreshlook"><i class="fas fa-sync"></i> Refresh</button>
                            <button class="submit-btn" id="savelookup"><i class="fas fa-save"></i> Save</button>
                            <button class="submit-btn" id="updatelookup"><i class="fas fa-save"></i>Update</button>
                            <button class="bleu-btn" id="dellookup"><i class="fas fa-calculator"></i> Delete</button>
                            @*<button class="bleu-btn"><i class="far fa-trash-alt"></i>Print</button>*@
                            <button class="bleu-btn" id="Exitlookup"><i class="fas fa-times"></i> Exit</button>

                        </div>
                    </div>
                </div>
            </div>

            <div class="modal" id="CreateuserModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true" style="z-index: 1400;display:none">
                <div class="modal-dialog modal-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Create User</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closeuser" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-bg-div create-user-div">
                                <div class="row justify-content-end">
                                    <div class="col-lg-8 col-md-8 col-sm-9">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="field-item">
                                                    <label for="">User Name</label>
                                                    <input type="text" id="txtusername" class="fcs" autocomplete="false">
                                                    <input type="text" id="txtusernameid" style="display:none" autocomplete="false">
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="field-item">
                                                    <label for="">Password</label>
                                                    <input type="password" id="txtpwd" class="fcs" autocomplete="new-password">
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="field-item">
                                                    <label for="">Confirm Password</label>
                                                    <input type="password" id="contxtpwd" class="fcs" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="field-item">
                                                    <label for="">User Group</label>
                                                    <select name="" id="usergrp" class="fcs" autocomplete="off">
                                                        <option>Staff</option>
                                                        <option>Supervisor</option>
                                                        <option>Administrator</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="field-item">
                                                    <label for="">Employee</label>
                                                    <input type="text" id="empname" style="width:280px" onkeyup="if (event.keyCode == 27) this.value = ''" class="fcs" readonly>
                                                    <input type="text" id="empnameid" style="display:none">
                                                    <button class="searchbtn" style="position:absolute; right:40px" name="userempsrch" id="userempsrch" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" type="button">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                                    @*<button class="searchbtn" style="position:absolute; right:40px" id="userempsrch" data-toggle="modal" data-target="#searchemployeestaff" *@ @*data-backdrop="static" data-keyboard="false" *@ @*><i class="fas fa-search"></i></button>*@
                                                    @*<a data-toggle="modal" href="#employeeModal" class="btn btn-primary"></a>*@
                                                    <button data-toggle="modal" data-target="#employeeModal" data-backdrop="static" data-keyboard="false" type="button" style="position:absolute; left:400px;height:27px;background:#428bca;border-color:#428bca" id="employeeshow"><i class="fas fa-plus"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-3 col-8">


                                        <div class="signature-field" style="height:100px;width:110px">
                                            <img src="" id="img" style="height:130px;width:110px">
                                        </div>
                                        <div>
                                            <input type="file" id="files" name="Filepic" style="visibility:hidden;" accept="image/png, image/svg, image/jpeg" @*onchange="ShowPreview(this)*@ />
                                            <button class="submit-btn doc-btn" @*style="display:none;"*@ onclick="document.getElementById('files').click()" id="uploadimg">Upload Signature</button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn" id="createusernew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="createuserexit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="createusersave"><i class="fas fa-save"></i> Save</button>
                        </div>
                    </div>

                </div>
            </div>

            @*<div>
                @Html.Partial("employeeview")
            </div>*@
            @*<div>
                @Html.Partial("usercreationmodel")
            </div>*@
            <div class="modal" id="employeeModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true" style="z-index:1600;display:none">
                <div class="modal-dialog modal-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Employee</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closeemp" style="background-color:#428bca" >
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-bg-div">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="field-item namefield">
                                            <label for="">Name</label>
                                            <div class="row">
                                                <div class="col-lg-2 col-md-2 col-sm-2 col-3"><input type="text" id="empid" readonly></div>
                                                <div class="col-lg-10 col-md-10 col-sm-10 col-9">
                                                    <input type="text" id="employeename" class="bold-input-field fcs" onkeyup="if ( event.keyCode == 27 ) this.value=''">
                                                    <input type="text" style="display:none" id="employeenameid">
                                                    <button class="searchbtn" nam id="employeesrch" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false"><i class="fas fa-search"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <label for="">Address</label>
                                            <textarea class="textarea-style fcs" name="" id="empaddress" cols="30"
                                                      rows="10"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Mobile</label>
                                            <input type="text" id="empmobile" class="fcs">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Phone</label>
                                            <input type="text" id="empphone" class="fcs">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Email</label>
                                            <input type="email" id="empemail" class="fcs">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Area</label>
                                            <input type="text" id="emparea" onkeyup="if ( event.keyCode == 27 ) this.value=''" class="fcs" readonly>
                                            <input type="text" style="display:none" id="empareaid">
                                            <button class="searchbtn" id="empareasrch" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false"><i class="fas fa-search"></i></button>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <label for="">Contact Person</label>
                                            <input type="text" id="empcntperson" class="fcs">
                                        </div>
                                    </div>

                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <div class="field-item">
                                            <label for="">Date of Birth</label>

                                            <input type="text" name="empdob" id="empdob" placeholder="dd-mm-yyyy" class="fcs" value="@ViewBag.cashcurdate">

                                        </div>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-7">
                                        <div class="field-item">
                                            <label for="">Gender</label>
                                            <ul class="address-dis-list">
                                                <li>
                                                    <label for="male">
                                                        <input type="radio" name="a" id="empmale">
                                                        Male
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="female">
                                                        <input type="radio" name="a" id="empfemale">
                                                        Female
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-5 col-9">
                                        <div class="field-item">
                                            <label for="">Wed. Day</label>
                                            @*<input type="date" name="" id="empwday">*@
                                            <input type="text" name="empwday" id="empwday" placeholder="dd-mm-yyyy" class="fcs" value="@ViewBag.cashcurdate">
                                        </div>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-7 col-3">
                                        <div class="field-item pl-0">
                                            <ul class="address-dis-list">
                                                <li>
                                                    <label for="active">
                                                        <input type="checkbox" name="a" id="empactive" checked>
                                                        Active
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <label for="">Note</label>
                                            <textarea class="docnote-textarea fcs" name="" id="empnote" cols="30"
                                                      rows="10"></textarea>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn" id="empnew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="employeexit" data-dismiss="modal"><i class="fas fa-times"></i> Exit</button>
                            @*<button class="bleu-btn" id="employeexituser"><i class="fas fa-times"></i> Exit</button>*@
                            <button class="submit-btn" id="empsave"><i class="fas fa-save"></i> Save</button>
                        </div>
                    </div>
                </div>
            </div>
            @*<div class="modal fade" id="dctrSrchLkupEntry" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true" style="display:none">
            *@
            
            <div class="modal" id="cancellModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cancel Invoice</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closcancell" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-bg-div">
                                <div class="row">
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Lab No</label>
                                            <input type="text" id="invoicelabno">
                                            <input type="text" id="invoicelabnoid" style="display:none">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Date Time</label>
                                            <input type="text" id="invdatetime" value="@ViewBag.todate" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item namefield">
                                            <label for="">Name</label>
                                            <div class="row">
                                                <div class="col-lg-2 col-md-2 col-sm-2 col-3"><input type="text" id="invprefix" readonly></div>
                                                <div class="col-lg-10 col-md-10 col-sm-10 col-9">
                                                    <input type="text" id="invname" readonly>
                                                    <button class="searchbtn" id="invsearch"><i class="fas fa-search"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <div class="field-item">
                                            <label for="">Age</label>
                                            <input type="text" name="" id="invage" style="width:30px" placeholder="DD" readonly>

                                            <input type="text" name="" id="invmonth" style="width:30px" placeholder="MM" readonly>

                                            <input type="text" name="" id="invyear" style="width:50px" placeholder="YYYY" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-7">
                                        <div class="field-item">
                                            <label for="">Gender</label>
                                            <ul class="address-dis-list">
                                                <li>
                                                    <label for="male">
                                                        <input type="radio" name="a" id="invmale" readonly>
                                                        Male
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="female">
                                                        <input type="radio" name="a" id="invfemale" readonly>
                                                        Female
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Phone</label>
                                            <input type="text" id="invphono" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Email</label>
                                            <input type="email" id="invemail" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <label for="">Ref. by</label>
                                            <input type="text" id="invrefby" readonly>
                                            <input type="text" id="invrefbyid" style="display:none">
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <label for="">Out Dr.</label>
                                            <input type="text" id="invoutdr" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Branch</label>
                                            <input type="text" id="invbranch" readonly>
                                            <input type="text" id="invbranchid" style="display:none">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">IP/OP No</label>
                                            <input type="text" id="invipopno" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Coll. Mode</label>
                                            <input type="text" id="invcolno" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Coll. By</label>
                                            <input type="text" id="invcollby" readonly>
                                            <input type="text" id="invcollbyid" style="display:none">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Sample On</label>
                                            <input type="text" id="invsampleon" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Report On</label>
                                            <input type="text" id="invreporton" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item rportrequested">
                                            <label for="">Report requested through </label>
                                            <ul class="address-dis-list">

                                                <li>
                                                    <label for="male">
                                                        <input type="checkbox" name="a" id="chkPersonally" readonly>
                                                        Personally
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="female">
                                                        <input type="checkbox" name="a" id="chkTelephone" disabled="disabled" readonly>
                                                        Telephone
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="male">
                                                        <input type="checkbox" @*name="a"*@ id="chkCourier" value="control 2.1" name="control 2.1" disabled="disabled" />
                                                        Courier
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="female">
                                                        <input type="checkbox" name="a" id="chkEmail" onclick="return false" disabled="disabled" readonly>
                                                        Email
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="female">
                                                        <input type="checkbox" name="a" id="chkSMS" onclick="return false" disabled="disabled" readonly>
                                                        SMS
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">

                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Inv. Amount</label>
                                            <input type="text" id="invamount" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <label for="">Reason</label>
                                            <textarea class="textarea-style" name="" id="invtextarea" cols="30"
                                                      rows="10"></textarea>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn" id="cancelexit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="invsave"><i class="fas fa-save"></i> Save</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Edit Invoice</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closeeditmodel" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-bg-div">
                                <div class="row">
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Lab No</label>
                                            <input type="text" id="editlabno">
                                            <input type="text" id="editlabnoid" style="display:none">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Date Time</label>
                                            <input type="text" value="@ViewBag.todate" id="todaydate" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item namefield">
                                            <label for="">Name</label>
                                            <div class="row">
                                                <div class="col-lg-2 col-md-2 col-sm-2 col-3"><input type="text" id="editprefix"></div>
                                                <div class="col-lg-10 col-md-10 col-sm-10 col-9">
                                                    <input type="text" id="editname">
                                                    <input type="text" id="editnameid" style="display:none">
                                                    @*<button class="searchbtn"><i class="fas fa-search"></i></button>*@
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <div class="field-item">

                                            <label for="">Age</label>

                                            @*<label for="" style="left:30px">DD</label>
                                            <label for="" style="left:100px">MM</label>
                                            <label for="" style="left:170px">YY</label>*@
                                            <input type="text" name="" id="editinvage" style="width:40px;position:relative; " placeholder="DD">

                                            <input type="text" name="" id="editinvmonth" style="width:40px;position:relative; "placeholder="MM">

                                            <input type="text" name="" id="editinvyear" style="width:40px;position:relative;"placeholder="YY">

                                        </div>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-7">
                                        <div class="field-item">
                                            <label for="">Gender</label>
                                            <ul class="address-dis-list">
                                                <li>
                                                    <label for="male">
                                                        <input type="radio" name="a" id="editmale">
                                                        Male
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="female">
                                                        <input type="radio" name="a" id="editfemale">
                                                        Female
                                                    </label>
                                                </li>
                                                <li>
                                                    <label id="LblPateniId" style="color:red" readonly></label>

                                                    @*<input type="text" name="a" id="LblPateniId" style="color:red" readonly >*@

                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Phone</label>
                                            <input type="text" id="editphone">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Phone2</label>
                                            <input type="text" id="editphone2">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Email</label>
                                            <input type="email" id="editemail">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Nationality</label>
                                            <input type="text" id="editnationality">
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <label for="">Address</label>
                                            <input type="text" id="editaddress">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Ref. By</label>
                                            <input type="text" id="editrefby" readonly> <button id="refbybutton" style="display:none" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" ></button>
                                            <input type="text" id="editrefbyid" style="display:none">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Out Dr.</label>
                                            <input type="text" id="editoutdr" readonly>
                                            <button id="outdrbutton" style="display:none" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false"></button>


                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Passport</label>
                                            <input type="text" id="editpassport">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">SRF. No</label>
                                            <input type="text" id="editsrfno">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Branch</label>
                                            <input type="text" id="editbranch" readonly>
                                            <input type="text" id="editbranchid" style="display:none">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Aadhaar</label>
                                            <input type="text" id="editadhar">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Ward No</label>
                                            <input type="text" id="editwardno">
                                            <input type="text" id="editwardnoid" style="display:none">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">IP/OP No</label>
                                            <input type="text" id="editipopno">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Coll. Mode</label>
                                            <input type="text" id="editcollmode">
                                            <input type="text" id="editcollmodeid" style="display:none">
                                            <button id="collmodebutton" style="display:none" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false"></button>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Coll. By</label>
                                            <input type="text" id="editcollby">
                                            <input type="text" id="editcollbyid" style="display:none">
                                            <button id="collbybutton" style="display:none" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false"></button>

                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Sample On</label>
                                            <input type="datetime" id="editsampleon">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Report On</label>
                                            <input type="text" id="editreporton">
                                        </div>
                                    </div>


                                    <div class="col-lg-12">
                                        <div class="field-item rportrequested">
                                            <label for="">Report requested through </label>
                                            <ul class="address-dis-list">
                                                <li style="position:relative;">
                                                    <label for="male">
                                                        <input type="checkbox" name="a" id="editpersonality">
                                                        Personally
                                                    </label>
                                                </li>
                                                <li style="position:relative; ">
                                                    <label for="female">
                                                        <input type="checkbox" name="a" id="edittelephone">
                                                        Telephone
                                                    </label>
                                                </li>
                                                <li style="position:relative;">
                                                    <label for="male">
                                                        <input type="checkbox" name="a" id="editcourier">
                                                        Courier
                                                    </label>
                                                </li>
                                                <li style="position:relative;">
                                                    <label for="female">
                                                        <input type="checkbox" name="a" id="chkeditemail">
                                                        Email
                                                    </label>
                                                </li>
                                                <li style="position:relative; ">
                                                    <label for="female">
                                                        <input type="checkbox" name="a" id="editsms">
                                                        SMS
                                                    </label>
                                                </li>
                                                <li style="position:relative;">
                                                    <label for="female">
                                                        <input type="checkbox" name="a" id="editwastsup">
                                                        Whatsup
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <input type="text" id="txtReleaseMode">
                                        </div>
                                    </div>

                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <ul class="address-dis-list">
                                                <li>
                                                    <label for="male">
                                                        <input type="checkbox" name="a" id="urgentreport">
                                                        Urgent Report
                                                    </label>
                                                </li>
                                                <li>

                                                    <input type="text" name="a" id="LblStatus" style="color:red;display:none">


                                                </li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <label for="">Note</label>
                                            <textarea class="textarea-style" name="" id="editnote" cols="30"
                                                      rows="10"></textarea>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn" id="editnew"><i class="far fa-edit"></i> New</button>
                            <button class="bleu-btn" id="editexit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="editupdate"><i class="fas fa-save"></i> Update</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal" id="collectedbysrch" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true" style="display:none">
                <div class="modal-dialog modal-popup" role="document">
                    <div class="modal-content" style="height:400px;width:700px">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel"></h5>
                            <button type="button" class="close searchledgerclose" data-dismiss="modal" aria-label="Close" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>

                        <div class="modal-body">
                            <div class="form-bg-div" style="height:400px;">
                                <div class="row">
                                    <div class="col-lg-12">




                                        <input type="text" id="txteditname" style="width: 600px;" />
                                        <div class="row">
                                            <div class="container-fluid" id="scroller">
                                                <div class="table-responsive test-table" style="width:600px;height:300px;" id="selector">
                                                    <table class="table-bordered" id="collbytb">
                                                        <thead>
                                                            <tr>

                                                                <th scope="col" style="width: 400px;text-align:center" id="header">Name</th>
                                                                <th scope="col" style="width: 120px;" id="header2">Code</th>
                                                                <th scope="col" style="width: 120px;" id="header2">Address</th>
                                                                <th scope="col" style="width: 120px;" id="header2">Mobile No</th>
                                                                <th scope="col" style="width: 120px;" id="header2">Phone no</th>
                                                                <th scope="col" style="width: 120px;" id="header2">Dob</th>
                                                                <th scope="col" style="width: 120px;" id="header2">Email Id</th>
                                                                <th scope="col" style="width: 120px;" id="header2">Gender</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody id="tbody1">
                                                            <tr></tr>
                                                        </tbody>
                                                    </table>

                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div>

                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </div>

<div class="modal fade" id="SetsplRateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-popup billwise-popup" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Set Special Rate</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="splrateclose" style="background-color:#428bca">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div id="spinner-div" class="pt-5">
                                        <div class="spinner-border text-primary" role="status">
                                        </div>
                                    </div>
                <div id="spinner-div3" >
                    <div class="spinner-border text-primary" role="status">
                    </div>
                </div>
                <div class="form-bg-div">

                    <div class="row mb-2">
                        <div class="col-lg-4">
                            <ul class="billwise-radio twocol-list">
                                <li>
                                    <input type="radio" name="" id="OptSplAct">
                                    <label for="">Account</label>
                                </li>
                                <li>
                                    <input type="radio" name="" id="OptSplSchm">
                                    <label for="">Scheme</label>
                                </li>
                            </ul>
                        </div>

                        <div class="col-lg-4 col-md-4" style="margin-right: 200px">

                            <div class="field-item default-percentage">
                                <label for="" style="margin-right: 1em">Default Percentage</label>
                                <input type="text" style="width:138px;margin-left:50px" id="SplDPercent">

                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4">
                            <div class="field-item dispatchmode-item">
                                <label for="">Account</label>
                                <input type="text" id="SpltxtAct" readonly>
                                <input type="text" id="SpltxtActid" style="display:none">
                                <button id="SplActbtn" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false"><i class="fas fa-ellipsis-h"></i></button>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4">
                            <div class="field-item dispatchmode-item">
                                <label for="">Scheme</label>
                                <input type="text" id="Spltxt" readonly>
                                <input type="text" id="Spltxtid" style="display:none">
                                <button id="Spltxtbtn" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" type="button"><i class="fas fa-ellipsis-h"></i></button>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4">
                            <div class="field-item dispatchmode-item">
                                <label for="">Import</label>
                                <input type="text" id="SplImport" readonly>
                                <input type="text" id="SplImportid" style="display:none">
                                <button id="SplImportbtn" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" type="button"><i class="fas fa-ellipsis-h"></i></button>
                            </div>
                        </div>

                    </div>



                    <div id="table-scroll1" class="table-scroll table-responsive " tabindex="0" >
                       

                                <table id="tbsplrate" class="table table-bordered">
                                   
                                    <thead>
                                        <tr>
                                            <th scope="col">Slno</th>
                                            <th scope="col">Test Name</th>
                                            <th scope="col">Rate</th>
                                            <th scope="col">Dis%</th>
                                            <th scope="col">Sp.Rate</th>
                                            <td style="display:none"><button style="display:none" id="SplTestsrch"data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" type="button"></button></td>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>

                                </table>
                            </div>
                    




                </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn" id="Splgetdefault"><i class="fas fa-redo-alt"></i> Get Default</button>
                            <button class="bleu-btn" id="SplPrint"><i class="fas fa-print"></i> Print</button>
                            <button class="bleu-btn" id="SplNew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="SplExit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="SplSave"><i class="fas fa-save"></i> Save</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal fade" id="CashPaymentModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup billwise-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cash Payment</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="cashpaymentclose" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-bg-div">
                                <div class="row mb-2">

                                    <div class="col-lg-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Trans No</label>
                                            <input type="text" id="CashPaymentTransNo">
                                            <input type="text" id="CashPaymentTransNoid" style="display:none">
                                            <button id="btncashpaymentno" style="display:none"></button>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Date</label>
                                            <input type="text" id="CashPaymentDate" value="@ViewBag.cashcurdate">
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item dispatchmode-item">
                                            <label for="">Account</label>
                                            <input type="text" id="CashpaymentAct" readonly>
                                            <input type="text" id="CashpaymentActid" style="display:none">
                                            <button data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" id="btnCashPaymentact"><i class="fas fa-ellipsis-h"></i></button>

                                          
                                            <button data-toggle="modal" data-target="#accountledger" data-backdrop="static" data-keyboard="false" id="CashbtnAccountledger" style="display:none"><i class="fas fa-ellipsis-h"></i></button>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item">
                                            <label for="">Amount</label>
                                            <input type="text" id="CashPaymentAmt">
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item">
                                            <label for="">Naration</label>
                                            <input type="text" id="CashPaymentNarr">
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item">
                                            <label for="">User Info</label>
                                            <input type="text" id="CashPaymentUserinfo" readonly>
                                            <input type="text" id="CashPaymentUserinfoid" style="display:none">
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item">
                                            <label for="">Attach File</label>
                                            <input type="file" class="pl-0" id="cashpaymentfile"  accept="image/png, image/svg, image/jpeg">
                                            @*<button id="Load" style="display:none"></button>*@
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4 scan-remove-print-btns">
                                        <button class="bleu-btn"  id="cashpaymentsacn" style="display:none"><i class="fas fa-plus"></i> Scan</button>
                                        <button class="bleu-btn" id="removefile"><i class="fas fa-times"></i> Remove File</button>
                                        <button class="bleu-btn" id="cashpayprivew"><i class="fas fa-save"></i> Print Preview</button>
                                    </div>

                                </div>
                                <div class="row justify-content-center">
                                    <div class="col-lg-6" style="margin-right: 450px">

                                        <div class="prevew-container " >

                                            @*<input type="text" style="overflow:scroll;" id="file-content" />*@
                                            <img src="" id="displayfile" style="height:250px;width:440px">
                                        </div>
                                    </div>
                                </div>


                                





                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn"  id="CashPaymentPrint" style="display:none"><i class="fas fa-print"></i> Print</button>
                            <button class="bleu-btn" id="CashPaymentNew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="CashPaymentRemove"><i class="fas fa-trash-alt"></i> Delete</button>
                            <button class="bleu-btn" id="cashpaymentexit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="CashPaymentSave"><i class="fas fa-save"></i> Save</button>

                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="ChequeissueModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup billwise-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cheque Issue</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="Chqissueclose" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div id="spinner-div">
                                <div class="spinner-border text-primary" role="status">
                                </div>
                            </div>
                            <div class="form-bg-div">
                                <div class="row mb-2">

                                    <div class="col-lg-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Trans No</label>
                                            <input type="text" id="ChqisuTransNo" >
                                            <input type="text" id="ChqisuTransNoid"  style="display:none">
                                            <button id="btnChqisueNo" style="display:none"></button>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Date</label>
                                            <input type="text" id="ChqissuecurDate" value="@ViewBag.cashcurdate" readonly>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item dispatchmode-item">
                                            <label for="">Party</label>
                                            <input type="text" id="ChqisuParty" readonly>
                                            <input type="text" style="display:none" id="ChqisuPartyid">
                                            <button data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" id="btnChqisuParty" ><i class="fas fa-ellipsis-h"></i></button>
                                           
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item dispatchmode-item">
                                            <label for="">Bank</label>
                                            <input type="text" id="ChqisueBank" readonly>
                                            <input type="text" style="display:none" id="ChqisueBankid">
                                            <button data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" id="btnChqisueBank"><i class="fas fa-ellipsis-h"></i></button>

                                        </div>
                                    </div>

                                    <div class="col-lg-4 col-md-4">
                                        <div class="field-item">
                                            <label for="">Amount</label>
                                            <input type="text" id="ChqisueAmt">
                                        </div>
                                        </div>
                                        <div class="col-lg-4 col-md-4">
                                            <div class="field-item">
                                                <label for="">Cheque No</label>
                                                <input type="text" id="ChqisueNo">
                                            </div>
                                            </div>
                                    <div class="col-lg-4 col-md-4">
                                        <div class="field-item">
                                            <label for="">Cheque Date</label>
                                            <input type="text" id="ChqissueDate"value="@ViewBag.cashcurdate" readonly>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4 upto-checkbox">
                                        <div class="field-item" style="right:22px">
                                            <label for="">Narration</label>
                                            </div>
                                            <div class="field-item">
                                               
                                                <textarea style="width:805px;height:80px;left:30px" id="ChqisuNarr"></textarea>
                                                <div class="field-item" style="left:300px">

                                                    <input type="checkbox" id="ChkPass">
                                                    <label for=""> Passed</label>
                                                    <div class="field-item">
                                                        <label for="">User Info</label>
                                                        <input type="text" id="ChqUsrinfo" style="width:295px" readonly>
                                                        <input type="text" id="ChqUsrinfoid" style="display:none" readonly>
                                                       
                                                    </div>
                                                </div>
                                            
                                            </div>
                                        </div>
                                   

                                </div>







                            </div>
                        </div>
                        <div class="modal-footer">
                           
                            <button class="bleu-btn" id="ChqisueNew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="ChqisueDet"><i class="fas fa-trash-alt"></i> Delete</button>
                            <button class="bleu-btn" id="ChqisueExt"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="ChqisueSave"><i class="fas fa-save"></i> Save</button>

                        </div>
                    </div>
                </div>
            </div>


            <div class="modal fade" id="ChequeRecModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true"style="z-index:2000;top:7%">
                <div class="modal-dialog modal-popup billwise-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cheque Receival</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ChqRecclose" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div id="spinner-div">
                                <div class="spinner-border text-primary" role="status">
                                </div>
                            </div>
                            <div class="form-bg-div">
                                <div class="row mb-2">

                                    <div class="col-lg-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Trans No</label>
                                            <input type="text" id="ChqRecTransNo">
                                            <input type="text" id="ChqRecTransNoid" style="display:none">
                                            <button id="btnChqRecNo" style="display:none"></button>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Date</label>
                                            <input type="text" id="ChqReccurDate" value="@ViewBag.cashcurdate" readonly>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item dispatchmode-item">
                                            <label for="">Party</label>
                                            <input type="text" id="ChqRecParty" readonly>
                                            <input type="text" style="display:none" id="ChqRecPartyid">
                                            <button data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" id="btnChqRecParty"><i class="fas fa-ellipsis-h"></i></button>

                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item dispatchmode-item">
                                            <label for="">Bank</label>
                                            <input type="text" id="ChqRecBank" readonly>
                                            <input type="text" style="display:none" id="ChqRecBankid">
                                            <button data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" id="btnChqRecBank"><i class="fas fa-ellipsis-h"></i></button>

                                        </div>
                                    </div>

                                    <div class="col-lg-4 col-md-4">
                                        <div class="field-item">
                                            <label for="">Amount</label>
                                            <input type="text" id="ChqRecAmt">
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4">
                                        <div class="field-item">
                                            <label for="">Cheque No</label>
                                            <input type="text" id="ChqRecNo">
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4">
                                        <div class="field-item">
                                            <label for="">Cheque Date</label>
                                            <input type="text" id="ChqRecDate" value="@ViewBag.cashcurdate" readonly>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4 upto-checkbox">
                                        <div class="field-item" style="right:22px">
                                            <label for="">Narration</label>
                                        </div>
                                        <div class="field-item">

                                            <textarea style="width:805px;height:80px;left:30px" id="ChqRecNarr"></textarea>
                                            <div class="field-item" style="left:300px">

                                                <input type="checkbox" id="ChqRecPass">
                                                <label for=""> Passed</label>
                                                <div class="field-item">
                                                    <label for="">User Info</label>
                                                    <input type="text" id="ChqRecUsrinfo" style="width:295px" readonly>
                                                  

                                                </div>
                                            </div>

                                        </div>
                                    </div>


                                </div>







                            </div>
                        </div>
                        <div class="modal-footer">

                            <button class="bleu-btn" id="ChqRecNew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="ChqRecDet"><i class="fas fa-trash-alt"></i> Delete</button>
                            <button class="bleu-btn" id="ChqRecExt"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="ChqRecSave"><i class="fas fa-save"></i> Save</button>

                        </div>
                    </div>
                </div>
            </div>




            <div class="modal fade" id="CashReceiptModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup billwise-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cash Receipt</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="cashrecclose" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-bg-div">
                                <div class="row mb-2">

                                    <div class="col-lg-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Trans No</label>
                                            <input type="text" id="CashRecTransNo">
                                            <input type="text" id="CashRecTransNoid" style="display:none">
                                            <button id="btnTransNo" style="display:none"></button>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Date</label>
                                            <input type="text" id="CashRecDate" value="@ViewBag.cashcurdate">
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item dispatchmode-item">
                                            <label for="">Account</label>
                                            <input type="text" id="CashRecAccountTxt" readonly>
                                            <input type="text" style="display:none" id="CashRecAccountTxtid">
                                            <button data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" id="btnaccounts"><i class="fas fa-ellipsis-h"></i></button>
                                            <button data-toggle="modal" data-target="#accountledger" data-backdrop="static" data-keyboard="false" id="CashbtnAccountledger" style="display:none"><i class="fas fa-plus"></i></button>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item">
                                            <label for="">Amount</label>
                                            <input type="text" id="CashRecamount">
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item">
                                            <label for="">Naration</label>
                                            <input type="text" id="CashRecNarr">
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-4">
                                        <div class="field-item">
                                            <label for="">User Info</label>
                                            <input type="text" id="CashRecUsrInfo" readonly>
                                            <input type="text" id="CashRecUsrInfoid" style="display:none">
                                        </div>
                                    </div>


                                    <div class="col-lg-6 col-md-4 scan-remove-print-btns">
                                        <button class="bleu-btn" id="CashRecPrintprivew"><i class="fas fa-save"></i> Print Preview</button>
                                    </div>

                                </div>







                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn" id="CashRecPrint" style="display:none;"><i class="fas fa-print"></i> Print</button>
                            <button class="bleu-btn" id="CashRecNew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="CashRecDelete"><i class="fas fa-trash-alt"></i> Delete</button>
                            <button class="bleu-btn" id="CashRecExit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="CashRecSave"><i class="fas fa-save"></i> Save</button>

                        </div>
                    </div>
                </div>
            </div>






            
           
           


           
            @*<div class="content-wrapper" style="margin-bottom: 42px;">*@
            <div class="modal fade" id="PendingCollectionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup modal-large" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Pending Collection</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closepnd" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-bg-div cashclosing-page">
                                <div class="row authorization-header">
                                    <div class="col-lg-6 col-md-6 col-sm-6 pr-lg-4 pendingcoll-left">
                                        <div class="row">
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Lab No</label>
                                                    <input type="text" id="pendlabno">
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Date Time</label>
                                                    <input type="text" id="pnddatetime" readonly>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="field-item">
                                                    <label for="">Name</label>
                                                    <div class="row no-padding">
                                                        <div class="col-2"><input type="text" id="pndprifix" readonly></div>
                                                        <div class="col-10"><input type="text" id="pndname" readonly></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item nopadding-col-6">
                                                    <label for="">Age</label>
                                                    <div class="row">
                                                        <div class="col-6"><input type="text" id="agedd" placeholder="DD" style="width:70px" readonly></div>
                                                        <div class="col-6">
                                                            <input type="text" id="agemm" placeholder="MM" style="width:30px" readonly>
                                                            <input type="text" id="ageyy" placeholder="YY" style="width:35px" readonly>
                                                            @*<select name="" id="">
                                                                <option value="">Year</option>
                                                                <option value="">Month</option>
                                                            </select>*@
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Gender</label>
                                                    <select id="pndgender">
                                                        @*<option value="">Male</option>*@
                                                        <option value=""></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Phone</label>
                                                    <input type="text" id="pndphono" readonly>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Email</label>
                                                    <input type="email" id="pndemail" readonly>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Pay Mode</label>
                                                    <select id="pndpaymode">
                                                        <option value="" selected disabled style="display:none"></option>
                                                        <option value="">Cash</option>
                                                        <option value="">Debit/Credit</option>
                                                        <option value="">Cheque</option>
                                                        <option value="">BHIM/UPI Online Payment</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="" id="pndlabel">Card No</label>
                                                    <input type="text" id="pndcardno" readonly>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="field-item">
                                                    <label for="">Bank</label>
                                                    <input type="text" id="pndbank" readonly>
                                                    <input type="text" id="pndbankid" style="display:none">
                                                    <button id="pndbankbtn" style="display:none" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false"></button>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Inv. Amount</label>
                                                    <input type="text" id="pndamt" readonly>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Cur. Balance</label>
                                                    <input type="text" id="pndcurbalance" readonly>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Coll. Amount</label>
                                                    <input type="text" id="pndcollamt">
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Coll. Date Time</label>
                                                    <input type="text" id="pndcoldatetime" value="@ViewBag.fromdate" readonly>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="table-responsive firstauth-table">
                                                    <table class="table table-bordered" id="pendtb1">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col" style="width:50px">S.N</th>
                                                                <th scope="col" style="width:100px">Rece. Date</th>
                                                                <th scope="col" style="width:100px">Amount</th>
                                                                <th scope="col" style="width:100px">Print</th>
                                                                <th scope="col" style="width:150px">User</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody>
                                                           
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="field-item notediv">
                                                    <label for="">Note</label>
                                                    <textarea name="" id="pndnote" cols="30" rows="10"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 pl-lg-4 pending-right">
                                        <div class="row">
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">From</label>
                                                    <input type="text" id="pndfromdate" value="@ViewBag.cashcurdate">
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">To</label>
                                                    <input type="text" id="pndtodate" value="@ViewBag.cashcurdate">
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">

                                                    <ul class="address-dis-list">
                                                        <li>
                                                            <label for="" style="right:90px">
                                                                <input type="checkbox" name="a" id="pndcorporate">

                                                                Corporate
                                                            </label>

                                                            <input type="text" id="pndcorptxt" style="width:120px" />

                                                            <input type="text" id="corpid" style="display:none" />
                                                            @*<div class="col-lg-6 col-sm-6 col-md-6 buttonswrap">*@
                                                            <button id="pndcorpsrch" class="btn btn-primary" style="background-color:#337ab7;width:30px;height:27px" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false"><i class="fas fa-search "></i></button>
                                                            @*</div>*@

                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6 buttonswrap">
                                                <button id="pndrefresh">Refresh</button>
                                                <button id="pndprint1">Print</button>

                                            </div>
                                        </div>

                                        <div class="table-responsive firstauth-table" id="pndtablediv" style="height:375px">
                                            <table class="table table-bordered" id="pndtb2">
                                                <thead>
                                                    <tr>
                                                        <th scope="col" style="width:40px;">S.N</th>
                                                        <th scope="col" style="width:50px">Lab</th>
                                                        <th scope="col" style="width:50px">Date</th>
                                                        <th scope="col" style="width:70px">Name</th>
                                                        <th scope="col" style="width:90px">Balance</th>
                                                        <th scope="col" style="width:90px">Corporate</th>
                                                        <th scope="col" style="width:90px">User View</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    <tr>
                                                        <td>1</td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td><button>View</button></td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="table-responsive firstauth-table" id="pndviewdiv" style="height:400px">
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Lab No</label>
                                                    <input type="text" id="pendviewlabno">
                                                </div>
                                            </div>

                                            <div class="col-lg-12">
                                                <div class="field-item">
                                                    <label for="">Name</label>
                                                    <div class="row no-padding">

                                                        <div class="col-10"><input type="text" id="pndviewname"></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="field-item">
                                                    <label for="">Pay Mode</label>
                                                    <select id="pndpaymodeview">
                                                        <option value="" selected disabled style="display:none"></option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-lg-12" style="height:110px">
                                                <div class="table-responsive firstauth-table" style="height:80px">
                                                    <table class="table table-bordered" id="pendviewtb">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">S.N</th>
                                                                <th scope="col">Code</th>
                                                                <th scope="col">TestName</th>
                                                                <th scope="col">Rate</th>
                                                                <th scope="col">DiscAmt</th>
                                                                <th scope="col">Total</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody>
                                                            <tr>
                                                                <td>1</td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-6 col-sm-6 col-md-6">
                                                    <div class="field-item">
                                                        <label for="">Total</label>
                                                        <input type="text" id="pndviewtotal">
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-sm-6 col-md-6">
                                                    <div class="field-item">
                                                        <label for="">Discount</label>
                                                        <select id="discperview" style="width:40px">
                                                            <option></option>
                                                        </select>
                                                        <input type="text" id="pndviewdisc" style="width:116px" />
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-sm-6 col-md-6">
                                                    <div class="field-item">
                                                        <label for="">Disc Reason</label>
                                                        <input type="text" id="pnddiscrson">
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-sm-6 col-md-6">
                                                    <div class="field-item">
                                                        <label for="">S.charge</label>
                                                        <input type="text" id="pndscharge">
                                                    </div>
                                                </div>

                                                <div class="col-lg-6 col-sm-6 col-md-6">
                                                    <div class="field-item">
                                                        <label for="">NetAmount</label>
                                                        <input type="text" id="pndnetamt">
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-sm-6 col-md-6">
                                                    <div class="field-item">
                                                        <label for="" style="right:100px">PNetAmount</label>
                                                        <input type="text" id="pndpaidnetamt">
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-sm-6 col-md-6">
                                                    <div class="field-item">
                                                        <label for="">Balance</label>
                                                        <input type="text" id="pndBalance">

                                                    </div>
                                                </div>
                                            </div>
                                            <button class="bleu-btn" id="pndviewhide" style="background-color:#337ab7"><i class="fas fa-times"></i> Hide</button>
                                            @*<button class="bleu-btn" id="pndviewhide"><i class="fas fa-plus"></i>Hide</button>*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">

                            @*<button class="bleu-btn" id="pndnew"><i class="fas fa-plus"></i> New</button>*@

                            <button class="bleu-btn" id="pndprint"><i class="fas fa-print"></i> Print</button>
                            <button class="bleu-btn" id="pndexit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="pendsave"><i class="fas fa-save"></i> Save</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="BillwiseCollectionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true" style="height: auto;">
                <div class="modal-dialog modal-popup billwise-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Bill Wise Collection</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closebill" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-bg-div">
                                <div class="row">
                                    <div class="col-lg-6" style="height:20px">
                                        <ul class="billwise-radio">
                                            <li>
                                                <input type="radio" name="" id="billwiseLab" checked>
                                                <label for="">Lab Collection</label>
                                            </li>

                                        </ul>

                                    </div>


                                    <div class="col-lg-6" style="height:40px">
                                        <ul class="billwise-radio twocol-list">
                                            <li>
                                                <input type="radio" name="" id="Cashotp">
                                                <label for="">Cash</label>
                                            </li>
                                            <li>
                                                <input type="radio" name="" id="Cheqotp">
                                                <label for="">Cheque</label>
                                            </li>
                                        </ul>

                                    </div>
                                    <div class="col-lg-2" id="chqdivv">
                                        <div class="field-item">
                                            <label for="" id="txtbank" style="left:10px">Bank</label>
                                            <input type="text" id="txtbankname" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px;left:10px" readonly />

                                            <input type="text" id="bankid" style="display:none" />
                                            <button class="searchbtn" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" id="billwisesrchbank" style="display:none"><i class="fas fa-search"></i></button>

                                        </div>
                                    </div>
                                    <div class="col-lg-2.5" id="chqdivv1">
                                        <div class="field-item" style="left:50px">
                                            <label for="" style="left:20px" id="txtchq">Chq.No</label>
                                            <input type="text" id="txtchqno" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" />

                                        </div>
                                    </div>
                                    <div class="col-lg-2.5" id="chqdivv2">
                                        <div class="field-item" style="left:60px">
                                            <label for="" id="">Chq.Date</label>
                                            <input type="text" id="chqDate1" value="@ViewBag.cashcurdate" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" />

                                        </div>
                                    </div>
                                    <div class="col-lg-2.5" id="chqdivv3">
                                        <div class="field-item" style="left:70px">
                                            <label for="">Narration</label>
                                            <input type="text" id="narrtxt" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:170px" />

                                        </div>
                                    </div>
                                    <div class="col-lg-2" id="chqdivv4">
                                        <div class="field-item">
                                            <label for="">TDS Amount</label>
                                            <input type="text" id="tdsamount" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" />

                                            <input type="text" id="tdsid" style="display:none">

                                        </div>
                                    </div>
                                    <div class="col-lg-4" id="chqdivv5">
                                        <div class="field-item" style="left:60px">
                                            <label for="">Bank Amount</label>
                                            <input type="text" id="bankamount" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" readonly />

                                        </div>
                                    </div>
                                    <div class="col-lg-6 ">
                                        <div class="field-item">
                                            <label for=""> From Date</label>
                                            <input type="text" id="fromdate" value="@ViewBag.cashcurdate" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 upto-checkbox">
                                        <div class="field-item">
                                            <input type="checkbox" id="otpUpto">
                                            <label for=""> Up To</label>
                                            <input type="text" id="uptobillwise1" value="@ViewBag.cashcurdate" readonly>
                                        </div>
                                    </div>

                                    <div class="col-lg-6">
                                        <div class="field-item">

                                            <label for="">Date</label>
                                            <input type="text" value="@ViewBag.cashcurdate" id="datebillwise" readonly>
                                        </div>

                                    </div>

                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <label for="">Corporate</label>
                                            <input type="text" id="Corptxt" readonly>
                                            <input type="text" id="Corpid" style="display:none">
                                            <input type="text" id="Corphone" style="display:none">
                                            <button class="searchbtn" id="srchCorp" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false"><i class="fas fa-search"></i></button>
                                        </div>
                                    </div>
                                    <div class="col-lg-8">
                                        <div class="field-item">
                                            <label for="">Amount</label>
                                            <input type="text" id="Amounttxt" style="width:400px">
                                            <button class="autoallocate-btn" id="Autobtn">Auto Allocate</button>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <ul class="billwise-radio">
                                            <li>
                                                <input type="checkbox" name="" id="chkselectall">
                                                <label for="">Select All</label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div id="table-scroll" class="table-scroll table-responsive ">
                                    <table id="maintablebillwise2" class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th scope="col" style="width:40px">Slno</th>
                                                <th scope="col" style="width:55px">Lab No</th>
                                                <th scope="col">Date</th>
                                                <th scope="col" style="width:50px">Select</th>
                                                <th scope="col">Patient</th>
                                                <th scope="col" style="width:90px">Amount</th>
                                                <th scope="col" style="width:70px">Balance</th>
                                                <th scope="col" style="width:150px">Allocated Amount</th>
                                                <th scope="col">Current Balance</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr></tr>


                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td style="width:30px;"></td>
                                                <td style="width:30px"></td>
                                                <td style="width:30px"></td>
                                                <td style="width:30px"></td>
                                                <td style="width:30px;font-size:14px">Total</td>
                                                <td style="width:30px;font-size:14px"></td>
                                                <td style="width:30px;font-size:14px"></td>
                                                <td style="width:30px;font-size:14px"></td>
                                                <td style="width:30px;font-size:14px"></td>

                                            </tr>
                                        </tfoot>
                                    </table>

                                </div>
                                @*<div style="position: absolute;left: 470px;">
                                @*<div class="col-lg-4">*@
                                @*<label>Total</label>
                                    <input type="text" id="total" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" readonly />
                                    <input type="text" id="baltotal" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" readonly />
                                    <input type="text" id="allowtotal" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" readonly />
                                    <input type="text" id="curnttotal" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" readonly />
                                </div>*@
                                <label id="selectbillab" style="color:blue;left:100px"></label>
                            </div>
                            @*</div>*@
                        </div>
                        <div class="modal-footer">
                            <label id="billlabsum" style="color:blue"></label>

                        </div>

                        <div class="modal-footer">

                            <button class="bleu-btn" id="BillWifetch"><i class="fas fa-search"></i> Fetch</button>
                            <button class="bleu-btn" id="BillWiPrint"><i class="fas fa-print"></i> Print</button>
                            <button class="bleu-btn" id="BillWiNew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="BillwisExit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="BillwiSave"><i class="fas fa-save"></i> Save</button>
                        </div>
                    </div>
                </div>
            </div>
            @*<div class="wrapper">
            <div class="content-wrapper" style="margin-bottom: 42px;">*@
            <div class="modal fade " id="BillwiseCollectionAreaModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true" style="height: auto;">
                <div class="scrolldivs">
                    <div class="modal-dialog modal-popup billwise-popup  " role="document">
                        <div class="modal-content  ">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Bill Wise Collection -Area</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="closebillwise" style="background-color:#428bca" >
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="form-bg-div">
                                    <div class="row">
                                        <div class="col-lg-6" style="height:20px">
                                            <ul class="billwise-radio">
                                                <li>
                                                    <input type="radio" name="" id="LabcollectionRadio" checked>
                                                    <label for="">Lab Collection</label>
                                                </li>
                                            </ul>

                                        </div>
                                        <div class="col-lg-6" style="height:40px">
                                            <ul class="billwise-radio twocol-list">
                                                <li>
                                                    <input type="radio" name="" id="Cashradio">
                                                    <label for="">Cash</label>
                                                </li>
                                                <li>
                                                    <input type="radio" name="" id="Chequeradio">
                                                    <label for="">Cheque</label>
                                                </li>
                                            </ul>

                                        </div>

                                        <div class="col-lg-2.5" id="chqdiv" style="right:20px">
                                            <div class="field-item">
                                                @*<ul class="billwise-radio twocol-list">
                                            <li>*@
                                                <label for="" id="txtbank" style="left:11px">Bank</label>
                                                <input type="text" id="bankname" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px;margin-left:8px" readonly />

                                                <input type="text" id="banknameid" style="display:none" />
                                                <button class="searchbtn" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" id="billwisesrchbank" style="display:none"><i class="fas fa-search"></i></button>

                                            </div>
                                        </div>
                                        <div class="col-lg-2.5" id="chqdiv1">
                                            <div class="field-item">
                                                <label for="" id="txtchq" style="left:30px">Chq.No</label>

                                                <input type="text" id="chqno" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" />
                                            </div>
                                        </div>
                                        <div class="col-lg-2.5" id="chqdiv2">
                                            @*<div class="col-lg-4" id="chqdiv">*@

                                            <div class="field-item">
                                                <label for="" style="left:30px">Chq.Date</label>
                                                <input type="text" id="chqDate" value="@ViewBag.cashcurdate" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" />
                                            </div>
                                        </div>
                                        <div class="col-lg-2.5" id="chqdiv3">
                                            <div class="field-item">
                                                <label for="" style="left:30px">Narration</label>
                                                <input type="text" id="narration" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:185px" />
                                            </div>
                                        </div>






                                        <div class="col-lg-6 upto-checkbox ">
                                            <div class="field-item">

                                                <input type="checkbox" id="Uptobillwise">
                                                <label for=""> Up To</label>
                                                <input type="text" id="uptodate" value="@ViewBag.cashcurdate" style="width:200px" readonly>
                                            </div>
                                        </div>

                                        <div class="col-lg-6">
                                            <div class="field-item">
                                                <label for="">Date</label>
                                                <input type="text" value="@ViewBag.cashcurdate" id="curntdate" readonly>
                                            </div>

                                        </div>
                                        <div class="col-lg-6">
                                            <div class="field-item">
                                                <select id="selectbillMode">
                                                    <option selected disabled></option>
                                                    <option></option>
                                                    <option value="1" id="account">Daily</option>
                                                    <option value="2" id="code">Monthly</option>
                                                </select>
                                                <label for="">Mode</label>
                                                @*<input type="text">*@
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="field-item">
                                                <label for="">Area</label>
                                                <input type="text" id="Billwisearea" readonly>
                                                <input type="text" id="Billwiseareaid" style="display:none">
                                                <button class="searchbtn" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" id="billwisesrcharea"><i class="fas fa-search"></i></button>
                                            </div>
                                        </div>
                                        <div class="col-lg-12">
                                            <div class="field-item">
                                                <label for="">Corporate</label>
                                                <input type="text" id="BillwiseCorp" readonly>
                                                <input type="text" id="BillwiseCorpid" style="display:none">
                                                <button class="searchbtn" id="srchBillwiseCorp" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false"><i class="fas fa-search"></i></button>
                                            </div>
                                        </div>
                                        <div class="col-lg-8">
                                            <div class="field-item">
                                                <label for="">Amount</label>
                                                <input type="text" id="AmountBillwise" style="width:400px">
                                                <button class="autoallocate-btn" id="AutoAllocatebtn">Auto Allocate</button>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <ul class="billwise-radio">
                                                <li>
                                                    <input type="checkbox" name="" id="selectallbillwise">
                                                    <label for="">Select All</label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div id="table-scroll" class="table-scroll table-responsive ">
                                        <table id="maintablebillwise" class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th scope="col" style="width:20px">Slno</th>
                                                    <th scope="col" style="width:25px">Lab No</th>
                                                    <th scope="col" style="width:25px">Date</th>
                                                    <th scope="col" style="width:20px">Select</th>
                                                    <th scope="col" style="width:30px">Patient</th>
                                                    <th scope="col" style="width:50px">Corporate Name</th>
                                                    <th scope="col" style="width:27px">Amount</th>
                                                    <th scope="col" style="width:30px">Balance</th>
                                                    <th scope="col" style="width:47px">Allocated Amount</th>
                                                    <th scope="col" style="width:42px">Current Balance</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr></tr>


                                            </tbody>

                                            <tfoot>
                                                <tr>
                                                    <td style="width:30px;"></td>
                                                    <td style="width:30px;font-size:16px"></td>
                                                    <td style="width:30px;font-size:16px"></td>
                                                    <td style="width:30px"></td>
                                                    <td style="width:30px"></td>
                                                    <td style="width:30px;font-size:14px">Total</td>
                                                    <td style="width:30px;font-size:14px"></td>
                                                    <td style="width:30px;font-size:14px"></td>
                                                    <td style="width:30px;font-size:14px"></td>
                                                    <td style="width:30px;font-size:14px"></td>
                                                </tr>
                                            </tfoot>

                                        </table>

                                    </div>
                                    <div style="position: absolute;left: 470px;">
                                        @*<div class="col-lg-4">*@
                                        @*<label>Total</label>
                                    <input type="text" id="invtotal" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" readonly />
                                    <input type="text" id="invbaltotal" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" readonly />
                                    <input type="text" id="invallowtotal" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" readonly />
                                    <input type="text" id="invcurnttotal" style="border:1px solid #8d9cad;font-size: 13px;height: 26px;border-radius: 3px;width:100px" readonly />*@
                                    </div>
                                    <label id="selectbill" style="color:blue;left:100px"></label>
                                </div>
                                @*</div>*@
                            </div>
                            <div class="modal-footer">
                                <label id="labsum" style="color:blue"></label>

                            </div>

                            <div class="modal-footer">

                                <button class="bleu-btn" id="BillWisesrchs"><i class="fas fa-search"></i> Fetch</button>
                                <button class="bleu-btn" id="BillWisePrint"><i class="fas fa-print"></i> Print</button>
                                <button class="bleu-btn" id="BillWiseNewone"><i class="fas fa-plus"></i> New</button>
                                <button class="bleu-btn" id="BillwiseExit"><i class="fas fa-times"></i> Exit</button>
                                <button class="submit-btn" id="BillwiseSave"><i class="fas fa-save"></i> Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @*</div>
            </div>*@



            
<div class="modal fade" id="UserPrivillageModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
  
    <div class="modal-dialog modal-popup billwise-popup" role="document">
        <div class="modal-content">
            <div id="spinner-div1" class="pt-5">
                <div class="spinner-border text-primary" role="status">
                </div>
            </div>
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">User Settings</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"  id="previlageclose" style="background-color:#428bca">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                
                <div class="form-bg-div">
                    <div class="row mb-2">
                       
                        <div class="col-lg-5 col-md-5">
                            <div class="field-item dispatchmode-item">
                                <label for="">User Name:</label>
                                <input type="text" id="PriUsrName" style="width:250px">
                                <input type="text" id="PriUsrNameid" style="display:none">
                                <button id="btnusrname" style="display:none"></button>
                              
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <ul class="billwise-radio twocol-list">
                                <li>
                                    <input type="radio" name="" id="RdopriNone">
                                    <label for="">None</label>
                                </li>
                                <li>
                                    <input type="radio" name="" id="RdopriAdmin">
                                    <label for="">Administrator(All)</label>
                                </li>
                                
                            </ul>
                        </div>
                        <div class="col-lg-3">
                            <ul class="billwise-radio twocol-list">
                                <li>
                                    <input type="radio" name="" id="RdopriSpr">
                                    <label for="">Superviser</label>
                                </li>
                                <li>
                                    <input type="radio" name="" id="RdopriStaff">
                                    <label for="">Staff</label>
                                </li>
                            </ul>
                        </div>
                    </div>



                    <div id="table-scroll" class="table-scroll table-responsive" style="width:700px; margin-right:700px;background-color:white">
                        <table id="userListtb" class="table table-bordered" style="border-collapse: collapse; border: none;">
                            <thead>
                                <tr>
                                    <th scope="col" style="width:50px">Main Menu</th>
                                    <th scope="col" style="width:50px">Sub Menu</th>
                                    <th scope="col" style="width:20px">Select</th>
                                   
                                </tr>
                            </thead>
                            <tbody >
                                <tr style="border: none;">
                                   

                                        </tbody>

                                    </table>
                                </div>




                            </div>
                        </div>
           
                <div class="modal-footer">
                    <button class="submit-btn"  id="UsrpriReset"style="margin-right:500px">Reset Menu</button>
                    <button class="bleu-btn" id="UsrpriPrint"><i class="fas fa-save"></i> Print</button>
                    <button class="bleu-btn" id="UsrpriNew"><i class="fas fa-plus"></i> New</button>
                    <button class="bleu-btn" id="UsrpriExit"><i class="fas fa-times"></i> Exit</button>
                    <button class="submit-btn" id="UsrpriSave"><i class="fas fa-save"></i> Save</button>
                </div>
            </div>
                </div>
            </div>

<div class="modal fade" id="SetTestOrderModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-popup billwise-popup" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Set Test Order</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="settestclose"  style="background-color:#428bca">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-bg-div">
                    <div class="row mb-2">
                        <div class="col-lg-4">
                            <ul class="billwise-radio twocol-list">
                                <li>
                                    <input type="radio" name="" id="optSetOrder">
                                    <label for="">Set Order Wise</label>
                                </li>
                                <li>
                                    <input type="radio" name="" id="optTestName">
                                    <label for="">Test Name Wise</label>
                                </li>
                            </ul>
                        </div>
                        <div class="col-lg-5 col-md-6">
                            <div class="field-item dispatchmode-item">
                                <label for="">Department</label>
                                <input type="text" id="txtdepartment" readonly>
                                <input type="text" id="txtdepartmentid" style="display:none">
                                <button id="btndepartment"data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" ><i class="fas fa-ellipsis-h"></i></button>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="field-item pl-0">
                                <select id="selectTestOption">
                                    <option value=""><--All--></option>
                                    <option value="">Prized Tests</option>
                                    <option value="">Non Prized Tests</option>
                                </select>
                            </div>
                        </div>
                    </div>



                    <div id="table-scroll2" class="table-scroll table-responsive" tabindex="0">
                        <table id="TestOrdertb" class="table table-bordered">
                            <thead>
                                <tr>
                                    <th scope="col">Slno</th>
                                    <th scope="col">Test Name</th>
                                    <th scope="col">Amount</th>
                                    <th scope="col">Set Order</th>
                                    <td style="display:none"><button id="srchtestname" class="searchbtn" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" type="button" style="display:none"></button></td>
                                </tr>
                            </thead>
                            <tbody>
                                @*<tr>
                                    <td>1</td>
                                    <td>12345</td>
                                    <td>12-12-1990</td>
                                                <td>asdfgh</td>
                                            </tr>*@


                                        </tbody>

                                    </table>
                                </div>




                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn" id="TestOrderNew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="TestOrderExit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="TestOrderSave"><i class="fas fa-save"></i> Save</button>
                        </div>
                    </div>
                </div>
            </div>


            <div class="modal fade" id="ChequeTransactionModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup billwise-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cheque Transaction</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="chqtransclose" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div id="spinner-divchqTr">
                                <div class="spinner-border text-primary" role="status">
                                </div>
                            </div>
                            <div class="form-bg-div">
                                <div class="row mb-2">
                                    <div class="col-lg-4">
                                        <ul class="billwise-radio twocol-list">
                                            <li>
                                                <input type="radio" name="" id="optChqTrParty">
                                                <label for="">Party</label>
                                            </li>
                                            <li>
                                                <input type="radio" name="" id="optChqTrBank">
                                                <label for="">Bank</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-lg-5 col-md-6" style="right:100px">
                                        <div class="field-item dispatchmode-item">
                                           
                                            <input type="text" id="txtbankparty" style="width:300px" readonly>
                                            <input type="text" id="txtbankpartyid" style="display:none">
                                            <button id="btnparty" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" style="display:none"><i class="fas fa-ellipsis-h"></i></button>
                                            <button id="btnbank" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" style="display:none"><i class="fas fa-ellipsis-h"></i></button>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-6">
                                        <div class="field-item pl-0">
                                            <button class="bleu-btn" id="ChqTrPrint"><i class="fas fa-print"></i> Print</button>
                                            <button class="bleu-btn" id="ChqTrExt"><i class="fas fa-times"></i> Exit</button>
                                            <button class="bleu-btn" id="dsplyChqRec"data-toggle="modal" data-target="#ChequeRecModal" data-backdrop="static" data-keyboard="false" style="display:none"></button>
</div>
                                    </div>
                                </div>



                                <div id="table-scroll" class="table-scroll table-responsive" tabindex="0">
                                    <table id="ChqTrTb" class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th scope="col" style="width:5px">SlNo</th>
                                                <th scope="col"style="width:30px">Name</th>
                                                <th scope="col" style="width:30px">Bank</th>
                                                <th scope="col" style="width:30px">Entry Date</th>
                                                <th scope="col"style="width:30px">Narration</th>
                                                <th scope="col" style="width:30px">Chq.No</th>
                                                <th scope="col"style="width:35px">Cheque Date</th>
                                                <th scope="col"style="width:25px">Payment</th>
                                                <th scope="col"style="width:25px">Receipts</th>
                                                <th scope="col"style="width:20px">Type</th>
                                                <th scope="col"style="width:20px">Pass</th>
                                                @*<td style="display:none"><button id="srchtestname" class="searchbtn" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" type="button" style="display:none"></button></td>*@
                                            </tr>
                                        </thead>
                                        <tbody>
                                         
                                        </tbody>

                                    </table>
                                </div>




                            </div>
                        </div>
                        <div class="modal-footer" style="height:50px">
                           
                        </div>
                    </div>
                </div>
            </div>


            <div class="modal fade" id="DayBookEntryModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup billwise-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Day Book Entry</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="Dbookclose" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div id="spinner-div">
                                <div class="spinner-border text-primary" role="status">
                                </div>
                            </div>
                            <div class="form-bg-div">
                                <div class="row mb-2">
                                    <div class="field-item col-lg-4"style="left:8px">
                                        <label>TransNo</label>
                                        <input type="text" id="DbTrasno">
                                        <input type="text" id="DbTrasnoid" style="display:none">
                                      
                                    </div>
                                   
                                   
                                       
                                        <div class="field-item col-lg-4" style="left:350px">
                                            <label>Date</label>
                                            <input type="text" id="Dbdate" style="width:150px" value="@ViewBag.cashcurdate" readonly>
                                        
                                    </div>
                                </div>



                                <div id="table-scroll" class="table-scroll table-responsive" tabindex="0">
                                    <table id="Dbooktb" class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th scope="col" style="width:20px">SlNo</th>
                                                <th scope="col" style="width:50px" id="DbacHead" list="AccountHeadlist">A/C Head</th>
                                                <th scope="col" style="width:80px">Narration</th>
                                                <th scope="col"style="width:40px">Income</th>
                                                <th scope="col" style="width:40px">Expense</th>
                                                <th scope="col" style="width:40px">Cur.Balance</th>
                                                
                                                @*<td style="display:none"><button id="srchtestname" class="searchbtn" data-toggle="modal" data-target="#searchlookup" data-backdrop="static" data-keyboard="false" type="button" style="display:none"></button></td>*@
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="height:30px"></td>
                                                <td style="height:30px" contenteditable='true' ></td>
                                                <td style="height:30px" contenteditable='true'></td>
                                                <td style="height:30px" contenteditable='true'></td>
                                                <td style="height:30px" contenteditable='true'></td>
                                                <td style="height:30px"></td>

                                            </tr>
                                           
                                            
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td style="height:30px"></td>
                                                <td style="height:30px" ></td>
                                                <td style="height:30px">Total</td>
                                                <td style="height:30px"></td>
                                                <td style="height:30px"></td>
                                                <td style="height:30px"></td>
                                            </tr>
                                        </tfoot>

                                    </table>
                                </div>
                                <div class="field-item col-lg-4">
                                    <label>User Info</label>
                                    <input type="text" id="Dbusrinfo" />
                                </div>



                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn" id="Dbnew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="Dbdelete"><i class="far fa-trash-alt"></i> Delete</button>
                            <button class="bleu-btn" id="Dbexit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="Dbsave"><i class="fas fa-save"></i> Save</button>

                        </div>
                    </div>
                </div>
            </div>









            @*</div>*@
            <div class="modal fade" id="ReportDispachingModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Report Dispatching</h5>
                            <label id="lablreportpending" style="color:red">Pending</label>
                            <input type="text" id="reportPending" style="color:red" />
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="reportdispatchclose" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-bg-div">
                                <div class="row">
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Entry No</label>
                                            <input type="text" id="ReportdisEntryNo" value="@ViewBag.ReportDispatchkey" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Patient Name</label>
                                            <input type="text" id="ReportdisPname" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Server</label>
                                            <select name="" id="ServerSelect" disabled>
                                                @*<option value="" selected disabled></option>*@
                                                @*<option value="">Counter</option>*@
                                                <option value="">Branch</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item nopadding-col-6">
                                            <label for="">Date Time</label>
                                            <div class="row">
                                                <div class="col-6"><input type="text" id="ReportDisDate" value="@ViewBag.reportdate" readonly></div>
                                                <div class="col-6"><input type="text" id="ReportDisTime" readonly></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">LabNo</label>
                                            <input type="text" id="ReportDisLabno">
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item nopadding-col-6">
                                            <label for="">Age</label>
                                            <div class="row">
                                                <div class="col-6"><input type="text" id="AgeDD" style="width:40px" placeholder="DD" readonly></div>
                                                <div class="col-6">
                                                    <input type="text" id="AgeMM" style="width:40px" placeholder="MM" readonly>
                                                    <input type="text" id="AgeYY" style="width:40px" placeholder="YY" readonly>
                                                    @*<select name="" id="">
                                                        <option value="">Year</option>
                                                        <option value="">Month</option>
                                                    </select>*@
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">IP/OP</label>
                                            <input type="text" id="ReportDisipop" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Branch Name</label>
                                            <input type="text" id="BranchName" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Reference By</label>
                                            <input type="text" id="RefBy" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Email</label>
                                            <input type="email" id="ReportDisEmail" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Sample On</label>
                                            <input type="text" id="Sampleon" value="@ViewBag.reportdate" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for="">Report On</label>
                                            <input type="text" id="Reporton" value="@ViewBag.reportdate" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="field-item">
                                            <label for="">Reporting Mode</label>
                                            <ul class="address-dis-list">
                                                <li>
                                                    <label for="male">
                                                        <input type="checkbox" name="a" id="chkPersonallys" readonly disabled>
                                                        Personally
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="female">
                                                        <input type="checkbox" name="a" id="chkTelephones" readonly disabled>
                                                        Telephone
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="male">
                                                        <input type="checkbox" name="a" id="checkCouriers" readonly disabled>
                                                        Courier
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="female">
                                                        <input type="checkbox" name="a" id="chkEmails" readonly disabled>
                                                        Email
                                                    </label>
                                                </li>
                                                <li>
                                                    <label for="female">
                                                        <input type="checkbox" name="a" id="chksmss" readonly disabled>
                                                        SMS
                                                    </label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item">
                                            <label for=""></label>
                                            <input type="text" id="RepMode" readonly>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item dispatchmode-item">
                                            <label for="">Dispatch Mode</label>
                                            <select id="DispatchMode">
                                                <option value="" selected disabled></option>
                                                <option value="">Phone</option>
                                                <option value="">ByHand</option>
                                                <option value="">Email</option>
                                                <option value="">Courier</option>
                                                <option value="">Through Branch</option>
                                            </select>
                                            @*<button><i class="fas fa-plus"></i></button>*@
                                        </div>
                                    </div>
                                    <div class="col-lg-12 dispatch-through-table">
                                        <label for="">Dispatched Through</label>
                                        <div class="table-responsive firstauth-table">
                                            <table class="table table-bordered" id="Dispatchtable">
                                                <thead>
                                                    <tr>
                                                        <th scope="col" style="width:100px">S.N</th>
                                                        <th scope="col" style="width:100px">Select</th>
                                                        <th scope="col" style="width:100px">Person</th>
                                                        @*<th scope="col">Phone</th>*@
                                                        <th scope="col" style="width:180px">Dispatch Mode</th>
                                                        <th scope="col" style="width:100px">User Info</th>
                                                        <th scope="col" style="width:70px"></th>
                                                    </tr>
                                                </thead>

                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item note-fullwidth">
                                            <label for="">Registeration Note</label>
                                            <textarea name="" id="RegNote" cols="30" rows="10" readonly></textarea>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-sm-6 col-md-6">
                                        <div class="field-item note-fullwidth">
                                            <label for="">Note</label>
                                            <textarea name="" id="Note" cols="30" rows="10"></textarea>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="bleu-btn" id="ReportDisNew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="ReportDisDelete"><i class="far fa-trash-alt"></i> Delete</button>
                            <button class="bleu-btn" id="ReportDisExit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="ReportDisSave"><i class="fas fa-save"></i> Save</button>
                        </div>
                    </div>
                </div>
            </div>









            <div class="modal fade" id="CashClosingModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-popup modal-large" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cash Closing</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="cashclose" style="background-color:#428bca">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" style="height:590px" id="loaddiv">
                            <div class="form-bg-div cashclosing-page">
                                <div class="row authorization-header">
                                    <div class="col-lg-7 col-md-6 col-sm-6 cashclosing-padding pr-lg-5">
                                        <h6>Transaction Details</h6>
                                        <div class="col-lg-12 col-6">
                                            <div class="field-item">
                                                @*<button id="setbtn" style="height:20px;background-color:dodgerblue">Set value</button>*@

                                            </div>

                                        </div>

                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Collection 1</label>
                                                            <input type="text" id="txtcoll1" onkeyup="collsum();" style="text-align: right">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Collection 2</label>
                                                            <input type="text" id="txtcoll2" onkeyup="collsum();" style="text-align: right">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Payments</label>
                                                            <input type="text" id="txtpayment" onkeyup="collsum();" style="text-align: right">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Receipts</label>
                                                            <input type="text" id="txtrecp" onkeyup="collsum();" style="text-align: right">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Office Amount</label>
                                                            <input type="text" id="txtofficeamt" onkeyup="collsum();" style="text-align: right">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Total</label>
                                                            <input type="text" id="txttotal" readonly style="text-align: right">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Date</label>
                                                            <input type="text" id="cashclosingdate" value="@ViewBag.cashcurdate" readonly style="text-align: right">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Time</label>
                                                            <input type="text" id="cashtime" name="" style="text-align: right" readonly>
                                                            <input type="text" id="txtid" name="" style="display:none">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">User Info</label>
                                                            <input type="text" id="userinfo" readonly>
                                                            <input type="text" id="txtid" style="display:none">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item rportrequested">
                                                            <ul class="address-dis-list">
                                                                <li>
                                                                    <label for="male">
                                                                        <input type="checkbox" name="a"
                                                                               id="printclosing">
                                                                        Print all Closing
                                                                    </label>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <h6 class="mt-4">Denomination Details</h6>
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="row">
                                                    <div class="col-lg-12 col-6">
                                                        <div class="field-item">
                                                            <label for="">2000 x</label>
                                                            <input type="text" id="txt2000" style="width:130px;text-align: right" onkeyup="sum();">
                                                            <label for="" id="total2000" style="width:30px;color:blue;position: relative; left:10px"></label>

                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-6">
                                                        <div class="field-item">
                                                            <label for="">1000 x</label>
                                                            <input type="text" id="txt1000" style="width:130px;text-align: right" onkeyup="sum();">
                                                            <label for="" id="total1000" style="width:30px;color:blue;position: relative; left:10px"></label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-6">
                                                        <div class="field-item">
                                                            <label for="">500 x</label>
                                                            <input type="text" id="txt500" style="width:130px;text-align: right" onkeyup="sum();">
                                                            <label for="" id="total500" style="width:30px;color:blue;position: relative; left:10px"></label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-6">
                                                        <div class="field-item">
                                                            <label for="">200 x</label>

                                                            <input type="text" id="txt200" style="width:130px;text-align: right" onkeyup="sum();">
                                                            <label for="" id="total200" style="width:30px;color:blue; position: relative; left:10px"></label>

                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-6">
                                                        <div class="field-item">
                                                            <label for="">100 x</label>
                                                            <input type="text" id="txt100" style="width:130px;text-align: right" onkeyup="sum();">
                                                            <label for="" id="total100" style="width:30px;color:blue;position: relative; left:10px"></label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-6">
                                                        <div class="field-item">
                                                            <label for="">50 x</label>
                                                            <input type="text" id="txt50" style="width:130px;text-align: right" onkeyup="sum();">
                                                            <label for="" id="total50" style="width:30px;color:blue;position: relative; left:10px"></label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-6">
                                                        <div class="field-item">
                                                            <label for="">20 x</label>
                                                            <input type="text" id="txt20" style="width:130px;text-align: right" onkeyup="sum();">
                                                            <label for="" id="total20" style="width:30px;color:blue;position: relative; left:10px"></label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-6">
                                                        <div class="field-item">
                                                            <label for="">10 x</label>
                                                            <input type="text" id="txt10" style="width:130px;text-align: right" onkeyup="sum();">
                                                            <label for="" id="total10" style="width:30px;color:blue;position: relative; left:10px"></label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-6">
                                                        <div class="field-item">
                                                            <label for="">5 x</label>
                                                            <input type="text" id="txt5" style="width:130px;text-align: right" onkeyup="sum();">
                                                            <label for="" id="total5" style="width:30px;color:blue;position: relative; left:10px"></label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12 col-6">
                                                        <div class="field-item">
                                                            <label for="">Coins</label>
                                                            <input type="text" id="txtcoin" style="width:130px;text-align: right" onkeyup="sum();">
                                                            <label for="" id="totalCoins" style="width:30px;color:blue;position: relative; left:10px"></label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Total</label>
                                                            <input type="text" id="txttotals" style="width:130px;text-align: right" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">To Office</label>
                                                            <input type="text" id="txtoffice" style="text-align: right">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Balance</label>
                                                            <input type="text" id="txtbalance" style="text-align: right">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Excess Amount</label>
                                                            <input type="text" id="txtexcessamt" style="text-align: right">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Short Amount</label>
                                                            <input type="text" id="txtshortamt" style="text-align: right">
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="field-item">
                                                            <label for="">Note</label>
                                                            <textarea name="" id="txtNote" cols="30" rows="10"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-5 col-md-6 col-sm-6">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <div class="field-item rportrequested">
                                                    <ul class="address-dis-list">
                                                        <li>
                                                            <label for="male">
                                                                <input type="checkbox" name="a" id="cashUsrWise">
                                                                User Wise
                                                            </label>
                                                        </li>
                                                        <li>
                                                            <label for="" id="allusrlabel">
                                                                <input type="radio" name="a"
                                                                       id="cashAlluser">
                                                                All User
                                                            </label>
                                                        </li>
                                                        <li>
                                                            <label for="" id="cashLoguserid">
                                                                <input type="radio" name="a" id="cashLoguser">
                                                                Logined User
                                                            </label>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="col-lg-9 col-9"><input type="text" id="fetchtxt"></div>
                                            <div class="col-lg-3 col-3"><button id="fetchbtn">Featch</button></div>
                                        </div>
                                        <h6 class="mt-3" id="invoicehead">Invoice Details</h6>
                                        <div class="table-responsive firstauth-table" style="height:80px" id="invoicediv">
                                            <table class="table table-bordered" id="transtb">
                                                <thead>
                                                    <tr>
                                                        <th scope="col" style="width:20px">S.N</th>
                                                        <th scope="col" style="width:50px">Trans No</th>
                                                        <th scope="col" style="width:50px">Name</th>
                                                        <th scope="col" style="width:50px">Coll. Amount</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    @*<tr>
                                                        <td>123</td>
                                                        <td>16</td>
                                                        <td>s</td>
                                                        <td>d</td>
                                                    </tr>*@

                                                </tbody>
                                            </table>
                                        </div>

                                        <h6 class="mt-3" id="pndhead">Pending Collection</h6>
                                        <div class="table-responsive firstauth-table" id="penddiv" style="height:80px">
                                            <table class="table table-bordered" id="pendingtb">
                                                <thead>
                                                    <tr>
                                                        <th scope="col" style="width:20px">S.N</th>
                                                        <th scope="col" style="width:50px">Trans No</th>
                                                        <th scope="col" style="width:50px">Name</th>
                                                        <th scope="col" style="width:50px">Coll. Amount</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    @*<tr>
                                                        <td>123</td>
                                                        <td>16</td>
                                                        <td>s</td>
                                                        <td>d</td>
                                                    </tr>*@

                                                </tbody>
                                            </table>
                                        </div>

                                        <h6 class="mt-3" id="paymenthead">Payment Details</h6>
                                        <div class="table-responsive firstauth-table" style="height:80px" id="paymentdiv">
                                            <table class="table table-bordered" id="paymenttb">
                                                <thead>
                                                    <tr>
                                                        <th scope="col" style="width:20px">S.N</th>
                                                        <th scope="col" style="width:50px">Trans No</th>
                                                        <th scope="col" style="width:50px">Name</th>
                                                        <th scope="col" style="width:50px">Coll. Amount</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    @*<tr>
                                                        <td>123</td>
                                                        <td>16</td>
                                                        <td>s</td>
                                                        <td>d</td>
                                                    </tr>*@

                                                </tbody>
                                            </table>
                                        </div>


                                        <h6 class="mt-3" id="receipthead">Receipt Details</h6>
                                        <div class="table-responsive firstauth-table" style="height:80px" id="reciptdiv">
                                            <table class="table table-bordered" id="receipttb">
                                                <thead>
                                                    <tr>
                                                        <th scope="col" style="width:20px">S.N</th>
                                                        <th scope="col" style="width:50px">Trans No</th>
                                                        <th scope="col" style="width:50px">Name</th>
                                                        <th scope="col" style="width:50px">Coll. Amount</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    @*<tr>
                                                        <td>123</td>
                                                        <td>16</td>
                                                        <td>s</td>
                                                        <td>d</td>
                                                    </tr>*@

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>





                            </div>
                        </div>



                        <div class="modal-footer">
                            <button id="setbtn" class="bleu-btn" style="width:100px;height:25px">Set value</button>
                            <button class="bleu-btn" id="cashclosingnew"><i class="fas fa-plus"></i> New</button>
                            <button class="bleu-btn" id="cashcloeprivious"><i class="fas fa-angle-left"></i>Previous</button>
                            <button class="bleu-btn" id="cashclosingnext"><i class="fas fa-angle-right"></i> Next</button>

                            <button class="bleu-btn" id="cashcloseprint"><i class="fas fa-print"></i> Print</button>
                            <button class="bleu-btn" id="cashcloseexit"><i class="fas fa-times"></i> Exit</button>
                            <button class="submit-btn" id="CashCloseSave"><i class="fas fa-save"></i> Save</button>
                        </div>
                    </div>
                </div>
            </div>



            @*</div>*@
            <div class="modal fade hidden" id="dailycollectionstmnt" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DailyClctnStmntPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="dailycollectionsmry" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DailyClctnSmryPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="dailycollectionsmry2" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DailyClctnSmry2Partial","LISFY")'> </div>
            <div class="modal fade hidden" id="collSmtBnchWise" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("CollSmtBnchPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="collSmryBnchWise" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("CollSmryBnchPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="dailycashInv" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DlyCashInvPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="patIDwiseColn" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("PatIDbillClnPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="mnthlyColSmry" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("MnthlyCollSmryPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="mnthlyColSmryDiv" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("MnthlyCollDivPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="mnthcolsmryBnch" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("MnthCollSmryBnchPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="usrWseColn" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("UsrWiseColPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="usrWseColnSmry" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("UsrWiseColSmryPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="patWiseInv" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("PatWiseInvPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="divWiseInv" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DivWiseInvPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="divWiseInv2" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DivWiseInv2Partial","LISFY")'> </div>
            <div class="modal fade hidden" id="divWiseSmry" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DivWiseSmryPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="usrTrckRpt" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("UsrTrckRptPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="bnchwiseInv" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("BnchWiseInvPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="discwiseInv" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DiscWiseInvPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="cncldInv" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("CancelledInvPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="dctrMtng" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DocMtngPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="dptWsInvce" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DptWiseInvPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="divWsPrfmnce" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DivWisePerfmncePartial","LISFY")'> </div>
            <div class="modal fade hidden" id="refundStmnt" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("RefndStmntPartial","LISFY")'> </div>
            <div class="modal fade hidden" id="dctrVisitLst" data-backdrop='static' data-keyboard='false' role="dialog" data-url='@Url.Action("DctrVisitLstPartial","LISFY")'> </div>
            @*///////////////////////////////////////////////daily periodic collection ststements//////////////////////////////////////////////////////*@
            @**********************************************************************************************************************@
            <footer class="main-footer footer-btns">
                <p><a href="https://iconinfoware.com/" target="_blank">Developed By Icon Infoware Technologies</a></p>
                @*<p><a href="https://iconinfoware.com/" target="_blank">Designed and Developed By Icon Infoware Technologies</a></p>*@
                <img src="@Url.Content("~/Content/logintemplate/img/lisfy.svg" )" class="lisfy-logo" alt="logo">
            </footer>
            <script src="@Url.Content("~/Content/logintemplate/dist/js/adminlte.min.js")"></script>

            @*</div>*@
        </div>
        </div>

}
<style>
    /*table{}
    td{width:1px;white-space:nowrap;}*/
    .table {
        font-family: 'Open Sans', sans-serif;
        /*font-family: Vardana;*/
        font-size: 15px;
        font-weight: normal;
        display: table;
        overflow: hidden;
        width: 400px;
        overflow-y: scroll;
        overflow: auto;
        table-layout: fixed;
        word-wrap: break-word;
        /*table-layout:fixed;*/
        /*height: 400px;*/
        /*display: block;*/
    }
    #spinner-div {
  position: fixed;
  display: none;
  width: 100%;
  height:100%;
  top: 0;
  left: 0;
  margin-left:5px;
  
  text-align: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 2;
}

     #spinner-divchqTr {
  position: fixed;
  display: none;
  width: 100%;
  height:100%;
  top: 0;
  left: 0;
  margin-left:5px;
  
  text-align: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 2;
}

     #spinner-div3 {
  position: fixed;
  display: none;
  width: 100%;
  height:100%;
  top: 0;
  left: 0;
  margin-left:5px;
  
  text-align: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 2;
}

    #spinner-div1 {
  position: fixed;
  display: none;
  width: 100%;
  height:100%;
  top: 0;
  left: 0;
  margin-left:5px;
  
  text-align: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 2;
}
    .pt-5{
        position: fixed;
  display: none;
  width: 100%;
  height:100%;
  top: 0;
  left: 0;
  margin-left:5px;
  
  text-align: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 2;
    }

    /*#spinner-border{
position: fixed;
  display: none;
  text-align:center;
    }*/




        /*tr .fa {
      margin-right: .5rem;
      opacity: 0;
      transition: opacity .2s ease-out;
      cursor: pointer;
      transition-delay: .5s;
    }
    tr:hover .fa {
      opacity: 1;
      transition-delay: 0s;
    }*/

        .table tr.first {
            background: #b6ff00;
        }

        .table th {
            border: 1px #a39485 solid;
            padding: 3px 7px 2px;
            background-color: #428bca;
            padding-top: 6px;
            color: white;
            padding-bottom: 12px;
            text-align: left;
        }



        .table td {
            border: 1px solid #C5C5C5;
            text-align: center;
            color: #000000;
            /*font-family: Vardana;*/
           text-align:left;
            font-size: 13.5px;
            /*width: 50px;*/
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            /*width:1px;
                white-space:nowrap;*/
            /*width: 100px;*/
        }

    /*.table td{
        display:inline-block;
        width: 50px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }*/
    /*.table td:hover{
        white-space:initial;
        cursor:pointer;
        width:100%;
    }*/
    /*table.display {
             margin: 0 auto;
              table-layout: fixed;
           word-wrap:break-word;
        }*/

    .highlight_file {
        background: #b6ff00;
    }
    .blue_highlight{
          background:#318ce7;
    }

    .active_file {
        background: #DB7093;
    }
    .orange_file{
        background:#C36900
    }

    .table-scroll {
        scrollbar-face-color: rgb(111, 143, 175);
        scrollbar-shadow-color: rgb(111, 143, 175);
        scrollbar-highlight-color: rgb(111, 143, 175);
        scrollbar-3dlight-color: rgb(111, 143, 175);
        scrollbar-darkshadow-color: rgb(111, 143, 175);
        scrollbar-track-color: rgb(111, 143, 175);
        scrollbar-arrow-color: rgb(111, 143, 175);
        /*position:fixed;*/
       
    }

        .table-scroll::-webkit-scrollbar {
            width: 18px;
            position:fixed;
            overflow:auto;

        }
    .test-table::-webkit-scrollbar {
         width: 12px;
    }

        .table-scroll::-webkit-scrollbar-track {
            -webkit-box-shadow: rgb(111, 143, 175);
            -webkit-border-radius: 10px;
            border-radius: 10px;
        }

        /* Handle */
        .table-scroll::-webkit-scrollbar-thumb {
            -webkit-border-radius: 10px;
            border-radius: 10px;
            background: rgb(111, 143, 175);
            -webkit-box-shadow: rgb(111, 143, 175);
        }

      
        /*.scrolldivs{
    overflow: hidden;
    overflow-y:scroll;
      /*overflow-y: scroll !important;*/
      /*max-height: 100px;*/
    /*}*/
        /*.scrolldivs::-webkit-scrollbar {
	width: 10px;*/
	/*height: 5px;*/
/*}*/
#table-scroll1 {
        scrollbar-face-color: rgb(111, 143, 175);
        scrollbar-shadow-color: rgb(111, 143, 175);
        scrollbar-highlight-color: rgb(111, 143, 175);
        scrollbar-3dlight-color: rgb(111, 143, 175);
        scrollbar-darkshadow-color: rgb(111, 143, 175);
        scrollbar-track-color: rgb(111, 143, 175);
        scrollbar-arrow-color: rgb(111, 143, 175);
        /*position:fixed;*/
       
    }

        #table-scroll1::-webkit-scrollbar {
            width: 18px;
            position:fixed;
        }
    

        #table-scroll1::-webkit-scrollbar-track {
            -webkit-box-shadow: rgb(111, 143, 175);
            -webkit-border-radius: 10px;
            border-radius: 10px;
        }

        /* Handle */
        #table-scroll1::-webkit-scrollbar-thumb {
            -webkit-border-radius: 10px;
            border-radius: 10px;
            background: rgb(111, 143, 175);
            -webkit-box-shadow: rgb(111, 143, 175);
        }

/*.scrolldivs::-webkit-scrollbar-track {
	border-radius: 0px;
}*/






/*.scrolldivs {
	position: relative;*/
	
	/*z-index: 1;*/
	/*margin: auto;
	overflow:scroll;*/
    /*overflow-x:hidden;
    overflow-y:auto;*/
	
/*}*/
        /*.fa-scroll{
          
  overflow-x:hidden;
  overflow-y:auto;
  min-height:500px;
  max-height:500px;
}*/
      
    /*::-webkit-scrollbar {
        width: 2em;
        height: 2em
    }*/
    /*.table-scroll {
      max-width: 200px;
    }*/
    /*.table-scroll {
            width:850px;
        }*/

    /*[contenteditable="true"]:focus {
           background-color: #b6ff00;
         }*/


    .highlight_filelookup {
        background: #428bca;
    }

    input[type="text"]:focus {
        background: #b6ff00;
    }

    input[type="number"]:focus {
        background: #b6ff00;
    }

    input[type="email"]:focus {
        background: #b6ff00;
    }

    input[type="password"]:focus {
        background: #b6ff00;
    }

    #ledgertb tbody tr.active {
        background: #b6ff00;
    }

    #getlookup tbody tr.active {
        background: #b6ff00;
    }

    #getlookup th {
        background: #428bca;
        color: #fff;
    }

    #getlookup td {
        border: 0.5px solid #428bca;
    }
    #userListtb{
        border:none;
    }

    tr.active {
        background: #b6ff00;
    }

    .modal {
        pointer-events: none;
    }

    input[type="checkbox"]:focus {
        background: #b6ff00;
    }

    .ui-autocomplete {
        z-index: 1050;
    }
    .table-responsive{
        overflow:auto;
    }
     .ui-autocomplete {
            height: 240px;
            width: 200px;
            overflow-y: scroll;
        }
</style>

@section Scripts{

    <script type="text/javascript" src="./js/jquery-1.4.4.js"></script>
    <script src="../Jquery/jquery.multiselect.js"></script>

    <script type="text/javascript" src="./js/jquery-1.4.4.js"></script>
    <script src="../Jquery/jquery.multiselect.js"></script>

    <script src="../Jquery/prettify.js"></script>
    <script src="~/Scripts/filtertable/jquery.filtertable.js"></script>
    <script src="~/Scripts/filtertable/jquery.filtertable.min.js"></script>
    <script src="~/Scripts/jquery.validate-vsdoc.js"></script>
    <script type="text/javascript" src="./js/jquery-1.4.4.js"></script>
    <script src="../Jquery/jquery.multiselect.js"></script>

    <script type="text/javascript" src="./js/jquery-1.4.4.js"></script>
    <script src="../Jquery/jquery.multiselect.js"></script>

    <script src="../Jquery/prettify.js"></script>
    <script src="~/Scripts/filtertable/jquery.filtertable.js"></script>
    <script src="~/Scripts/filtertable/jquery.filtertable.min.js"></script>
    <script src="~/Scripts/jquery.validate-vsdoc.js"></script>
    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
    <script src="~/Scripts/cdnjs/jquery.ui.datepicker.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    @***********************************************************************@
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="~/Scripts/jquery-ui.js"></script>
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="/Scripts/jquery.validate.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="/Scripts/jquery.validate.unobtrusive.js"></script>
    <script src="~/Content/logintemplate/dist/js/adminlte.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.0.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.22/jquery-ui.js"></script>
    @***********************************************************************************@

    <script src="~/scripts/PlatinumRegistration.js"></script>

    <script src="~/Resources/dynamsoft.webtwain.initiate.js"></script>

    <script src="~/Resources/dynamsoft.webtwain.config.js"></script>
    @************************************************************************@
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/jquery.tinymce.min.js"></script>
    @*<script src="~/Scripts/cdnjs/jquery.tablenav.min.js"></script>
        <script src="~/Scripts/unpkg/index.js"></script>*@

    @************************************************************************@
    <script src="~/scripts/move/dist/jquery.fcs.min.js"></script>
    <script src="~/scripts/move/src/jquery.fcs.js"></script>
    @*<script src="~/scripts/move/webpack.config.js"></script>
        <script src="~/scripts/unpkg/jquery_update.js"></script>*@


    @************************************************************************@

    <script src="~/scripts/cdnjs/Gruntfile.js"></script>
    <link href="~/scripts/cdnjs/jquery.simple-dtpicker.css" rel="stylesheet" />
    <script src="~/scripts/cdnjs/jquery.simple-dtpicker.js"></script>
    <script src="~/Content/logintemplate/dist/js/adminlte.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <script src="@Url.Content("~/Content/logintemplate/plugins/bootstrap/js/bootstrap.min.js")"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

}
<style>
    input[type="text"], textarea, select {
        background: #FFFFFF;
    }

    th, td {
        font-size: 15px;
    }
</style>
<script>

    //$(document).ready(function () {
    //    $(document).fcs(".fcs");
    //})

    $(document).on('click ', '#createuserload', function () {

        $('#txtusername').focus();

    })
    $(document).on('click', '#employeeload', function () {

        event.preventDefault();
        $("input[type='text']:first").focus();

    })
    $(document).on('click', '#pendingload', function () {
        event.preventDefault();
        $("#pendlabno").focus();

    })

    $(document).on('click', '#cancellload', function () {

        event.preventDefault();

        $("#invoicelabno").focus();

    })
    $(document).on('click', '#cashclosingload', function () {

        event.preventDefault();

        $("#txtcoll1").focus();

    })
    $(document).on('click', '#reportdispatchload', function () {

        event.preventDefault();

        $("#ReportdisEntryNo").focus();

    })
    //$(document).on('click', '#billwiseareaload', function () {

    //    event.preventDefault();

    //    $("#").focus();

    //})
    //$(document).on('click', '#billwiseload', function () {

    //    event.preventDefault();

    //    $("#").focus();

    //})




    $(document).ready(function () {

        $('textarea').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });

        $('textarea').blur(
        function () {
            $(this).css({ 'background': '#fff' });

        });
    })
    $(document).ready(function () {
        $('#Day').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });


        $('#email').blur(
        function () {
            $(this).css({ 'background': '#fff' });
        });
        $('#email').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });

        $('#Day').blur(
        function () {
            $(this).css({ 'background': '#fff' });

        });
        $('#txtusername').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });

        $('#txtusername').blur(
        function () {
            $(this).css({ 'background': '#fff' });

        });
    })
    $(document).ready(function () {
        $('#empdob').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });
        $('#empdob').blur(
        function () {
            $(this).css({ 'background': '#fff' });

        });
        $('#empwday').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });
        $('#empwday').blur(
        function () {
            $(this).css({ 'background': '#fff' });

        });
        $('#empwday').focus(
       function () {
           $(this).css({ 'background': 'chartreuse' });
       });
        $('#empwday').blur(
        function () {
            $(this).css({ 'background': '#fff' });

        });

    })


    $(document).ready(function () {
        $('#active').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });

        $('#active').blur(
        function () {
            $(this).css({ 'background': '#fff' });
        });
        $('#mode').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });

        $('#mode').blur(
        function () {
            $(this).css({ 'background': '#fff' });
        });
        $('#cd').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });

        $('#cd').blur(
        function () {
            $(this).css({ 'background': '#fff' });
        });
        $('#namesrch').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });
        $('#namesrch').blur(
        function () {
            $(this).css({ 'background': '#fff' });


        });
        $('#avoidletterhead').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });
        $('#avoidletterhead').blur(
        function () {
            $(this).css({ 'background': '#fff' });

        });
        $('#usergrp').focus(
        function () {
            $(this).css({ 'background': 'chartreuse' });
        });
        $('#usergrp').blur(
        function () {
            $(this).css({ 'background': '#fff' });

        });
    })


    $('#closeuser').click(function () {

        $("#txtusernameid").val("");
        $("#txtusername").val("");
        $("#txtpwd").val("");
        $("#contxtpwd").val("");
        //$('#usergrp option:selected').text();
        $("#empname").val("");
        $("#empnameid").val("");

        $("#usergrp option[value=1]").attr('selected', 'selected');
        $("#img").val("");
        $('img').attr('src', '');
        //location.reload();

    })
    $('#createuserexit').click(function () {
        $('#closeuser').click();
        //location.reload();

    })
    $('#closcancell').click(function () {
        $("#invoicelabno").val("");
        $("#invdatetime").val("");
        $("#invname").val("");
        $("#invprefix").val("");
        $("#invprefix").val("");
        $("#invmale").prop('checked', false);
        $("#invfemale").prop('checked', false);
        $("#invphono").val("");
        $("#invemail").val("");
        $("#invoutdr").val("");
        $("#invbranch").val("");
        $("#invipopno").val("");
        $("#invcolno").val("");
        $("#invcollby").val("");
        $("#invsampleon").val("");
        $("#invreporton").val("");
        $("#chkPersonally").prop('checked', false);
        $("#chkTelephone").prop('checked', false);
        $("#chkCourier").prop('checked', false);
        $("#chkEmail").prop('checked', false);
        $("#chkSms").prop('checked', false);
        $("#invamount").val("");
        $("#invtextarea").val("");
        $("#invrefby").val("");

        $("#invage").val("");
        $("#invmonth").val("");
        $("#invyear").val("");

        //location.reload();

    })
    $('#cancelexit').click(function () {
        $('#closcancell').click();
        //location.reload();

    })
    $('#pndexit').click(function () {
        $('#closepnd').click();
        //location.reload();

    })
    $('#closepnd').click(function () {

        $("#pendtb1 tbody").empty();
        $("#pndphono").val("");

        $("#pendlabno").val("");
        //$("#pnddatetime").val("");
        $("#pndprifix").val("");
        $("#pndname").val("");
        $("#agedd").val("");
        $("#agemm").val("");
        $("#ageyy").val("");
        $("#pndgender option:selected").text("");
        $("#pndemail").val("");
        $("#pndpaymode option:selected").text("");
        $("#pndcardno").val("");
        $("#pndbank").val("");
        $("#pndbankid").val("");
        $("#pndamt").val("");
        $("#pndcollamt").val("");
        //$("#pndcoldatetime").val("");
        $("#pndcurbalance").val("");
        $("#pndnote").val("");
        $("#pndcorporate").prop('checked', false);
        $("#pndcorptxt").hide();
        $("#pndcorpsrch").hide();


        //location.reload();


    })
    $('#cashclose').click(function () {
        $("#loaddiv").load();

        $('#paymenttb tbody').empty();
        $('#pendingtb tbody').empty();
        $('#transtb tbody').empty();
        $('#receipttb tbody').empty()
        $("#total2000").empty();
        $("#total1000").empty();
        $("#total500").empty();
        $("#total200").empty();
        $("#total100").empty();
        $("#total50").empty();
        $("#total20").empty();
        $("#total10").empty();
        $("#total5").empty();
        $("#totalCoins").empty();

        $("#txt2000").val("");
        $("#txt1000").val("");
        $("#txt500").val("");
        $("#txt200").val("");
        $("#txt100").val("");
        $("#txt50").val("");
        $("#txt20").val("");
        $("#txt10").val("");
        $("#txt5").val("");
        $("#txtcoin").val("");
        $("#txttotals").val("");

        $("#txtcoll1").val("");
        $("#txtcoll2").val("");
        $("#txtpayment").val("");
        $("#txtrecp").val("");
        $("#txtofficeamt").val("");

        $("#txtNote").val("");
        $("#txtoffice").val("");
        $("#txtbalance").val("");
        $("#txtshortamt").val("");
        $("#txtexcessamt").val("");
        $("#txttotal").val("");
        $("#userinfo").val("");
        $("#txttotals").val("");
        $("#fetchtxt").hide();
        var dateObj = new Date();
        var time = dateObj.getHours() + ":" + dateObj.getMinutes() + ":" + dateObj.getSeconds();
        var time1 = time.toLocaleString();
        var AMorPM = (dateObj.getHours() >= 12) ? "PM" : "AM";

        $('#cashtime').val(time1 + AMorPM);

        $('#cashclosingdate').val("@ViewBag.cashcurdate");
        $('#cashAlluser').hide();
        $('#cashLoguser').hide();
        $('#fetchtxt').hide();
        $('#fetchbtn').hide();
        $('#invoicediv').hide();
        $('#invoicehead').hide();
        $('#pndhead').hide();
        $('#penddiv').hide();
        $('#paymenthead').hide();
        $('#paymentdiv').hide();
        $('#receipthead').hide();
        $('#reciptdiv').hide();
        $('#allusrlabel').hide();
        $('#cashLoguserid').hide();
        $('#setbtn').show();
        $('#cashUsrWise').prop("checked", false);
        $("#CashCloseSave").html("Save");
        $("#txtid").val("");


        //location.reload();
    })
    $('#cashcloseexit').click(function () {
        $('#cashclose').click();
        //location.reload();
    })



    $(document).ready(function () {
        $("#empactive").prop('checked', true);
    })


    $(document).on('click', '#employeesrch', function () {

        event.preventDefault();
        $('#lookuptb tbody').empty();
        $("#txt").val("");
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETEMPNAME',
            //GETEMPNAME
            data: {},
            dataType: 'json',
            success: function (data) {

                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=roemp>"
                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"

                    + "</tr>";
                });
                $("#modelsize").css("width", "400");
                $("#header3").hide();
                $("#header").css("width", "400");
                $("#txt").css("width", "200");
                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                $('#featuredSelectField option[value="1"]').text('Employee');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header").html("Employee");
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#lookupLabel").html("Employee");
                $("#lookuptb").append(rows);



            },


            error: function (emp) {
                alert('error');
            }

        })
    })



    $(document).on('click', '#empareasrch', function () {

        event.preventDefault();
        $('#lookuptb tbody').empty();
        //$("#txt").val("");

        $("#txt").val("");
        var table = $("#lookuptb").find('tbody');
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETAREA',
            //GETAREA
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=roemparea>"

                    + "<td style=width:400px;text-align:left>" + item.Mstr_Desc + "</td>"
                    + "<td style=display:none>" + item.Mstr_Key + "</td>"

                    + "</tr>";
                });

                $("#modelsize").css("width", "400");
                $("#header3").hide();
                $("#txt").css("width", "200");
                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                $('#featuredSelectField option[value="1"]').text('Area');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header").css("width", "400");
                $("#header").html("Area");
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $("#lookupLabel").html("Area");
                $("#lookuptb").append(rows);

            },

            error: function (emp) {
                alert('error');
            }

        })
    })

    //$("#txtemp").keyup(function () {
    //    event.preventDefault();
    //    var customerName = $.trim($("#txtemp").val());
    //    $.ajax({
    //        type: "POST",
    //        url: "/LISFY/SEARCHEMPLOYEEENAME",
    //        data: "{customerName:'" + customerName + "'}",
    //        contentType: "application/json; charset=utf-8",
    //        dataType: "json",
    //        success: function (customers) {
    //            var input, filter, table, tr, td, i, txtValue;
    //            input = document.getElementById("txtemp");
    //            filter = input.value.toUpperCase();
    //            table = document.getElementById("tbempname");
    //            tr = table.getElementsByTagName("tr");
    //            for (i = 0; i < tr.length; i++) {
    //                td = tr[i].getElementsByTagName("td")[0];
    //                if (td) {
    //                    txtValue = td.textContent || td.innerText;
    //                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
    //                        tr[i].style.display = "";
    //                    } else {
    //                        tr[i].style.display = "none";
    //                    }

    //                }
    //            }
    //        }
    //    })
    //})
    //$('#empSelectField').change(function (e) {
    //    e.preventDefault();
    //    var selectedValue = $(this).find('option:selected').text();
    //    if (selectedValue == 'Employee') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectempname',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tbempname tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=roemp>"
    //                    + "<td>" + item.AhMst_pName + "</td>"
    //                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
    //                    + "</tr>";
    //                    $('#tbempname').append(rows);
    //                });
    //                $("#txtemp").keyup(function () {
    //                    event.preventDefault();
    //                    var emptxt = $.trim($("#txtemp").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHEMPLOYEENAME",
    //                        data: "{emptxt:'" + emptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#tbempname");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#tbempname tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.AhMst_pName).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })




    //            },
    //            error: function (data) { }
    //        });
    //    }


    //    else {
    //        (selectedValue == 'Code')
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectempname1',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tbempname tbody').empty();
    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=roemp>"
    //                    + "<td>" + item.AhMst_pName + "</td>"
    //                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
    //                    + "</tr>";
    //                    $('#tbempname').append(rows);
    //                });
    //                $("#txtemp").keyup(function () {
    //                    event.preventDefault();
    //                    var emptxt = $.trim($("#txtemp").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHEMPLOYEECODE",
    //                        data: "{emptxt:'" + emptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#tbempname");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#tbempname tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.AhMst_pName).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })




    //            },


    //            error: function (data) { }
    //        });
    //    }

    //})
    //$('#empareaSelectField').change(function (e) {
    //    event.preventDefault();
    //    var selectedValue = $(this).find('option:selected').text();
    //    if (selectedValue == 'Area') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectarea',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tbareaemp tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=roemparea>"
    //                    + "<td>" + item.Mstr_Desc + "</td>"
    //                    + "<td style=display:none>" + item.Mstr_Key + "</td>"

    //                    + "</tr>";
    //                    $('#tbareaemp').append(rows);
    //                });

    //                $("#txtemp").keyup(function () {
    //                    event.preventDefault();
    //                    var emptxt = $.trim($("#txtemp").text());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHAREAHOSP",
    //                        data: "{emptxt:'" + emptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#tbareaemp");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#tbareaemp tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td>");
    //                                $(row).find("td").eq(0).html(data.AhMst_pName).css('background', '');
    //                            });
    //                        }
    //                    })
    //                })
    //            },
    //            error: function (data) { }
    //        });
    //    }
    //    else {
    //        (selectedValue == 'Code')
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectarea1',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tbareaemp tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=roemparea>"
    //                    + "<td>" + item.Mstr_Desc + "</td>"
    //                    + "<td style=display:none>" + item.Mstr_Key + "</td>"


    //                    + "</tr>";
    //                    $('#tbareaemp').append(rows);
    //                });

    //                $("#txtemp").keyup(function () {
    //                    event.preventDefault();
    //                    var emptxt = $.trim($("#txtemp").text());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHAREACODE",
    //                        data: "{emptxt:'" + emptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#tbareaemp");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#tbareaemp tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.AhMst_pName).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })

    //            },
    //            error: function (data) { }
    //        });
    //    }

    //})
    $('body').on('click', '.roemp', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#selectempscroll");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }
        document.onkeydown = function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var empname = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var empid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();
                    $("#employeename").val(empname);
                    $("#employeenameid").val(empid);
                    $.ajax({
                        type: 'POST',
                        url: '/LISFY/displayemployee',

                        data: { empname: empname, empid: empid },
                        dataType: 'json',
                        success: function (data) {

                            var rows;
                            $.each(data, function (i, item) {
                                $('#empid').val(item.txtStfId);
                                $("#employeename").val(item.txtStfName);
                                $("#employeenameid").val(item.txtStfNameid);
                                $("#empaddress").val(item.txtStfAddres);
                                $("#empmobile").val(item.txtStfMobile);
                                $("#empphone").val(item.txtStfPhone);
                                $("#empemail").val(item.txtStfEmail);
                                $("#emparea").val(item.txtStfArea);
                                $("#empareaid").val(item.txtStfAreaid);
                                $("#empcntperson").val(item.txtStfConPrsn);
                                var d = $('#empdob').datepicker({ dateFormat: 'dd/mm/yyyy' }).val();
                                var d = new Date(item.dtpStfDob);

                                const formattedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear()
                                $("#empdob").val(formattedDate);
                                var day1 = $('#empwday').val();
                                const m = new Date(item.dtpStfWedding);
                                //const formattedwedDate = m.getFullYear() + '-' + ("0" + (m.getMonth() + 1)).slice(-2) + '-' + ("0" + m.getDate()).slice(-2)
                                const formattedwedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear()
                                $("#empwday").val(formattedwedDate);
                                if (item.chkIsActive == 1) {
                                    $('#empactive').prop('checked', true);
                                }
                                if (item.optMale == 1) {
                                    $('#empmale').prop('checked', true);
                                }

                                if (item.optFemale == 1) {
                                    $('#empfemale').prop('checked', true);
                                }

                                $("#empnote").val(item.txtStfNote);



                            })
                            $(".searchledgerclose").trigger('click');
                        }

                    })



                    $(".searchledgerclose").trigger('click');



            }

        }

    });
    $("#empphone").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });




    $('body').on('dblclick', '.roemp', function (evt) {
        event.preventDefault();

        var empname = $(this).find("td:eq(0)").text();
        var empid = $(this).find("td:eq(1)").text();
        $("#employeename").val(empname);
        $("#employeenameid").val(empid);
        $.ajax({
            type: 'POST',
            url: '/LISFY/displayemployee',

            data: { empname: empname, empid: empid },
            dataType: 'json',
            success: function (data) {

                var rows;
                $.each(data, function (i, item) {
                    $('#empid').val(item.txtStfId);
                    $("#employeename").val(item.txtStfName);
                    $("#employeenameid").val(item.txtStfNameid);
                    $("#empaddress").val(item.txtStfAddres);
                    $("#empmobile").val(item.txtStfMobile);
                    $("#empphone").val(item.txtStfPhone);
                    $("#empemail").val(item.txtStfEmail);
                    $("#emparea").val(item.txtStfArea);
                    $("#empareaid").val(item.txtStfAreaid);
                    $("#empcntperson").val(item.txtStfConPrsn);
                    var d = $('#empdob').datepicker({ dateFormat: 'dd-mm-yyyy' }).val();
                    d = new Date(item.dtpStfDob);

                    const formattedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear()
                    $("#empdob").val(formattedDate);
                    var day1 = $('#empwday').val();
                    const m = new Date(item.dtpStfWedding);

                    const formattedwedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear()
                    $("#empwday").val(formattedwedDate);
                    if (item.chkIsActive == 1) {
                        $('#empactive').prop('checked', true);
                    }
                    if (item.optMale == 1) {
                        $('#empmale').prop('checked', true);
                    }

                    if (item.optFemale == 1) {
                        $('#empfemale').prop('checked', true);
                    }

                    $("#empnote").val(item.txtStfNote);



                })
                $(".searchledgerclose").trigger('click');
            }

        })



        $(".searchledgerclose").trigger('click');


    })
    $('body').on('click', '.roemparea', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#selectempscroll");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }

        //$('#searchledger').onkeydown = function (e){
        document.onkeydown = function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var emparea = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var empareaid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();
                    $("#emparea").val(emparea);
                    $("#empareaid").val(empareaid);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchledgerclose").trigger('click');
                    }, 500)

                    break;

            }

        }

    });
    //})

    $('body').on('dblclick', '.roemparea', function (evt) {
        event.preventDefault();

        var emparea = $(this).find("td:eq(0)").text();
        var empareaid = $(this).find("td:eq(1)").text();
        $("#emparea").val(emparea);
        $("#empareaid").val(empareaid);
        $(".searchledgerclose").trigger('click');


    })
    $("#empmobile").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });


    $(document).on('click', '#empsave', function (e) {
        e.preventDefault();
        $('#empsave').prop('disabled', true);

        var employeesave = {};
        employeesave.saveFlag = "New";
        employeesave.txtStfName = $("#employeename").val();
        employeesave.txtStfNameid = $("#employeenameid").val();
        employeesave.txtStfAddres = $("#empaddress").val();
        employeesave.txtStfMobile = $("#empmobile").val();
        employeesave.txtStfPhone = $("#empphone").val();
        employeesave.txtStfEmail = $("#empemail").val();
        employeesave.txtStfArea = $("#emparea").val();
        employeesave.txtStfAreaid = $("#empareaid").val();
        employeesave.txtStfConPrsn = $("#empcntperson").val();
        var dtpStfDob1 = $("#empdob").val();
        var dtpStfWedding1 = $("#empwday").val();
        //employeesave.dtpStfDob = $("#empdob").val();
        //employeesave.dtpStfWedding = $("#empwday").val();
        var IsActive = 0;
        if ($("#empactive").is(':checked') === true) {
            employeesave.chkIsActive = 1;
        }


        var optMale = 0;
        if ($("#empmale").is(':checked') === true) {
            employeesave.optMale = 1;
        }
        var optFemale = 0;
        if ($("#empfemale").is(':checked') === true) {
            employeesave.optFemale = 1;
        }
        employeesave.txtStfNote = $("#empnote").val();

        var mobile = $("#empmobile").val();
        var phone = $("#empphone").val();
        //var phon = /\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/;
        //var mob = /[0-9\-\(\)\s]+/;
        var email = $("#empemail").val();
        var expr = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        $.ajax({
            type: "POST",
            url: "/LISFY/SAVEVIEWEMPLOYEE",
            data: JSON.stringify({ employeesave, dtpStfDob1: dtpStfDob1, dtpStfWedding1: dtpStfWedding1 }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",

            success: function (data) {
                if ($("#empemail").val() !== "") {
                    if (!expr.test(email)) {
                        alert("invalid email address!!!");
                        $('#empsave').prop('disabled', false);
                        return false;

                    }
                }
                if ($("#empmobile").val() !== "") {
                    //if (!mob.test(mobile)) {
                    if (phone.length !== 10) {
                        alert("invalid mobile number!!!");
                        $('#empsave').prop('disabled', false);
                        return false;

                    }
                }
                if ($("#empphone").val() !== "") {
                    //if (!phon.test(phono)) {
                    if (mobile.length !== 10) {
                        alert("invalid Phone number!!!");
                        $('#empsave').prop('disabled', false);
                        return false;

                    }
                }
                if ($("#employeename").val().trim() !== "") {
                    alert("successfully inserted");
                    $('#empsave').prop('disabled', false);
                    $("#employeename").val("");
                    $("#employeenameid").val("");
                    $("#empaddress").val("");
                    $("#empmobile").val("");
                    $("#empphone").val("");
                    $("#empemail").val("");
                    $("#emparea").val("");
                    $("#empareaid").val("");
                    $("#empcntperson").val("");
                    $("#empcntperson").val("");
                    $("#empdob").val("@ViewBag.cashcurdate");
                    $("#empwday").val("@ViewBag.cashcurdate");
                    $("#empactive").prop('checked', true);
                    $("input[type=date]").val("");
                    $("#empmale").prop('checked', false);
                    $("#empfemale").prop('checked', false);
                    $("#empnote").val("");
                    $("#empid").val("");

                }
                else {
                    alert("Empty EmployeeName!!!");
                    $("#employeename").focus();
                    $('#empsave').prop('disabled', false);
                }

            }
        });
    })
    $(document).on('click', '#empnew', function (e) {
        e.preventDefault();
        $('#empid').val("");
        $("#employeename").val("");
        $("#employeenameid").val("");
        $("#empaddress").val("");
        $("#empmobile").val("");
        $("#empphone").val("");
        $("#empemail").val("");
        $("#emparea").val("");
        $("#empareaid").val("");
        $("#empcntperson").val("");
        $("#empcntperson").val("");
        $("#empdob").val("@ViewBag.cashcurdate");
        $("#empwday").val("@ViewBag.cashcurdate");
        $("#empactive").prop('checked', true);
        $("input[type=date]").val("");
        $("#empmale").prop('checked', false);
        $("#empfemale").prop('checked', false);
        $("#empnote").val("");

    })

    $(document).on('click', '#userempsrch', function () {

        event.preventDefault();
        $('#lookuptb tbody').empty();
        $("#txt").val("");
        var table = $("#lookuptb").find('tbody');

        //$(table).children('tr:not(:first)').remove();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETEMPNAME',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=rocreateusr>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                    + "</tr>";
                });
                //$("#txtscheme").keyup(function () {
                //    var schemetxt = $.trim($("#txtscheme").val());
                //    $.ajax({
                //        type: "POST",
                //        url: "/LISFY/SEARCHSHEMECODE",
                //        data: "{schemetxt:'" + schemetxt + "'}",
                //        contentType: "application/json; charset=utf-8",
                //        dataType: "json",
                //        success: function (data) {
                //            var table = $("#Schmetb");
                //            table.find("tr:not(:first)").remove();
                //            $.each(data, function (i, data) {
                //                var table = $("#Schmetb tbody");

                //                var row = table[0].insertRow(-1);
                //                $(row).append("<td />");
                //                $(row).find("td").eq(0).html(data.Mstr_Desc).css('background', '');

                //            });
                //        }
                //    })
                //})




                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                $("#modelsize").css("width", "400");
                $('#featuredSelectField option[value="1"]').text('Employee');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header3").hide();
                $("#header").css("width", "400");
                $("#lookupLabel").html("Employee");
                $("#txt").css("width", "200");
                $("#header").html("Employee");
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#lookuptb").append(rows);
            },
            error: function (emp) {
                alert('error');
            }

        })
    })

    $(document).on('click', '#createusersave', function (e) {

        e.preventDefault();
        $('#createusersave').prop('disabled', true);
        var usersave = {};
        //usersave.saveFlag = "New";
        //var formData = new FormData();
        var File = this.files;
        var reader = new FileReader;
        var image = new Image;

        var file = $("#files").get(0).files;

        usersave.txtUsrNameid = $("#txtusernameid").val();
        usersave.txtUsrName = $("#txtusername").val();
        usersave.txtPasswrd = $("#txtpwd").val();
        usersave.txtRtpass = $("#contxtpwd").val();
        usersave.cmbUsrGrp = $('#usergrp option:selected').text();
        usersave.txtEmp = $("#empname").val();
        usersave.txtEmpid = $("#empnameid").val();
        var byteData = $("#img").val();

        var img = ("image", $('#img').attr('src'));
        //img = img.replace('data:image/png;base64,', '');
        usersave.Filepic = img;

        if ($("#txtusername").val().trim() == "") {
            alert("Enter UserName!");
            $("#txtusername").focus();
            $('#createusersave').prop('disabled', false);
            return false;
        }
        else {
            if ($("#txtpwd").val().trim() == "") {

                alert("Enter Password!!");
                $("#txtpwd").focus();
                $('#createusersave').prop('disabled', false);
                return false;
            }


            else {
                if ($("#empname").val() == "") {
                    alert("Select Employee!");
                    $("#empname").focus();
                    $('#createusersave').prop('disabled', false);
                    return false;

                }
                else {
                    if ($("#contxtpwd").val() == "") {
                        alert("Enter Password!!");
                        $("#contxtpwd").focus();
                        $('#createusersave').prop('disabled', false);
                    }

                    else {

                        $.ajax({
                            type: "POST",
                            url: "/LISFY/CHECKUSRNAME",
                            data: JSON.stringify(usersave),
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",

                            success: function (data) {
                                if (data.Result === "UserName Already Exsist") {
                                    confirm("UserName Already Exsist!");
                                    $("#txtusername").focus();
                                    $('#createusersave').prop('disabled', false);
                                    return false;
                                }


                                if (data.Result === "Passwords Not Matching") {
                                    confirm("Passwords Not Matching!");
                                    $("#contxtpwd").focus();
                                    $('#createusersave').prop('disabled', false);
                                    return false;
                                }

                                else {
                                    $.ajax({
                                        type: "POST",
                                        url: "/LISFY/SAVEUSERCREATION",
                                        data: JSON.stringify(usersave),
                                        contentType: "application/json; charset=utf-8",
                                        dataType: "json",

                                        success: function (data) {

                                            if (data.Result === "Employee Already Added..Please Change Employee..") {
                                                confirm("Employee Already Added..Please Change Employee..!");
                                                $("#empname").focus();
                                                $('#createusersave').prop('disabled', false);
                                                return false;
                                            }
                                            alert("successfully");
                                            $('#createusersave').prop('disabled', false);
                                            $("#txtusernameid").val("");
                                            $("#txtusername").val("");
                                            $("#txtpwd").val("");
                                            $("#contxtpwd").val("");
                                            //$('#usergrp option:selected').text();
                                            $("#usergrp option[value=1]").attr('selected', 'selected');
                                            $("#empname").val("");
                                            $("#empnameid").val("");
                                            $("input[type=file]").val("");

                                            $('img').attr('src', '');
                                        }
                                    });

                                }



                            }
                        })



                    }
                }
            }
        }
    })


    $(document).on('click ', '#createuserload', function () {

        $('#txtusername').focus();

    })
    $(document).on('click', '#createusernew', function (e) {
        event.preventDefault();
        $("#txtusernameid").val("");
        $("#txtusername").val("");
        $("#txtpwd").val("");
        $("#contxtpwd").val("");
        //$('#usergrp option:selected').text();
        $("#empname").val("");
        $("#empnameid").val("");

        $("#usergrp option[value=1]").attr('selected', 'selected');
        $("#img").val("");
        $('img').attr('src', '');

    })

    $(document).on('change', '#files', function () {
        var property = document.getElementById('files').files[0];
        var image_name = property.name;
        var image_extension = image_name.split('.').pop().toLowerCase();

        if (jQuery.inArray(image_extension, ['png', 'jpg', 'jpeg', 'svg', '']) == -1) {
            alert("Invalid image file");
        }
    })

    function ShowPreview(input) {
        if (input.files && input.files[0]) {
            var ImageDir = new FileReader();
            ImageDir.onload = function (e) {
                $('#img').attr('src', e.target.result);
            }
            ImageDir.readAsDataURL(input.files[0]);
        }
    }
    $("#files").change(function () {
        ShowPreview(this);
    })


    $('body').on('click', '.rocreateusr', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#selectempscroll");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }


        document.onkeydown = function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var empuser = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var empusrid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();
                    $("#empname").val(empuser);
                    $("#empnameid").val(empusrid);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchledgerclose").trigger('click');
                    }, 500)

                    break

            }
        }

    });

    $('body').on('dblclick', '.rocreateusr', function (evt) {
        event.preventDefault();
        var empuser = $(this).find("td:eq(0)").text();
        var empusrid = $(this).find("td:eq(1)").text();

        $("#empname").val(empuser);
        $("#empnameid").val(empusrid);
        $(".searchledgerclose").trigger('click');
    })
    $('#createuserexit').click(function () {
        $("#employeename").val("");
        $("#employeenameid").val("");
        $("#empaddress").val("");
        $("#empmobile").val("");
        $("#empphone").val("");
        $("#empemail").val("");
        $("#emparea").val("");
        $("#empareaid").val("");
        $("#empcntperson").val("");
        $("#empcntperson").val("");
        $("#empdob").val("@ViewBag.cashcurdate");
        $("#empwday").val("@ViewBag.cashcurdate");
        $("#empactive").prop('checked', true);
        $("input[type=date]").val("");
        $("#empmale").prop('checked', false);
        $("#empfemale").prop('checked', false);
        $("#empnote").val("");
        $("#empid").val("");


    })

    $(document).on('click ', '#hospitalload', function () {

        $('#namesrch').focus();

    })
    $(document).on('click ', '#employeeload', function () {

        $('#employeename').focus();

    })
    $(document).ready(function () {
        $("#active").prop('checked', true);
    })

    $(document).on('click', '#hospitalsrch', function () {

        event.preventDefault();
        $('#lookuptb tbody').empty();
        $("#txt").val("");
        var table = $("#lookuptb").find('tbody');
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETHOSNAME',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=rohosp>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"

                    + "</tr>";
                });

                $("#modelsize").css("width", "400");
                $("#searchlookup").css("left", "8%");
                $("#txt").css("width", "200");
                $('#featuredSelectField option[value="1"]').text('Hospital');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#header").css("width", "400");
                $("#header3").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                $("#lookupLabel").html("Hospial");
                $("#header").html("Hospital");
                $("#header2").hide();
                $("#lookuptb").append(rows);



            },


            error: function (emp) {
                alert('error');
            }

        })
    })

    $(document).on('click', '#srcharea', function () {

        event.preventDefault();
        $('#lookuptb tbody').empty();
        $("#txt").val("");

        var table = $("#lookuptb").find('tbody');
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETAREA',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=roarea>"

                    + "<td style=width:400px;text-align:left>" + item.Mstr_Desc + "</td>"
                    + "<td style=display:none>" + item.Mstr_Key + "</td>"

                    + "</tr>";
                });

                $("#modelsize").css("width", "400");
                $("#header").css("width", "400");
                $("#header3").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#txt").css("width", "200");
                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                $('#featuredSelectField option[value="1"]').text('Area');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#header").html("Area");
                $("#header2").hide();
                $("#searchlookup").css("left", "8%");
                $("#lookupLabel").html("Area");
                $("#lookuptb").append(rows);



            },




            error: function (emp) {
                alert('error');
            }

        })
    })
    $(document).on('click', '#srchspec', function () {

        event.preventDefault();
        $('#lookuptb tbody').empty();
        //$("#tbspec").show();

        $("#txt").val("");
        var table = $("#lookuptb").find('tbody');
        $(table).children('tr:not(:first)').remove();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETSpecialised',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=rospec>"

                    + "<td style=width:400px;text-align:left>" + item.Mstr_Desc + "</td>"
                    + "<td style=display:none>" + item.Mstr_Key + "</td>"

                    + "</tr>";
                });
                $("#modelsize").css("width", "400");
                $("#searchlookup").css("left", "8%");
                $("#txt").css("width", "200");
                $("#header").css("width", "400");
                $('#featuredSelectField option[value="1"]').text('Specification');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#header").html("Specification");
                $("#header2").hide();
                $("#header3").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#lookupLabel").html("Specification");
                $("#lookuptb").append(rows);
                $("#featuredSelectField option[value=1]").attr('selected', 'selected');





            },




            error: function (emp) {
                alert('error');
            }

        })
    })
    $('body').on('click', '.rospec', function (evt) {
        event.preventDefault();

        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#selecthospsroll");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }
        document.onkeydown = function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var specname = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var specaid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();
                    $("#Specialisedname").val(specname);
                    $("#Specialisednameid").val(specaid);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchledgerclose").trigger('click');
                    }, 500)

                    break;


            }
        }

    });

    $('body').on('dblclick', '.rospec', function (evt) {
        event.preventDefault();

        var specname = $(this).find("td:eq(0)").text();
        var specaid = $(this).find("td:eq(1)").text();
        $("#Specialisedname").val(specname);
        $("#Specialisednameid").val(specaid);
        $(".searchledgerclose").trigger('click');
    })

    //$('#hospSelectField').change(function (e) {
    //    event.preventDefault();
    //    var selectedValue = $(this).find('option:selected').text();
    //    if (selectedValue == 'Hospital') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selecthospital',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tbhosname tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rohosp>"
    //                    + "<td>" + item.AhMst_pName + "</td>"
    //                    + "<td style=display:none>" + item.AhMst_Key + "</td>"

    //                    + "</tr>";
    //                    $('#tbhosname').append(rows);
    //                });
    //                $("#txthosp").keyup(function () {
    //                    var hosptxt = $.trim($("#txthosp").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHHOSPNAME",
    //                        data: "{hosptxt:'" + hosptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#tbhosname");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#tbhosname tbody");
    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td/>");
    //                                $(row).find("td").eq(0).html(data.AhMst_pName).css('background', '');


    //                            });
    //                        }
    //                    })
    //                })
    //            },
    //            error: function (data) { }
    //        });
    //    }
    //    else {
    //        (selectedValue == 'Code')
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selecthospital1',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tbhosname tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rohosp>"
    //                    + "<td>" + item.AhMst_pName + "</td>"
    //                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
    //                    + "</tr>";
    //                    $('#tbhosname').append(rows);
    //                });
    //                $("#txthosp").keyup(function () {
    //                    event.preventDefault();
    //                    var hosptxt = $.trim($("#txthosp").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHHOSPCODE",
    //                        data: "{hosptxt:'" + hosptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#tbhosname");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#tbhosname tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td/>");
    //                                $(row).find("td").eq(0).html(data.AhMst_pName).css('background', '');


    //                            });
    //                        }
    //                    })
    //                })
    //            },



    //            error: function (data) { }
    //        });
    //    }

    //})
    //$('#areaSelectField').change(function (e) {
    //    event.preventDefault();
    //    var selectedValue = $(this).find('option:selected').text();
    //    if (selectedValue == 'Area') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectarea',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tbarea tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=roarea>"
    //                    + "<td>" + item.Mstr_Desc + "</td>"
    //                    + "<td style=display:none>" + item.Mstr_Key + "</td>"

    //                    + "</tr>";
    //                    $('#tbarea').append(rows);
    //                });
    //                $("#txthosp").keyup(function () {
    //                    event.preventDefault();
    //                    var hosptxt = $.trim($("#txthosp").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHAREAHOSP",
    //                        data: "{hosptxt:'" + hosptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#tbarea");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#tbarea tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.Mstr_Desc).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })


    //            },
    //            error: function (data) { }
    //        });
    //    }
    //    else {
    //        (selectedValue == 'Code')
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectarea1',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tbarea tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=roarea>"
    //                    + "<td>" + item.Mstr_Desc + "</td>"
    //                    + "<td style=display:none>" + item.Mstr_Key + "</td>"


    //                    + "</tr>";
    //                    $('#tbarea').append(rows);
    //                });
    //                $("#txthosp").keyup(function () {
    //                    event.preventDefault();
    //                    var hosptxt = $.trim($("#txthosp").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHAREACODE",
    //                        data: "{hosptxt:'" + hosptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#tbarea");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#tbarea tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.Mstr_Desc).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })


    //            },
    //            error: function (data) { }
    //        });
    //    }

    //})
    //$('#specSelectField').change(function (e) {
    //    event.preventDefault();
    //    var selectedValue = $(this).find('option:selected').text();
    //    if (selectedValue == 'Specialised') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectspec',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tbspec tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rospec>"
    //                    + "<td>" + item.Mstr_Desc + "</td>"
    //                    + "<td style=display:none>" + item.Mstr_Key + "</td>"

    //                    + "</tr>";
    //                    $('#tbspec').append(rows);
    //                });
    //                $("#txthosp").keyup(function () {
    //                    event.preventDefault();
    //                    var hosptxt = $.trim($("#txthosp").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHSPECIAL",
    //                        data: "{hosptxt:'" + hosptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#tbspec");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#tbspec tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td/>");
    //                                $(row).find("td").eq(0).html(data.Mstr_Desc).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })

    //            },
    //            error: function (data) { }
    //        });
    //    }
    //    else {
    //        (selectedValue == 'Code')
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectspec1',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tbspec tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rospec>"
    //                    + "<td>" + item.Mstr_Desc + "</td>"
    //                    + "<td style=display:none>" + item.Mstr_Key + "</td>"


    //                    + "</tr>";
    //                    $('#tbspec').append(rows);
    //                });
    //                $("#txthosp").keyup(function () {
    //                    event.preventDefault();
    //                    var hosptxt = $.trim($("#txthosp").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHSPECIALCODE",
    //                        data: "{hosptxt:'" + hosptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#tbspec");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#tbspec tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.Mstr_Desc).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })

    //            },
    //            error: function (data) { }
    //        });
    //    }

    //})
    $('body').on('click', '.rohosp', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#selecthospsroll");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#tbhosname tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }

        document.onkeydown = function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var hospname = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var hospid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();
                    $("#namesrch").val(hospname);
                    $("#namesrchid").val(hospid);
                    $.ajax({
                        type: 'POST',
                        url: '/LISFY/displayhospital',
                        data: { hospname: hospname, hospid: hospid },
                        dataType: 'json',
                        success: function (data) {

                            var rows;
                            $.each(data, function (i, item) {

                                $('#name').val(item.txtHosId);
                                $('#Addresshosp').val(item.AhMst_Address);
                                $('#Mobile').val(item.AhMst_mobile);
                                $('#Phone').val(item.AhMst_Phno);
                                $('#Email').val(item.AhMst_Email);
                                $('#Areaid').val(item.AhMst_AreaID);
                                $('#areaname').val(item.txtHosArea);
                                $('#Contact').val(item.txtHosConPrsn);
                                $('#Specialisedname').val(item.txtHosSpecialised);
                                $('#Specialisednameid').val(item.txtHosSpecialisedid);
                                var day = $('#Day').val();
                                const d = new Date(item.dtpHospDay);
                                const formattedDate = ("0" + d.getDate()).slice(-2) + '-' + ("0" + (d.getMonth() + 1)).slice(-2) + '-' + d.getFullYear();
                                $('#Day').val(formattedDate);
                                $('#notename').val(item.txtNoteHos);
                                if (item.chkIsActive == 1) {
                                    $('#active').prop('checked', true);
                                }
                                $(".searchledgerclose").trigger('click');
                            })
                        }
                    })
                    $(".searchledgerclose").trigger('click');

                    break

            }

        }

    });


    $("#Mobile").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#Phone").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });



    $('body').on('dblclick', '.rohosp', function (evt) {
        event.preventDefault();

        var hospname = $(this).find("td:eq(0)").text();
        var hospid = $(this).find("td:eq(1)").text();
        $("#namesrch").val(hospname);
        $("#namesrchid").val(hospid);
        $.ajax({
            type: 'POST',
            url: '/LISFY/displayhospital',
            data: { hospname: hospname, hospid: hospid },
            dataType: 'json',
            success: function (data) {

                var rows;
                $.each(data, function (i, item) {

                    $('#name').val(item.txtHosId);
                    $('#Addresshosp').val(item.AhMst_Address);
                    $('#Mobile').val(item.AhMst_mobile);
                    $('#Phone').val(item.AhMst_Phno);
                    $('#Email').val(item.AhMst_Email);
                    $('#Areaid').val(item.AhMst_AreaID);
                    $('#areaname').val(item.txtHosArea);
                    $('#Contact').val(item.txtHosConPrsn);
                    $('#Specialisedname').val(item.txtHosSpecialised);
                    $('#Specialisednameid').val(item.txtHosSpecialisedid);
                    var day = $('#Day').val();
                    const d = new Date(item.dtpHospDay);
                    const formattedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();
                    $('#Day').val(formattedDate);
                    $('#notename').val(item.txtNoteHos);
                    if (item.chkIsActive == 1) {
                        $('#active').prop('checked', true);
                    }
                })
            }
        })
        $(".searchledgerclose").trigger('click');

    })
    $('body').on('click', '.roarea', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#selecthospsroll");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }
        document.onkeydown = function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var areaname = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var areaid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();
                    $("#areaname").val(areaname);
                    $("#Areaid").val(areaid);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchledgerclose").trigger('click');
                    }, 500)

                    break;

            }

        }

    });

    $('body').on('dblclick', '.roarea', function (evt) {
        event.preventDefault();

        var areaname = $(this).find("td:eq(0)").text();
        var areaid = $(this).find("td:eq(1)").text();
        $("#areaname").val(areaname);
        $("#Areaid").val(areaid);

        $(".searchledgerclose").trigger('click');
        //$("#searchhospital").hide();
    })
    $(document).on('click', '#savehospital', function (e) {
        e.preventDefault();
        $('#savehospital').prop('disabled', true);
        var hospitalsave = {};
        hospitalsave.saveFlag = "New";
        hospitalsave.AhMst_Phno = $("#Phone").val();
        hospitalsave.AhMst_AreaID = $("#Areaid").val();
        //hospitalsave.AraMst_Name = $("#areaname").val();
        hospitalsave.AhMst_mobile = $("#Mobile").val();
        hospitalsave.AhMst_Email = $("#Email").val();
        hospitalsave.txtHosArea = $("#areaname").val();
        hospitalsave.txtHosId = $("#name").val();
        hospitalsave.txtHosName = $("#namesrch").val();
        hospitalsave.txtHosNameid = $("#namesrchid").val();

        hospitalsave.AhMst_Address = $("#Addresshosp").val();
        hospitalsave.txtHosConPrsn = $("#Contact").val();
        hospitalsave.txtHosSpecialised = $("#Specialisedname").val();
        hospitalsave.txtHosSpecialisedid = $("#Specialisednameid").val();

        //hospitalsave.dtpHospDay = $("#Day").val();
        var chkIsActive = 0;
        if ($("#active").is(':checked') === true) {
            hospitalsave.chkIsActive = 1;
        }
        var dtpHospDay1 = $("#Day").val();

        hospitalsave.txtNoteHos = $("#notename").val();

        var phon = /\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/;
        var mob = /[0-9\-\(\)\s]+/;
        var email = $("#Email").val();
        var phono = $("#Phone").val();
        var mobile = $("#Mobile").val();
        //var expr = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        //if ($("#Email").val() !== "") {
        //    if (!expr.test(email)) {
        //        alert("invalid email address!!!");
        //        $("#Email").focus();
        //        return false;
        //    }
        //}
        if ($("#Mobile").val() !== "") {
            if (mobile.length !== 10) {
                //if (!mob.test(mobile)) {
                alert("invalid mobile number!!!");
                $("#Mobile").focus();
                return false;
                $('#savehospital').prop('disabled', false);
            }
        }
        if ($("#Phone").val() !== "") {
            if (phono.length !== 10) {
                //if (!phon.test(phono)) {
                alert("invalid Phone number!!!");
                $("#Phone").focus();
                return false;
                $('#savehospital').prop('disabled', false);
            }
        }

        $.ajax({
            type: "POST",
            url: "/LISFY/SAVEVIEWHOSPITAL",

            data: JSON.stringify({ hospitalsave, dtpHospDay1: dtpHospDay1 }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",

            success: function (data) {


                if ($("#namesrch").val().trim() !== "") {
                    if (data.Result === "Hospital Name Already Exsists") {
                        confirm("Hospital Name Already Exsists");
                        $("#namesrch").focus();
                        return false;
                        $('#savehospital').prop('disabled', false);
                    }
                    alert("successfully inserted");
                    $('#savehospital').prop('disabled', false);
                    $("#Phone").val("");
                    $("#Areaid").val("");
                    $("#areaname").val("");
                    $("#Mobile").val("");
                    $("#Email").val("");
                    $("#Day").val("@ViewBag.cashcurdate");
                    $("#name").val("");
                    $("#namesrch").val("");
                    $("#namesrchid").val("");
                    $("input[type=date]").val("")
                    $("#Addresshosp").val("");
                    $("#Contact").val("");
                    $("#Specialisedname").val("");
                    $("#Specialisednameid").val("");
                    $("#notename").val("");
                    $("#active").prop('checked', true);

                }
                else {
                    alert("Enter a Name for Hospital");
                    $("#namesrch").focus();
                    $('#savehospital').prop('disabled', false);
                }
            }

        })
    })
    $(document).on('click', '#hosnew', function (e) {

        e.preventDefault();
        $("#Phone").val("");
        $("#Areaid").val("");
        $("#areaname").val("");
        $("#Mobile").val("");
        $("#Email").val("");
        $("#name").val("");
        $("#namesrch").val("");
        $("#namesrchid").val("");
        $("#Addresshosp").val("");
        $("#Contact").val("");
        $("#Specialisedname").val("");
        $("#Specialisednameid").val("");
        $("#notename").val("");
        $("#active").prop('checked', true);
        //$("input[type=date]").val("dd/mm/yyy");
        $("#Day").val("@ViewBag.cashcurdate");



    })
    $('#closehospital').click(function () {
        $("#Phone").val("");
        $("#Areaid").val("");
        $("#areaname").val("");
        $("#Mobile").val("");
        $("#Email").val("");
        $("#name").val("");
        $("#namesrch").val("");
        $("#namesrchid").val("");
        $("#Addresshosp").val("");
        $("#Contact").val("");
        $("#Specialisedname").val("");
        $("#Specialisednameid").val("");
        $("#notename").val("");
        $("#active").prop('checked', true);
        //$("input[type=date]").val("dd/mm/yyy");
        $("#Day").val("@ViewBag.cashcurdate");
        //location.reload();
    });

    $('#hosexit').click(function () {
        $('#closehospital').click();
        //location.reload();
    });




    $('#closeaccledger').click(function () {
        $("#Ahmst_key").val("");
        $("#ledgername").val("");
        $("#acgrpname").val("");
        $("#customertype").val("");
        $("#scheme").val("");
        $("#openingbalance").val("");
        $("#creditdays").val("");
        $("#creditlimit").val("");
        $("#Address").val("");
        $("#Area").val("");
        $("#phone").val("");
        $("#mobile").val("");
        $("#email").val("");
        $("#group").val("");
        $('#acgrpid').val("");
        $('#acgrpname').val("");
        $('#customertype').val("");
        $('#customertypeid').val("");
        $('#scheme').val("");
        $('#schemeid').val("");
        $('#openingbalance').val("");
        $('#creditdays').val("");
        $('#AhMst_CrLimit').val("");
        $('#Address').val("");
        $('#Area').val("");
        $('#Areaid').val("");
        $('#phone').val("");
        $('#mobile').val("");
        $('#email').val("");
        $('#Description').val("");
        $('#discount').val("");
        $('#testdiscount').val("");
        $('#amt').val("0.00");
        $('#avoidletterhead').val("");
        $("#avoidletterhead").prop('checked', false);
        $("#chkEmailReport").prop('checked', false);
        $("#isactive").prop('checked', false);
        $("#mode").val("");
        //$('#mode option:selected').text("");
        $("#cd").val("");
        //location.reload();
    });
    $('#accledgExit').click(function () {
        $('#closeaccledger').click();
        //location.reload();
    });

    //$(document).fcs(".fcs");
    $(document).ready(function () {

        $("#empname").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#userempsrch").click();
            }
        })
        $("#ledgername").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#accledg").click();

            }
        })
        $("#acgrpname").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#accgrp").click();

            }
        })
        $("#group").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#grptype").click();
            }
        })
        $("#customertype").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#custtype").click();
            }
        })
        $("#scheme").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#schme").click();

            }
        })

        $("#namesrch").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#hospitalsrch").click();

            }
        })
        $("#areaname").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#srcharea").click();

            }
        })
        $("#Specialisedname").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#srchspec").click();

            }
        })
        $("#employeename").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#employeesrch").click();

            }
        })
        $("#emparea").keyup(function (event) {
            if (event.keyCode == 120) {
                $("#empareasrch").click();

            }
        })

    })


    //******** ACCOUNTLEDGER POPUP-WINDOW *******************

    $(document).on('click ', '#accountledgload', function () {

        $('#ledgername').focus();

    })

    $(document).on('click ', '#newacc', function () {

        $('#ledgername').focus();

    })

    $(document).on('click', '#accledg', function () {

        event.preventDefault();
        $('#spinner-div').show();
        $('#lookuptb tbody').empty();

        $.trim($("#txt").val(""));

        $.ajax({
            type: 'GET',
            url: '/LISFY/GetACCOUNTNAME',
            data: {},
            dataType: 'json',
            success: function (data) {

                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=rowledger>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=width:60px;text-align:left>" + item.AhMst_Type + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                    + "</tr>";
                });
                $("#modelsize").css("width","500");
                $("#header").css("width", "400");
                $("#header2").css("width","60")
                $("#txt").css("width", "300");
                $("#header3").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#lookupLabel").html("Account,Code,Type");
                $("#header").html("Account Name");
                $("#searchlookup").css("left", "8%");
                $("#header2").show();
                $("#header2").html("Type");
                $('#featuredSelectField option[value="1"]').text('Account');
                $('#featuredSelectField option[value="2"]').text('Code');
                $('#featuredSelectField option[value="3"]').text('Type');;


                $("#lookuptb").append(rows);


                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
            },
            complete: function () {
                $('#spinner-div').hide();
            },
            error: function (emp) {
                alert('error');
            }

        })

    })


    $(document).ready(function () {
        $('body').on('click', '.rowledger', function () {
            event.preventDefault();
            $("#lookuptb tr").removeClass('highlight_file');
            $(this).addClass('highlight_file');

            $('#lookuptb tbody').live('keydown', function (e) {

                event.preventDefault();
                e.stopPropagation();
                const key = event.key;
                if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                    e.preventDefault();
                }
            }, false);
            function highlight(tableIndex) {
                var parent = $("#selector");

                if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;
                if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                    $('#lookuptb tbody tr').removeClass('highlight');
                    var currentEl = $('#ledgertb tbody tr:eq(' + tableIndex + ')');
                    $("#lookuptb tr").removeClass('highlight_file');
                    currentEl.addClass('highlight_file');
                    if (currentEl.offset().top > parent.height()) {
                        parent[0].scrollTop = currentEl[0].offsetTop;
                    }
                    if (currentEl.offset().top < 0) {
                        parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#ledgertb tbody tr').first().height();
                    }
                }
            }


            $("#lookuptb tr").keydown(function (e) {

                switch (e.which) {
                    case 38:

                        highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                        break;
                    case 40:
                        highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                        break;
                    case 13:

                        var ledgername = $('#lookuptb tbody tr.highlight_file td:first').text();
                        var ledgerid = $('#lookuptb tbody tr.highlight_file td:eq(2)').text();
                        $("#ledgername").val(ledgername);
                        $.ajax({
                            type: 'POST',
                            url: '/LISFY/ACCOUNTLEDGERDISPLAY',

                            data: { ledgername: ledgername, ledgerid: ledgerid },
                            dataType: 'json',
                            success: function (data) {

                                var rows;
                                $.each(data, function (i, item) {

                                    var x = item.splrchk;
                                    gl = x;
                                    $('#acgrpid').val(item.txtACgrpId);
                                    $('#acgrpname').val(item.txtACgrpName);
                                    $('#customertype').val(item.txtCustType);
                                    $('#Ahmst_key').val(ledgerid);
                                    $('#customertypeid').val(item.txtCustTypeid);

                                    $('#scheme').val(item.txtScheme);

                                    $('#schemeid').val(item.txtSchemeid);

                                    $('#openingbalance').val(item.OpAmt);

                                    $('#creditdays').val(item.txtcrDays);
                                    $('#creditlimit').val(item.txtCreditLmt);

                                    $('#Address').val(item.txtAddress);
                                    $('#Area').val(item.txtArea);
                                    $('#Areaid').val(item.txtAreaid);
                                    $('#phone').val(item.txtPhone);
                                    $('#mobile').val(item.txtMobile);
                                    $('#email').val(item.txtEmail);
                                    $('#Description').val(item.txtDescrpton);
                                    $('#discount').val(item.txtDiscount);
                                    $('#testdiscount').val(item.txtTstDiscPer);
                                    $('#amt').val(item.txtCur);
                                    if (item.chkAvoidLH == 1) {
                                        $('#avoidletterhead').prop('checked', true);
                                    }
                                    if (item.chkEmailReport == 1) {
                                        $('#chkEmailReport').prop('checked', true);
                                    }
                                    if (item.chkIsActive == 1) {
                                        $('#isactive').prop('checked', true);
                                    }
                                    $("#group").val(item.txtGroup);
                                    $("#GPid").val(item.txtGroupid);
                                    $('#mode option:selected').text(item.cmbPayType);
                                    $("#cd option:selected").text(item.cmbOpnType);
                                    $(".searchledgerclose").trigger('click');

                                })
                                $(".searchledgerclose").trigger('click');
                            }

                        })

                        $(".searchledgerclose").trigger('click');
                        break;
                }
            })
        });
    })
    $('body').on('dblclick', '.rowledger', function (evt) {
        event.preventDefault();

        var ledgername = $(this).find("td:eq(0)").text();
        var ledgerid = $(this).find("td:eq(2)").text();
        $("#ledgername").val(ledgername);
        $.ajax({
            type: 'POST',
            url: '/LISFY/ACCOUNTLEDGERDISPLAY',
            data: { ledgername: ledgername, ledgerid: ledgerid },
            dataType: 'json',
            success: function (data) {

                var rows;
                $.each(data, function (i, item) {
                    var x = item.splrchk;
                    gl = x;
                    $('#acgrpid').val(item.txtACgrpId)
                    $('#acgrpname').val(item.txtACgrpName)
                    $('#customertype').val(item.txtCustType)
                    $('#Ahmst_key').val(ledgerid);
                    $('#customertypeid').val(item.txtCustTypeid)

                    $('#scheme').val(item.txtScheme)

                    $('#schemeid').val(item.txtSchemeid)

                    $('#openingbalance').val(item.OpAmt)

                    $('#creditdays').val(item.txtcrDays)
                    $('#creditlimit').val(item.txtCreditLmt)

                    $('#Address').val(item.txtAddress)
                    $('#Area').val(item.txtArea)
                    $('#Areaid').val(item.txtAreaid)
                    $('#phone').val(item.txtPhone)
                    $('#mobile').val(item.txtMobile)
                    $('#email').val(item.txtEmail)
                    $('#Description').val(item.txtDescrpton)
                    $('#discount').val(item.txtDiscount)
                    $('#testdiscount').val(item.txtTstDiscPer)
                    $('#amt').val(item.txtCur)
                    if (item.chkAvoidLH == 1) {
                        $('#avoidletterhead').prop('checked', true);
                    }
                    else {
                        $('#avoidletterhead').prop('checked', false);
                    }
                    if (item.chkEmailReport == 1) {
                        $('#chkEmailReport').prop('checked', true);
                    }
                    else {
                        $('#chkEmailReport').prop('checked', false);
                    }
                    if (item.chkIsActive == 1) {
                        $('#isactive').prop('checked', true);
                    }
                    else {
                        $('#isactive').prop('checked', false);
                    }
                    $("#group").val(item.txtGroup);
                    $("#GPid").val(item.txtGroupid);
                    $('#mode option:selected').text(item.cmbPayType);
                    $("#cd option:selected").text(item.cmbOpnType);
                    $(".searchledgerclose").trigger('click');

                })
            }

        })
        $(".searchledgerclose").trigger('click');

    })
    //$('#featuredSelectField').change(function (event) {
    //    event.preventDefault();
    //    var selectedValue = $(this).find('option:selected').text();

    //    if (selectedValue == 'Code') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectsearch',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue, 'selectflag': 0 },
    //            success: function (data) {
    //                $('#ledgertb tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rowledger>"
    //                    + "<td>" + item.AhMst_pName + "</td>"
    //                    + "<td>" + item.AhMst_Type + "</td>"
    //                    + "<td style=display:none>" + item.AhMst_key + "</td>"
    //                    + "</tr>";
    //                    $('#ledgertb').append(rows);
    //                });
    //                $("#txt").keyup(function () {
    //                    var accountledgername = $.trim($("#txt").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/ACCOUNTLEDGER/SEARCHACCOUTLEDGERCode",
    //                        data: "{accountledgername:'" + accountledgername + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#ledgertb");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#ledgertb tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.AhMst_pName).css('background', '');
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(1).html(data.AhMst_Type).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })
    //            },
    //            error: function (data) { }
    //        });


    //    }
    //    else if (selectedValue == 'Type') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectsearch',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue, 'selectflag': 1 },
    //            success: function (data) {
    //                $('#ledgertb tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rowledger>"
    //                    + "<td> " + item.AhMst_pName + "</td>"
    //                    + "<td>" + item.AhMst_Type + "</td>"
    //                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
    //                    + "</tr>";
    //                    $('#ledgertb').append(rows);
    //                });



        //            $("#txt").keyup(function () {
        //                var accountledgername = $.trim($("#txt").val());
        //                $.ajax({
        //                    type: "POST",
        //                    url: "/LISFY/SEARCHACCOUTLEDGERtype",
        //                    data: "{accountledgername:'" + accountledgername + "'}",
        //                    contentType: "application/json; charset=utf-8",
        //                    dataType: "json",
        //                    success: function (data) {
        //                        var table = $("#ledgertb");
        //                        table.find("tr:not(:first)").remove();
        //                        $.each(data, function (i, data) {
        //                            var table = $("#ledgertb tbody");

        //                            var row = table[0].insertRow(-1);
        //                            $(row).append("<td />");
        //                            $(row).find("td").eq(0).html(data.AhMst_pName).css('background', '');
        //                            $(row).append("<td />");
        //                            $(row).find("td").eq(1).html(data.AhMst_Type).css('background', '');

        //                        });
        //                    }
        //                })
        //            })
        //        },
        //        error: function (data) { }
        //    });
        //}
        //else {
        //    (selectedValue == 'Account')
        //    $.ajax({
        //        type: 'POST',
        //        url: '/LISFY/selectsearch',
        //        datatype: JSON,
        //        data: { 'selectedValue': selectedValue, 'selectflag': 2 },
        //        success: function (data) {
        //            $('#ledgertb tbody').empty();

        //            $.each(data, function (i, item) {
        //                var rows = "<tr class=rowledger>"
        //                + "<td>" + item.AhMst_pName + "</td>"
        //                + "<td>" + item.AhMst_Type + "</td>"
        //                + "<td style=display:none>" + item.AhMst_Key + "</td>"
        //                + "</tr>";
        //                $('#ledgertb').append(rows);
        //            });
    //                $("#txt").keyup(function () {
    //                    var accountledgername = $.trim($("#txt").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHACCOUTLEDGERAccount",
    //                        data: "{accountledgername:'" + accountledgername + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#ledgertb");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#ledgertb tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.AhMst_pName).css('background', '');
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(1).html(data.AhMst_Type).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })
    //            },
    //            error: function (data) { }
    //        });
    //    }

    //})


    $(document).on('click', '#accgrp', function () {
        event.preventDefault();

        $('#lookuptb tbody').empty();
        $.trim($("#txt").val(""));
        $(document).ready(function () {
            event.preventDefault();
            $.ajax({
                type: 'GET',
                url: '/LISFY/Getaccountgrp',
                data: {},
                dataType: 'json',
                success: function (data) {

                    var rows;
                    $('#lookuptb tbody').empty();
                    $.each(data, function (i, item) {
                        rows += "<tr class=rowAcGrp>"
                        + "<td style=width:400px;text-align:left>" + item.AcGrp_GrpName + "</td>"
                        + "<td style=display:none>" + item.AcGrp_Key + "</td>"
                        + "</tr>";
                    });


                    $("#modelsize").css("width", "400");
                    $("#header3").hide();
                    $("#header4").hide();
                    $("#header5").hide();
                    $("#header6").hide();
                    $("#header7").hide();
                    $("#header8").hide();
                    $("#header9").hide();
                    $("#header").css("width", "400");
                    $("#txt").css("width", "200");
                    $("#searchlookup").css("left", "8%");
                    $('#featuredSelectField option[value="1"]').text('AccountGroup');
                    $('#featuredSelectField option[value="2"]').text('Id');
                    $('#featuredSelectField option[value="3"]').hide();
                    $("#lookupLabel").html("AccountGroup");
                    $("#header").html("AccountGroup");
                    $("#header2").hide();
                    $("#lookuptb").append(rows);

                    $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                },
                error: function (emp) {
                    alert('error');
                }
            });
        })
    })

//******* SEARCH LOOKUP ENTRY *************
    $('#txt').keyup(function () {

        search_table($(this).val());
    });
    function search_table(value){
        $('#lookuptb tr').each(function () {
            var found = 'false';
            $(this).each(function(){
                if($(this).text().toLowerCase().indexOf(value.toLowerCase()) >= 0)
                {
                    found = 'true';
                }
            });
            if(found == 'true')
            {
                $(this).show();
            }
            else
            {
                $(this).hide();
            }

        });
    }
    //*******  END-SEARCH LOOKUP ENTRY *************

    $(document).on('click', '#schme', function () {
        event.preventDefault();

        $('#lookuptb tbody').empty();
        $.trim($("#txt").val(""));
        $(document).ready(function () {
            event.preventDefault();
            $.ajax({
                type: 'GET',
                url: '/LISFY/GETSCHEME',
                data: {},
                dataType: 'json',
                success: function (data) {
                    $('#lookuptb tbody').empty();
                    var rows;
                    $.each(data, function (i, item) {
                        rows += "<tr class=rowschme>"
                        + "<td style=width:400px;text-align:left>" + item.Mstr_Desc + "</td>"
                        + "<td style=display:none>" + item.Mstr_Key + "</td>"
                        + "</tr>";

                    });

                    $("#modelsize").css("width", "400");
                    $("#header3").hide();
                    $("#header4").hide();
                    $("#header5").hide();
                    $("#header6").hide();
                    $("#header7").hide();
                    $("#header8").hide();
                    $("#header9").hide();
                    $("#txt").css("width", "200");
                    $('#featuredSelectField option[value="1"]').text('SchmeName');
                    $('#featuredSelectField option[value="2"]').text('Code');
                    $('#featuredSelectField option[value="3"]').hide();
                    $("#lookupLabel").html("Scheme");
                    $("#header").html("SchemeName");
                    $("#header2").hide();
                    $("#lookuptb").append(rows);
                    $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                },
                error: function (emp) {
                    alert('error');
                }
            });
        })
    })

    $(document).on('click', '#custtype', function () {
        event.preventDefault();

        $('#lookuptb tbody').empty();
        $.trim($("#txt").val(""));
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETCUSTTYPE',
            data: {},
            dataType: 'json',
            success: function (data1) {
                $('#lookuptb tbody').empty();
                var rows1;
                $.each(data1, function (i, item1) {
                    rows1 += "<tr class=rowcust>"
                    + "<td style=width:400px;text-align:right> " + item1.Mstr_Desc + "</td>"
                    + "<td style=display:none >" + item1.Mstr_Key + "</td>"
                    + "</tr>";
                });

                $("#modelsize").css("width", "400");
                $("#searchlookup").css("left", "8%");
                $("#txt").css("width", "200");
                $('#featuredSelectField option[value="1"]').text('CustomerType');
                $('#featuredSelectField option[value="2"]').text('Code');
                $('#featuredSelectField option[value="3"]').hide();
                $("#lookupLabel").html("CustomerType");
                $("#header").html("CustomerType");
                $("#header").css("width", "400");

                $("#header2").hide();
                $("#header3").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#lookuptb").append(rows1);

                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
            },
            error: function (emp) {
                alert('error');
            }

        });
    })

    $(document).on('click', '#grptype', function () {

        event.preventDefault();

        $.trim($("#txt").val(""));
        $('#lookuptb tbody').empty();

        var table = $("#lookuptb").find('tbody');

        $.ajax({
            type: 'GET',
            url: '/LISFY/GETGROUP',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=rowsgrp>"
                    + "<td style=width:400px;text-align:left>" + item.HEAD + "</td>"
                    + "<td style=display:none>" + item.CODE + "</td>"

                    + "</tr>";
                });
                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");
                $("#header3").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#header").css("width", "400");
                $('#featuredSelectField option[value="1"]').text('Group');
                $('#featuredSelectField option[value="2"]').text('Code');
                $('#featuredSelectField option[value="3"]').hide();
                $("#lookupLabel").html("Group");
                $("#searchlookup").css("left", "8%");
                $("#header").html("Group");
                $("#header2").hide();
                $("#lookuptb").append(rows);

                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
            },
            error: function (emp) {
                alert('error');
            }
        });
    })

    $('body').on('click', '.rowsgrp', function () {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#scrollselector");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }
        document.onkeydown = function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);
                    break;
                case 13:
                    var grpname = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var grpnameid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();
                    $("#group").val(grpname);
                    $("#GPid").val(grpnameid);
                    setTimeout(function () {

                        $(".searchledgerclose").trigger('click');
                    }, 500)

                    break;
                    $(".searchledgerclose").trigger('click');

            }

        }
    });

    $('body').on('dblclick', '.rowsgrp', function () {
        event.preventDefault();

        var grpname = $(this).find("td:eq(0)").text();
        var grpnameid = $(this).find("td:eq(1)").text();

        $("#group").val(grpname);
        $("#GPid").val(grpnameid);
        $(".searchledgerclose").trigger('click');
    })
    $("#phone").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#mobile").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#discount").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#testdiscount").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#creditdays").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#creditlimit").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#openingbalance").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    //********** SAVE ACCOUNTLEDGER ***************
    $(document).on('click', '#saveaccount', function () {
        event.preventDefault();
        $('#saveaccount').prop('disabled', true);
        var gl = 0;
        var ah = {};
        ah.AhMst_Key = $("#Ahmst_key").val();
        ah.AhMst_pName = $("#ledgername").val();
        ah.txtACgrpId = $("#acgrpid").val();
        ah.txtGroupid = $("#GPid").val();
        ah.txtCustTypeid = $("#customertypeid").val();
        ah.txtSchemeid = $("#schemeid").val();
        ah.txtScheme = $("#scheme").val();
        ah.OPBALANCE = $("#openingbalance").val();
        ah.AhMst_CRDays = $("#creditdays").val();
        ah.AhMst_CrLimit = $("#creditlimit").val();
        ah.AhMst_Address = $("#Address").val();
        ah.AhMst_AreaID = $("#Areaid").val();
        ah.txtArea = $("#Area").val();
        ah.AhMst_Phno = $("#phone").val();
        ah.AhMst_mobile = $("#mobile").val();
        ah.AhMst_Email = $("#email").val();
        ah.AhMst_Note = $("#Description").val();
        ah.AhMst_DiscPer = $("#discount").val();
        ah.AhMst_TstDiscPer = $("#testdiscount").val();
        ah.IsAvdLettHead = $("#avoidletterhead").val();
        ah.chkIsActive = $("#isactive").val();
        ah.cmbPayType = $('#mode option:selected').text();
        ah.cmbOpnType = $("#cd option:selected").text();

        ah.chkEmailReport = $("chkEmailReport").val();

        var IsAvdLettHead = 0;
        if ($("#avoidletterhead").is(':checked') === true) {
            ah.IsAvdLettHead = 1;
        }

        var IsAvdHd = 0;
        if ($("#avoidletterhead").is(':checked') === true) {
            ah.IsAvdHd = 1;
        }
        var SendMail = 0;
        if ($("#chkEmailReport").is(':checked') === true) {
            ah.SendMail = 1;
            if ($("#email").val() == "") {

                alert("invalid email");
                $("#email").focus();
                return false;
            }
        }
        var IsActive = 0;
        if ($("#isactive").is(':checked') === true) {
            ah.IsActive = 1;
        }

        var email = $("#email").val();
        var phono = $.trim($("#phone").val());
        //
        var mobile = $.trim($("#mobile").val());
        var expr = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        if ($("#email").val() !== "") {
            if (!expr.test(email)) {
                alert("invalid email address!!!");
                $("#email").focus();
                return false;
            }
        }

        if ($("#scheme").val() == "") {
            $.ajax({
                type: "POST",
                url: "/LISFY/SAVEVIEWACCOUTLEDGER",
                data: JSON.stringify(ah),
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (data) {


                    if ($("#ledgername").val().trim() != "") {
                        if ($("#acgrpname").val().trim() != "") {
                            alert("successfully saved");
                            $('#saveaccount').prop('disabled', false);
                            $("#Ahmst_key").val("");
                            $("#ledgername").val("");
                            $("#acgrpname").val("");
                            $("#customertype").val("");
                            $("#scheme").val("");
                            $("#openingbalance").val("");
                            $("#creditdays").val("");
                            $("#creditlimit").val("");
                            $("#Address").val("");
                            $("#Area").val("");
                            $("#phone").val("");
                            $("#mobile").val("");
                            $("#email").val("");
                            $("#group").val("");
                            $('#acgrpid').val("");
                            $('#acgrpname').val("");
                            $('#customertype').val("");
                            $('#customertypeid').val("");

                            $('#scheme').val("");

                            $('#schemeid').val("");

                            $('#openingbalance').val("");

                            $('#creditdays').val("");
                            $('#AhMst_CrLimit').val("");
                            $('#Address').val("");
                            $('#Area').val("");
                            $('#Areaid').val("");
                            $('#phone').val("");
                            $('#mobile').val("");
                            $('#email').val("");
                            $('#Description').val("");
                            $('#discount').val("");
                            $('#testdiscount').val("");
                            $('#amt').val("0.00");
                            $('#avoidletterhead').val("");
                            $("#avoidletterhead").prop('checked', false);
                            $("#chkEmailReport").prop('checked', false);
                            $("#isactive").prop('checked', false);

                            $("#mode").val("");
                            $("#cd").val("");


                        }
                        else {
                            alert("Empty AccountGroup");
                            $("#acgrpname").focus();
                            $('#saveaccount').prop('disabled', false);
                        }
                    }
                    else {
                        alert("Empty AccountLedger");
                        $("#ledgername").focus();
                        $('#saveaccount').prop('disabled', false);

                    }


                },

                failure: function () {
                    alert("not successfull");
                }


            });




        }
        else {
            var sprate = {};
            sprate.AhMst_Key = $("#Ahmst_key").val();
            var ahmstkey = $("#Ahmst_key").val();
            $.ajax({
                type: 'POST',
                url: '/LISFY/SPLACCOUTLEDGER',
                data: JSON.stringify(sprate),
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $.ajax({
                        type: "POST",
                        url: "/LISFY/SAVEVIEWACCOUTLEDGER",
                        data: JSON.stringify(ah),
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",

                        success: function (data) {


                            if ($("#ledgername").val().trim() != "") {
                                if ($("#acgrpname").val().trim() != "") {
                                    alert("successfully saved");

                                    $("#Ahmst_key").val("");
                                    $("#ledgername").val("");
                                    $("#acgrpname").val("");
                                    $("#customertype").val("");
                                    $("#scheme").val("");
                                    $("#openingbalance").val("");
                                    $("#creditdays").val("");
                                    $("#creditlimit").val("");
                                    $("#Address").val("");
                                    $("#Area").val("");
                                    $("#phone").val("");
                                    $("#mobile").val("");
                                    $("#email").val("");
                                    $("#group").val("");
                                    $('#acgrpid').val("");
                                    $('#acgrpname').val("");
                                    $('#customertype').val("");
                                    $('#customertypeid').val("");

                                    $('#scheme').val("");

                                    $('#schemeid').val("");

                                    $('#openingbalance').val("");

                                    $('#creditdays').val("");
                                    $('#AhMst_CrLimit').val("");
                                    $('#Address').val("");
                                    $('#Area').val("");
                                    $('#Areaid').val("");
                                    $('#phone').val("");
                                    $('#mobile').val("");
                                    $('#email').val("");
                                    $('#Description').val("");
                                    $('#discount').val("");
                                    $('#testdiscount').val("");
                                    $('#amt').val("0.00");
                                    $('#avoidletterhead').val("");
                                    $("#avoidletterhead").prop('checked', false);
                                    $("#chkEmailReport").prop('checked', false);
                                    $("#isactive").prop('checked', false);
                                    $("#mode").val("");
                                    $("#cd").val("");


                                }
                                else {
                                    alert("Empty AccountGroup");
                                    $("#acgrpname").focus();
                                }
                            }
                            else {
                                alert("Empty AccountLedger");
                                $("#ledgername").focus();

                            }


                        },

                        failure: function () {
                            alert("not successfull");
                        }


                    });
                    if (data.Result === "This Account is Already Set Special Rates") {


                        if (confirm('This Account is Already Set Special Rates,Are You Sure to Delete Special Rates & Continue With This Scheme Rates?')) {

                            $.ajax({
                                type: "POST",
                                url: "/LISFY/SAVEVIEWACCOUTLEDGER",
                                data: JSON.stringify(ah),
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",

                                success: function (data) {


                                    if ($("#ledgername").val().trim() != "") {
                                        if ($("#acgrpname").val().trim() != "") {
                                            alert("successfully saved");

                                            $("#Ahmst_key").val("");
                                            $("#ledgername").val("");
                                            $("#acgrpname").val("");
                                            $("#customertype").val("");
                                            $("#scheme").val("");
                                            $("#openingbalance").val("");
                                            $("#creditdays").val("");
                                            $("#creditlimit").val("");
                                            $("#Address").val("");
                                            $("#Area").val("");
                                            $("#phone").val("");
                                            $("#mobile").val("");
                                            $("#email").val("");
                                            $("#group").val("");
                                            $('#acgrpid').val("");
                                            $('#acgrpname').val("");
                                            $('#customertype').val("");
                                            $('#customertypeid').val("");

                                            $('#scheme').val("");

                                            $('#schemeid').val("");

                                            $('#openingbalance').val("");

                                            $('#creditdays').val("");
                                            $('#AhMst_CrLimit').val("");
                                            $('#Address').val("");
                                            $('#Area').val("");
                                            $('#Areaid').val("");
                                            $('#phone').val("");
                                            $('#mobile').val("");
                                            $('#email').val("");
                                            $('#Description').val("");
                                            $('#discount').val("");
                                            $('#testdiscount').val("");
                                            $('#amt').val("0.00");
                                            $('#avoidletterhead').val("");
                                            $("#avoidletterhead").prop('checked', false);
                                            $("#chkEmailReport").prop('checked', false);
                                            $("#isactive").prop('checked', false);
                                            $("#mode").val("");

                                            $("#cd").val("");

                                        }
                                        else {
                                            alert("Empty AccountGroup");
                                            $("#acgrpname").focus();
                                        }
                                    }
                                    else {
                                        alert("Empty AccountLedger");
                                        $("#ledgername").focus();

                                    }


                                },

                                failure: function () {
                                    alert("not successfull");
                                }


                            });
                            return false;
                        }



                    }

                }
            })




        }


    })
    //**********END- SAVE ACCOUNTLEDGER ***************



    $('body').on('click', '.rowAcGrp', function (e) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#scrollselector");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }
        document.onkeydown = function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var accountgrpname = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var grpnameid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();
                    $("#acgrpname").val(accountgrpname);
                    $("#acgrpid").val(acgrpid);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchclose").trigger('click');
                    }, 500)
                    //$(".searchclose").trigger('click');
                    break;
            }

        }
    });
    $('body').on('dblclick', '.rowAcGrp', function (evt) {
        event.preventDefault();
        var accountgrpname = $(this).find("td:eq(0)").text();
        var acgrpid = $(this).find("td:eq(1)").text();
        $("#acgrpname").val(accountgrpname);
        $("#acgrpid").val(acgrpid);
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $(".searchledgerclose").trigger('click');
    })

    $('body').on('click', '.rowschme', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#scrollselector");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }
        document.onkeydown = function (e) {
            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var scheme = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var schemeid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();
                    $("#scheme").val(scheme);
                    $("#schemeid").val(schemeid);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchclose").trigger('click');
                    }, 500)

                    break

            }
        }
    });
    $('body').on('dblclick', '.rowschme', function (evt) {
        event.preventDefault();

        var scheme = $(this).find("td:eq(0)").text();
        var schemeid = $(this).find("td:eq(1)").text();
        $("#scheme").val(scheme);
        $("#schemeid").val(schemeid);

        $(".searchledgerclose").trigger('click');


    })
    $('body').on('click', '.rowcust', function (evt) {
        event.preventDefault();

        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#scrollselector");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }
        document.onkeydown = function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var customertype = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var customertypeid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();
                    $("#customertype").val(customertype);
                    $("#customertypeid").val(customertypeid);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchledgerclose").trigger('click');
                    }, 500)
                    break

            }
        }
    });
    $('body').on('dblclick', '.rowcust', function (evt) {
        event.preventDefault();

        var customertype = $(this).find("td:eq(0)").text();
        var customertypeid = $(this).find("td:eq(1)").text();
        $("#customertype").val(customertype);
        $("#customertypeid").val(customertypeid);
        $(".searchledgerclose").trigger('click');


    })

    //$('#schemeSelectField').change(function (e) {
    //    event.preventDefault();
    //    var selectedValue = $(this).find('option:selected').text();
    //    if (selectedValue == 'SchemeName') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/ACCOUNTLEDGER/selectscheme',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#Schmetb tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rowschme>"
    //                    + "<td>" + item.Mstr_Desc + "</td>"
    //                    + "<td style=display:none>" + item.Mstr_Key + "</td>"
    //                    + "</tr>";
    //                    $('#Schmetb').append(rows);
    //                });
    //                $("#txtscheme").keyup(function () {
    //                    event.preventDefault();
    //                    var schemetxt = $.trim($("#txtscheme").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHSHEMENAME",
    //                        data: "{schemetxt:'" + schemetxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#Schmetb");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#Schmetb tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.Mstr_Desc).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })
    //            },
    //            error: function (data) { }
    //        });
    //    }
    //    else {
    //        (selectedValue == 'Code')
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectschemecode',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#Schmetb tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rowschme>"
    //                    + "<td>" + item.Mstr_Desc + "</td>"
    //                    + "<td style=display:none>" + item.Mstr_Key + "</td>"


    //                    + "</tr>";
    //                    $('#Schmetb').append(rows);
    //                });
    //                $("#txtscheme").keyup(function () {
    //                    event.preventDefault();
    //                    var schemetxt = $.trim($("#txtscheme").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHSHEMECODE",
    //                        data: "{schemetxt:'" + schemetxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#Schmetb");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#Schmetb tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.Mstr_Desc).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })
    //            },
    //            error: function (data) { }
    //        });
    //    }

    //})

    //$('#grpSelectField').change(function (e) {
    //    event.preventDefault();
    //    var selectedValue = $(this).find('option:selected').text();
    //    if (selectedValue == 'GROUP') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectgrp',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#grp tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rowsgrp>"
    //                    + "<td>" + item.HEAD + "</td>"
    //                    + "<td style=display:none>" + item.CODE + "</td>"

    //                    + "</tr>";
    //                    $('#grp').append(rows);
    //                });
    //                $("#txtscheme").keyup(function () {
    //                    event.preventDefault();
    //                    var grptxt = $.trim($("#txtscheme").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHGRPNAME",
    //                        data: "{grptxt:'" + grptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#grp");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#grp tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.HEAD).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })
    //            },
    //            error: function (data) { }
    //        });
    //    }
    //    else {
    //        (selectedValue == 'Code')
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectgrpcode',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#grp tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rowsgrp>"
    //                    + "<td>" + item.HEAD + "</td>"
    //                    + "<td style=display:none>" + item.CODE + "</td>"
    //                    + "</tr>";


    //                    $('#grp').append(rows);
    //                });
    //                $("#txt").keyup(function () {
    //                    event.preventDefault();
    //                    var grptxt = $.trim($("#txt").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHGRPCODE",
    //                        data: "{grptxt:'" + grptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#lookuptb");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#lookuptb tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.HEAD).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })

    //            },
    //            error: function (data) { }
    //        });
    //    }

    //})

    //$('#accountgrpSelectField').change(function (e) {
    //    event.preventDefault();
    //    var selectedValue = $(this).find('option:selected').text();
    //    if (selectedValue == 'Code') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectaccgrp',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#accgrp1 tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rowAcGrp>"
    //                    + "<td>" + item.AcGrp_GrpName + "</td>"
    //                    + "<td style=display:none>" + item.AcGrp_Key + "</td>"
    //                    + "</tr>";
    //                    $('#accgrp1').append(rows);
    //                });
    //                //function search
    //                $("#txtscheme").keyup(function () {
    //                    event.preventDefault();
    //                    var accgrptxt = $.trim($("#txtscheme").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHACCGRPCODE",
    //                        data: "{accgrptxt:'" + accgrptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#accgrp1");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#accgrp1 tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.AcGrp_GrpName).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })

    //            },
    //            error: function (data) { }
    //        });
    //    }
    //    else {
    //        (selectedValue == 'AccountGroup')
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectaccgrpname',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#accgrp1 tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rowAcGrp>"
    //                    + "<td>" + item.AcGrp_GrpName + "</td>"
    //                    + "<td style=display:none>" + item.AcGrp_Key + "</td>"
    //                    + "</tr>";
    //                    $('#accgrp1').append(rows);
    //                });
    //                $("#txtscheme").keyup(function () {
    //                    event.preventDefault();
    //                    var accgrptxt = $.trim($("#txtscheme").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHACCGRPNAME",
    //                        data: "{accgrptxt:'" + accgrptxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#accgrp1");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#accgrp1 tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.AcGrp_GrpName).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })


    //            },
    //            error: function (data) { }
    //        });
    //    }

    //})

    //$('#custSelectField').change(function (e) {
    //    event.preventDefault();
    //    var selectedValue = $(this).find('option:selected').text();
    //    if (selectedValue == 'CustmerName') {
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectcust',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#Custtb tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rowcust>"
    //                    + "<td>" + item.Mstr_Desc + "</td>"
    //                    + "<td style=display:none>" + item.Mstr_Code + "</td>"
    //                    + "</tr>";
    //                    $('#Custtb').append(rows);
    //                });
    //                $("#txtscheme").keyup(function () {
    //                    event.preventDefault();
    //                    var custtxt = $.trim($("#txtscheme").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHCUSTNAME",
    //                        data: "{custtxt:'" + custtxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#Custtb");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#Custtb tbody");

    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.Mstr_Desc).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })

    //            },
    //            error: function (data) { }
    //        });
    //    }
    //    else {
    //        (selectedValue == 'Code')
    //        $.ajax({
    //            type: 'POST',
    //            url: '/LISFY/selectcustcode',
    //            datatype: JSON,
    //            data: { 'selectedValue': selectedValue },
    //            success: function (data) {
    //                $('#tCusttbb4 tbody').empty();

    //                $.each(data, function (i, item) {
    //                    var rows = "<tr class=rowcust>"
    //                    + "<td>" + item.Mstr_Desc + "</td>"
    //                    + "<td style=display:none>" + item.Mstr_Code + "</td>"
    //                    + "</tr>";


    //                    $('#Custtb').append(rows);
    //                });
    //                $("#txtscheme").keyup(function () {
    //                    event.preventDefault();
    //                    var custtxt = $.trim($("#txtscheme").val());
    //                    $.ajax({
    //                        type: "POST",
    //                        url: "/LISFY/SEARCHCUSTCODE",
    //                        data: "{custtxt:'" + custtxt + "'}",
    //                        contentType: "application/json; charset=utf-8",
    //                        dataType: "json",
    //                        success: function (data) {
    //                            var table = $("#Custtb");
    //                            table.find("tr:not(:first)").remove();
    //                            $.each(data, function (i, data) {
    //                                var table = $("#Custtb tbody");
    //                                var row = table[0].insertRow(-1);
    //                                $(row).append("<td />");
    //                                $(row).find("td").eq(0).html(data.Mstr_Desc).css('background', '');

    //                            });
    //                        }
    //                    })
    //                })

    //            },
    //            error: function (data) { }
    //        });
    //    }

    //})
    $(document).ready(() => {

        event.preventDefault();
        $("#mode").load();
        $.ajax({


            url: '/LISFY/GETPAYMODE',
            data: {},
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",

            success: function (data) {

                var s = '';
                for (var i = 0; i < data.length; i++) {

                    s += '<option value="data[i].Mstr_Desc">' + data[i].Mstr_Desc + '</option>';
                }

                $("#mode").append(s);
            }
        });
    })
    $(document).on('click', '#newacc', function () {
        event.preventDefault();

        $("#Ahmst_key").val("");
        $("#ledgername").val("");
        $("#acgrpname").val("");
        $("#customertype").val("");
        $("#scheme").val("");
        $("#openingbalance").val("");
        $("#creditdays").val("");
        $("#creditlimit").val("");
        $("#Address").val("");
        $("#Area").val("");
        $("#phone").val("");
        $("#mobile").val("");
        $("#email").val("");
        $("#group").val("");
        $('#acgrpid').val("");
        $('#acgrpname').val("");
        $('#customertype').val("");
        $('#customertypeid').val("");
        $('#scheme').val("");
        $('#schemeid').val("");
        $('#openingbalance').val("");
        $('#creditdays').val("");
        $('#AhMst_CrLimit').val("");
        $('#Address').val("");
        $('#Area').val("");
        $('#Areaid').val("");
        $('#phone').val("");
        $('#mobile').val("");
        $('#email').val("");
        $('#Description').val("");
        $('#discount').val("");
        $('#testdiscount').val("");
        $('#amt').val("0.00");
        $('#avoidletterhead').val("");
        $("#avoidletterhead").prop('checked', false);
        $("#chkEmailReport").prop('checked', false);
        $("#isactive").prop('checked', false);
        $("#mode").val("");

        $("#cd").val("");

    })
    //******** END- ACCOUNTLEDGER POPUP-WINDOW *******************







    //************* LOOKUP-ENTRY-POPUPWINDW *************
    $(document).ready(() => {
        event.preventDefault();
        $("#savelookup").show();
        $("#updatelookup").hide();

        $.ajax({
            type: 'GET',
            url: '/LISFY/Getlookuptreeview',
            data: {},
            dataType: 'json',
            success: function (data) {

                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=rowlookup>"
                    + "<td>" + item.Mstr_Type + "</td>"
                    + "</tr>";
                });

                $("#Lckuptb").append(rows);


            },
            error: function (emp) {
                alert('error');
            }

        })
    })


    $('body').on('click', '.rowlookup', function () {
        event.preventDefault();
        $("#savelookup").show();
        $("#updatelookup").hide();
        $("#getlookup > tbody").empty();
        $("#codes").val("");
        $("#names").val("");
        $("#detailss").val("");
        $("#values").val("");
        $("#Mstr_key").val("");
        $("#mastertype").val("");
        $("#Lckuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        var row = $(this).find("td:eq(0)").text();
        $("#mastertype").val(row);

        $.ajax({
            type: 'GET',
            url: '/LISFY/Getdatalookup',
            data: { row: row },
            dataType: 'json',
            success: function (data) {
                var rows;
                $.each(data, function (i, item) {
                    i = i + 1;

                    rows += "<tr class=rowdata>"
                    + "<td>" + i + "</td>"
                    + "<td>" + item.Mstr_Code + "</td>"
                    + "<td>" + item.Mstr_Desc + "</td>"
                    + "<td>" + item.Mstr_Details + "</td>"
                    + "<td>" + item.Mstr_Value + "</td>"
                    + "<td style=display:none>" + item.Mstr_Key + "</td>"

                    + "</tr>";

                });


                $("#getlookup").append(rows);



            },
            error: function (emp) {
                alert('error');
            }

        })
    })


    $("body").on("click", "#getlookup tbody td", function () {
        $("#getlookup td").removeClass('highlight_file');
        $(this).addClass('highlight_file');

        var currentRow = $(this).closest("tr");
        var code1 = currentRow.find("td:eq(1)").text();
        $("#codes").val(code1);
        var name1 = currentRow.find("td:eq(2)").text();
        $("#names").val(name1);
        var details1 = currentRow.find("td:eq(3)").text();
        $("#detailss").val(details1);
        var values1 = currentRow.find("td:eq(4)").text();
        $("#values").val(values1);
        var msterkey = currentRow.find("td:eq(5)").text();
        $("#Mstr_key").val(msterkey);

        $("#savelookup").hide();

        $("#updatelookup").show();


    });
    //********* SAVE-LOOKUP-ENTRY***************
    $(document).on('click ', '#savelookup', function () {
        event.preventDefault();
        var lookup = {};
        lookup.codelookup = $("#codes").val();
        lookup.namelookup = $("#names").val();
        lookup.detailslookup = $("#detailss").val();
        lookup.valueslookup = $("#values").val();
        lookup.masterkeylookup = $("#Mstr_key").val();
        lookup.mastertype = $("#mastertype").val();

        $.ajax({
            type: "POST",
            url: "/LISFY/SAVELOOKUPENTRY",
            data: JSON.stringify(lookup),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $("#codes").val("");
                $("#names").val("");
                $("#detailss").val("");
                $("#values").val("");
                $("#Mstr_key").val("");
                $("#mastertype").val("");
                $("#savelookup").show();
                $("#updatelookup").hide();
                $("#getlookup > tbody").empty();
                var row = $('#Lckuptb tbody tr.highlight_file td:first').text();
                $("#mastertype").val(row);

                $.ajax({
                    type: 'GET',
                    url: '/LISFY/Getdatalookup',
                    data: { row: row },
                    dataType: 'json',
                    success: function (data) {

                        var rows;
                        $.each(data, function (i, item) {
                            i = i + 1;
                            rows += "<tr class=rowdata>"
                            + "<td>" + i + "</td>"
                            + "<td>" + item.Mstr_Code + "</td>"
                            + "<td>" + item.Mstr_Desc + "</td>"
                            + "<td>" + item.Mstr_Details + "</td>"
                            + "<td>" + item.Mstr_Value + "</td>"
                            + "<td style=display:none>" + item.Mstr_Key + "</td>"
                            + "</tr>";
                        });
                        $("#getlookup").append(rows);


                    },
                    error: function (emp) {
                        alert('error');
                    }

                })


            },
            failure: function () {
                alert("not successfull");
            },

            failure: function () {
                alert("not successfull");
            }
        });
    })
    //********* END-SAVE-LOOKUP-ENTRY***************

    //*********** UPDATE-LOOK-UP ENTRY****************
    $(document).on('click ', '#updatelookup', function () {
        event.preventDefault();
        var lookup = {};
        lookup.codelookup = $("#codes").val();
        lookup.namelookup = $("#names").val();
        lookup.detailslookup = $("#detailss").val();
        lookup.valueslookup = $("#values").val();
        lookup.masterkeylookup = $("#Mstr_key").val();
        lookup.mastertype = $("#mastertype").val();

        $.ajax({
            type: "POST",
            url: "/LISFY/UPDATELOOKUPENTRY",
            data: JSON.stringify(lookup),
            contentType: "application/json; charset=utf-8",
            dataType: "json",

            success: function (data) {
                alert("update successfully");
                $("#codes").val("");
                $("#names").val("");
                $("#detailss").val("");
                $("#values").val("");
                $("#Mstr_key").val("");
                $("#mastertype").val("");
                $("#savelookup").show();
                $("#updatelookup").hide();
                $("#getlookup > tbody").empty();
                var row = $('#Lckuptb tbody tr.highlight_file td:first').text();
                $("#mastertype").val(row);

                $.ajax({
                    type: 'GET',
                    url: '/LISFY/Getdatalookup',
                    data: { row: row },
                    dataType: 'json',
                    success: function (data) {
                        var rows;
                        $.each(data, function (i, item) {
                            i = i + 1;
                            rows += "<tr class=rowdata>"
                            + "<td>" + i + "</td>"
                            + "<td>" + item.Mstr_Code + "</td>"
                            + "<td>" + item.Mstr_Desc + "</td>"
                            + "<td>" + item.Mstr_Details + "</td>"
                            + "<td>" + item.Mstr_Value + "</td>"
                            + "<td style=display:none>" + item.Mstr_Key + "</td>"
                            + "</tr>";
                        });
                        $("#getlookup").append(rows);
                        //$("#getlookup tbody tr:last").clone().appendTo('#getlookup tbody').find("td").empty().attr('style', 'height:20px');

                    },
                    error: function (emp) {
                        alert('error');
                    }

                })


            },
            failure: function () {
                alert("not successfull");
            },


            failure: function () {
                alert("not successfull");
            }


        });
    })
    $(document).on('click ', '#savelookup', function () {
        event.preventDefault();
        var lookup = {};
        lookup.codelookup = $("#codes").val();
        lookup.namelookup = $("#names").val();
        lookup.detailslookup = $("#detailss").val();
        lookup.valueslookup = $("#values").val();
        lookup.masterkeylookup = $("#Mstr_key").val();
        lookup.mastertype = $("#mastertype").val();

        $.ajax({
            type: "POST",
            url: "/LISFY/SAVELOOKUPENTRY",
            data: JSON.stringify(lookup),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $("#codes").val("");
                $("#names").val("");
                $("#detailss").val("");
                $("#values").val("");
                $("#Mstr_key").val("");
                $("#mastertype").val("");
                $("#savelookup").show();
                $("#updatelookup").hide();
                $("#getlookup > tbody").empty();
                var row = $('#Lckuptb tbody tr.highlight_file td:first').text();
                $("#mastertype").val(row);

                $.ajax({
                    type: 'GET',
                    url: '/LISFY/Getdatalookup',
                    data: { row: row },
                    dataType: 'json',
                    success: function (data) {

                        var rows;
                        $.each(data, function (i, item) {
                            i = i + 1;
                            rows += "<tr class=rowdata>"
                            + "<td>" + i + "</td>"
                            + "<td>" + item.Mstr_Code + "</td>"
                            + "<td>" + item.Mstr_Desc + "</td>"
                            + "<td>" + item.Mstr_Details + "</td>"
                            + "<td>" + item.Mstr_Value + "</td>"
                            + "<td style=display:none>" + item.Mstr_Key + "</td>"
                            + "</tr>";
                        });
                        $("#getlookup").append(rows);


                    },
                    error: function (emp) {
                        alert('error');
                    }

                })


            },
            failure: function () {
                alert("not successfull");
            },

            failure: function () {
                alert("not successfull");
            }
        });
    })
    $('#Exitlookup').click(function () {
        location.reload();

    })
    $('#closelookup').click(function () {
        location.reload();

    })
    //// ******************* DELETE-LOOKUP-ENTRY*******************
    $(document).on('click ', '#dellookup', function () {
        event.preventDefault();
        var lookup = {};
        lookup.codelookup = $("#codes").val();
        lookup.namelookup = $("#names").val();
        lookup.detailslookup = $("#detailss").val();
        lookup.valueslookup = $("#values").val();
        lookup.masterkeylookup = $("#Mstr_key").val();
        lookup.mastertype = $("#mastertype").val();

        $.ajax({
            type: "POST",
            url: "/LISFY/DELETELOOKUPENTRY",
            data: JSON.stringify(lookup),
            contentType: "application/json; charset=utf-8",
            dataType: "json",

            success: function (data) {
                alert("delete successfully");
                $("#codes").val("");
                $("#names").val("");
                $("#detailss").val("");
                $("#values").val("");
                $("#Mstr_key").val("");
                $("#mastertype").val("");
                $("#savelookup").show();
                $("#updatelookup").hide();
                $("#getlookup > tbody").empty();
                var row = $('#Lckuptb tbody tr.highlight_file td:first').text();
                $("#mastertype").val(row);

                $.ajax({
                    type: 'GET',
                    url: '/LISFY/Getdatalookup',
                    data: { row: row },
                    dataType: 'json',
                    success: function (data) {

                        var rows;
                        $.each(data, function (i, item) {
                            i = i + 1;
                            rows += "<tr class=rowdata>"
                            + "<td>" + i + "</td>"
                            + "<td>" + item.Mstr_Code + "</td>"
                            + "<td>" + item.Mstr_Desc + "</td>"
                            + "<td>" + item.Mstr_Details + "</td>"
                            + "<td>" + item.Mstr_Value + "</td>"
                            + "<td style=display:none>" + item.Mstr_Key + "</td>"
                            + "</tr>";
                        });
                        $("#getlookup").append(rows);


                    },
                    error: function (emp) {
                        alert('error');
                    }

                })
            },
            failure: function () {
                alert("not successfull");
            },

            failure: function () {
                alert("not successfull");
            }
        });
    })
    //**************END-DELETE-LOOKUPENTRY***********************
    $(document).on('click ', '#refreshlook', function () {

        $("#codes").val("");
        $("#names").val("");
        $("#detailss").val("");
        $("#values").val("");
        $("#Mstr_key").val("");
        $("#mastertype").val("");
    })
    $(document).ready(() => {
        $('#Lckuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);
        function highlight(tableIndex) {
            var parent = $("#treeviewlookup");

            if ((tableIndex + 1) > $('#Lckuptb tbody tr').length) tableIndex = 0;
            if ($('#Lckuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#Lckuptb tbody tr').removeClass('highlight');
                var currentEl = $('#Lckuptb tbody tr:eq(' + tableIndex + ')');
                $("#Lckuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#Lckuptb tbody tr').first().height();
                }
            }
        }
    })

    document.onkeydown = function (e) {

        switch (e.which) {
            case 38:

                highlight($('#Lckuptb tbody tr.highlight_file').index() - 1);

                break;
            case 40:
                highlight($('#Lckuptb tbody tr.highlight_file').index() + 1);

                break;
            case 13:

                $("#savelookup").show();
                $("#updatelookup").hide();
                $("#getlookup > tbody").empty();
                $("#codes").val("");
                $("#names").val("");
                $("#detailss").val("");
                $("#values").val("");
                $("#Mstr_key").val("");
                $("#mastertype").val("");
                var row = $('#Lckuptb tbody tr.highlight_file td:first').text();
                $("#mastertype").val(row);

                $.ajax({
                    type: 'GET',
                    url: '/LISFY/Getdatalookup',
                    data: { row: row },
                    dataType: 'json',
                    success: function (data) {

                        var rows;
                        $.each(data, function (i, item) {
                            i = i + 1;
                            rows += "<tr class=rowdata>"
                            + "<td>" + i + "</td>"
                            + "<td>" + item.Mstr_Code + "</td>"
                            + "<td>" + item.Mstr_Desc + "</td>"
                            + "<td>" + item.Mstr_Details + "</td>"
                            + "<td>" + item.Mstr_Value + "</td>"
                            + "<td style=display:none>" + item.Mstr_Key + "</td>"
                            + "</tr>";
                        });
                        $("#getlookup").append(rows);


                    },
                    error: function (emp) {
                        alert('error');
                    }

                })


        }
    }
    $(document).ready(function () {

        $('#empdob').datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $('#empwday').datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $('#Day').datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });


        $('#editsampleon').datepicker({
            dateFormat: 'dd/mm/yy',
            onSelect: function (datetext) {
                dateFormat: 'dd/mm/yy'
                var old = ('#editsampleon').val();
                var split = old.split(" ");
                var time = split[1];
                var ampm = split[2];

                var d = new Date();

                datetext = d + " " + time + " " + ampm;
                $('#editsampleon').val(datetext);
            },
        });


        $('#editreporton').datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $('#todaydate').datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,

            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $('#pndfromdate').datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,

            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });

        $('#pndtodate').datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $('#pndcoldatetime').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });

        $('#uptodate').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $('#uptobillwise').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $('#uptobillwise1').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $('#fromdate').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });


        $('#chqDate1').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });



        $('#todaydate').datepicker('disable');

        $('#LblPateniId').text("");
        $('#pndtablediv').show();
        $('#pndviewdiv').hide();
        $('#pndcorpsrch').hide();

    })





    //$(document).ready(function () {
    //    $(document).fcs(".fcs");
    //})
    $('#closeemp').click(function () {
        $("#employeename").val("");
        $("#employeenameid").val("");
        $("#empaddress").val("");
        $("#empmobile").val("");
        $("#empphone").val("");
        $("#empemail").val("");
        $("#emparea").val("");
        $("#empareaid").val("");
        $("#empcntperson").val("");
        $("#empcntperson").val("");
        $("#empdob").val("@ViewBag.cashcurdate");
        $("#empwday").val("@ViewBag.cashcurdate");
        $("#empactive").prop('checked', true);
        $("input[type=date]").val("");
        $("#empmale").prop('checked', false);
        $("#empfemale").prop('checked', false);
        $("#empnote").val("");
        $("#empid").val("");
    })

   //************************SAVE-CANCEL-INVOICE****************************
    $(document).on('click', '#invsave', function (e) {
        e.preventDefault();
        $('#invsave').prop('disabled', true);
        var invoicesave = {};
        invoicesave.txtLabNo = $("#invoicelabno").val();
        invoicesave.invdatetime = $("#invdatetime").val();
        invoicesave.invname = $("#invname").val();
        invoicesave.invprefix = $("#invprefix").val();
        invoicesave.invdatebirth = $("#invdatebirth").val();
        var optMale = 0;
        if ($("#invmale").is(':checked') === true) {
            invoicesave.optMale = 1;
        }
        var optfeMale = 0;
        if ($("#invfemale").is(':checked') === true) {
            invoicesave.optMale = 1;
        }



        invoicesave.invphono = $("#invphono").val();
        invoicesave.invemail = $("#invemail").val();
        invoicesave.invrefby = $("#invrefby").val();
        invoicesave.invoutdr = $("#invoutdr").val();
        invoicesave.invbranch = $("#invbranch").val();
        invoicesave.invipopno = $("#invipopno").val();
        invoicesave.invcollmode = $("#invcolno").val();
        invoicesave.invcollby = $("#invcollby").val();
        invoicesave.sampleon = $("#invsampleon").val();
        invoicesave.reporton = $("#invreporton").val();
        var chkPersonally = 0
        if ($("#chkPersonally").is(':checked') === true) {
            invoicesave.chkPersonally = 1;
        }

        var chkTelephone = 0
        if ($("#chkTelephone").is(':checked') === true) {
            invoicesave.chkTelephone = 1;
        }
        var chkCourier = 0
        if ($("#chkCourier").is(':checked') === true) {
            invoicesave.chkCourier = 1;
        }
        var chkEmail = 0
        if ($("#chkEmail").is(':checked') === true) {
            invoicesave.chkCourier = 1;
        }
        var chkSms = 0
        if ($("#chkSms").is(':checked') === true) {
            invoicesave.chkSms = 1;
        }

        invoicesave.invamount = $("#invamount").val();
        invoicesave.txtReason = $("#invtextarea").val();
        var labnocancel = $("#invoicelabno").val();

        if ($("#invoicelabno").val() > 0) {
            confirm("Are You Sure You Want To Cancel LabNo :" + labnocancel + "");
            $.ajax({
                type: "POST",
                url: "/LISFY/SAVECANCELINVOICE",
                data: JSON.stringify(invoicesave),
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (data) {
                    if (data.Result === "Invalid Lab No") {
                        confirm("Invalid Lab No");
                        $("#invoicelabno").focus();
                        $('#invsave').prop('disabled', false);
                        return false;



                    }
                    if (data.Result === "Cancelled") {
                        confirm("Cancelled");
                        $('#invsave').prop('disabled', false);
                        $("#invoicelabno").val("");
                        $("#invdatetime").val("");
                        $("#invname").val("");
                        $("#invprefix").val("");
                        $("#invprefix").val("");
                        $("#invmale").prop('checked', false);
                        $("#invfemale").prop('checked', false);
                        $("#invphono").val("");
                        $("#invemail").val("");
                        $("#invoutdr").val("");
                        $("#invbranch").val("");
                        $("#invipopno").val("");
                        $("#invcolno").val("");
                        $("#invcollby").val("");
                        $("#invsampleon").val("");
                        $("#invreporton").val("");
                        $("#chkPersonally").prop('checked', false);
                        $("#chkTelephone").prop('checked', false);
                        $("#chkCourier").prop('checked', false);
                        $("#chkEmail").prop('checked', false);
                        $("#chkSms").prop('checked', false);
                        $("#invamount").val("");
                        $("#invtextarea").val("");
                        $("#invrefby").val("");

                        $("#invage").val("");
                        $("#invmonth").val("");
                        $("#invyear").val("");
                    }


                }


            })
        } else {

        }

    })
    //***********END-SAVE-CANCEL-INVOICE*****************************





    //*********************DISPLAY-CANCEL-INVOICE**************************
    $(document).ready(function () {
        $('#invoicelabno').bind("enterKey", function (e) {

            var labno = $("#invoicelabno").val();


            $.ajax({
                type: 'POST',
                url: '/LISFY/DISPLAYCANCELINVOICE',
                data: { labno: labno },
                dataType: 'json',
                success: function (data) {

                    $.each(data, function (i, item) {

                        if (data.Result === "Already Cancelled") {
                            confirm("Lab No : " + labno + " Already Cancelled");
                            $('#invoicelabno').focus();
                            $('#invoicelabno').val("");
                            return false;
                            $('#invoicelabno').val("");


                        }

                        $('#invoicelabno').val(item.txtLabNo);

                        $('#invoicelabnoid').val(item.txtLabNo);
                        $('#invname').val(item.invname);
                        $('#invprefix').val(item.invprefix);
                        if (item.invmale == 1) {
                            $('#invmale').prop('checked', true);
                        }
                        if (item.invfemale == 1) {
                            $('#invfemale').prop('checked', true);
                        }
                        $('#invphono').val(item.invphono);
                        $('#invemail').val(item.invemail);
                        $('#invrefby').val(item.invrefby);
                        $('#invrefbyid').val(item.invrefbyid);
                        $('#invoutdr').val(item.invoutdr);
                        $('#invbranchid').val(item.invbranchid);
                        $('#invbranch').val(item.invbranch);
                        $('#invipopno').val(item.invipopno);
                        $('#invsampleon').val(item.sampleon);
                        $('#invreporton').val(item.reporton);
                        $('#invamount').val(item.invamount);
                        $('#invcollby').val(item.invcollby);
                        $('#invage').val(item.invage);
                        $('#invmonth').val(item.invmonth);
                        $('#invyear').val(item.invyear);


                        $('#invcollbyid').val(item.txtCollByid);

                        if (item.chkPersonally == 1) {
                            $('#chkPersonally').prop('checked', true);
                        }
                        if (item.chkTelephone == 1) {
                            $('#chkTelephone').prop('checked', true);
                        }
                        if (item.chkCourier == 1) {
                            $('#chkCourier').prop('checked', true);
                        }
                        if (item.chkEmail == 1) {
                            $('#chkEmail').prop('checked', true);
                        }
                        if (item.chkSms == 1) {
                            $('#chkSms').prop('checked', true);



                        }
                        $("#invtextarea").focus();


                    })
                }

            })




        });
        $('#invoicelabno').keyup(function (e) {
            if (e.keyCode == 13) {
                $(this).trigger("enterKey");
            }
        });
    });


    //*********************END-DISPLAY-CANCEL-INVOICE*********************************





//***********************DISPLAY-EDITINVOICE********************************
    $(document).ready(function () {
        $('#editlabno').bind("enterKey", function (e) {

            var editlabno = $("#editlabno").val();
            $.ajax({
                type: 'POST',
                url: '/LISFY/DISPLAYEDITINVOICE',
                data: { editlabno: editlabno },
                dataType: 'json',
                success: function (data) {
                    if (data.Result === "Record Not Found") {
                        alert("Record Not Found");
                        return false;
                    }

                    $.each(data, function (i, item) {

                        var pat;

                        pat = item.LblPateniId;
                        $('#LblPateniId').val(item.LblPateniId);
                        if (pat == "") {
                            $("#editprefix").prop("readonly", false);
                            $("#editname").prop("readonly", false);
                            $("#editnameid").prop("readonly", false);
                            $("#editinvage").prop("readonly", false);
                            $("#editinvmonth").prop("readonly", false);
                            $("#editinvyear").prop("readonly", false);
                            $("#editphone").prop("readonly", false);
                            $("#editphone2").prop("readonly", false);
                            $("#editaddress").prop("readonly", false);
                            //$("#editnationality").prop("readonly", false);
                            $("input[type=radio]").attr('disabled', false);
                            $('#LblPateniId').hide();
                            $('#LblPateniId').text(item.LblPateniId)
                            $('#editlabno').val(item.editlabno).css("color", "#000000");
                            $('#editlabnoid').val(item.editlabnoid).css("color", "#000000");
                            $('#editprefix').val(item.editprefix).css("color", "#000000");
                            $('#editname').val(item.editname).css("color", "#000000");
                            $('#editnameid').val(item.editnameid).css("color", "#000000");
                            $('#editinvage').val(item.editinvage).css("color", "#000000");
                            $('#editinvmonth').val(item.editinvmonth).css("color", "#000000");
                            $('#editinvyear').val(item.editinvyear).css("color", "#000000");
                            if (item.editmale == 1) {
                                $('#editmale').prop('checked', true);
                            }
                            else {
                                $('#editmale').prop('checked', false);

                            }
                            if (item.editfemale == 1) {
                                $('#editfemale').prop('checked', true);
                            }
                            else {
                                $('#editfemale').prop('checked', false);
                            }
                            $('#editphone').val(item.editphone).css("color", "#000000");
                            $('#editphone2').val(item.editphone2).css("color", "#000000");
                            $('#editemail').val(item.editemail).css("color", "#000000");
                            $('#editnationality').val(item.editnationality).css("color", "#000000");
                            $('#editaddress').val(item.editaddress).css("color", "#000000");
                            $('#editrefby').val(item.editrefby);
                            $('#editrefbyid').val(item.editrefbyid);
                            $('#editoutdr').val(item.editoutdr);
                            $('#editpassport').val(item.editpassport);
                            $('#editsrfno').val(item.editsrfno);
                            $('#editbranch').val(item.editbranch);
                            $('#editbranchid').val(item.editbranchid);
                            $('#editadhar').val(item.editadhar);
                            $('#editwardno').val(item.editwardno);
                            $('#editwardnoid').val(item.editwardnoid);
                            $('#editcollmode').val(item.editcollmode);
                            $('#editcollmodeid').val(item.editcollmodeid);
                            $('#editcollby').val(item.editcollby);
                            $('#editcollbyid').val(item.editcollbyid);
                            $('#editreporton').val(item.editreporton);
                            //$('#editsampleon').val(item.editsampleon);
                            $('#editsampleon').val(item.editsampleon);
                            if (item.editpersonality == 1) {
                                $('#editpersonality').prop('checked', true);
                            }
                            else {
                                $('#editpersonality').prop('checked', false);
                            }
                            if (item.edittelephone == 1) {
                                $('#edittelephone').prop('checked', true);
                            }
                            if (item.editcourier == 1) {
                                $('#editcourier').prop('checked', true);
                            }
                            else {
                                $('#editcourier').prop('checked', false);
                            }
                            if (item.chkeditemail == 1) {
                                $('#chkeditemail').prop('checked', true);
                            }
                            else {
                                $('#chkeditemail').prop('checked', false);
                            }
                            if (item.editsms == 1) {
                                $('#editsms').prop('checked', true);
                            }
                            else {
                                $('#editsms').prop('checked', false);
                            }
                            if (item.urgentreport == 1) {
                                $('#urgentreport').prop('checked', true);
                            }
                            else {
                                $('#urgentreport').prop('checked', false);
                            }
                            $('#txtReleaseMode').val(item.txtReleaseMode);
                            $('#editnote').val(item.editnote);
                            if (item.editwastsup == 1) {
                                $('#editwastsup').prop('checked', true);
                            }
                            else {
                                $('#editwastsup').prop('checked', false);
                            }
                            $('#editipopno').val(item.editipopno);

                            $('#LblPateniId').text(item.LblPateniId);
                        }
                        else {
                            $('#LblPateniId').show();

                            $("#editprefix").prop("readonly", true);
                            $("#editname").prop("readonly", true);
                            $("#editnameid").prop("readonly", true);
                            $("#editinvage").prop("readonly", true);
                            $("#editinvmonth").prop("readonly", true);
                            $("#editinvyear").prop("readonly", true);
                            $("#editphone").prop("readonly", true);
                            $("#editphone2").prop("readonly", true);
                            //$("#editnationality").prop("readonly", true);
                            $("input[type=radio]").attr('disabled', true);
                            $("#editaddress").prop("readonly", true);

                            $('#editlabno').val(item.editlabno).css("color", "#0000FF");
                            $('#editlabnoid').val(item.editlabnoid).css("color", "#0000FF");
                            $('#editprefix').val(item.editprefix).css("color", "#0000FF");
                            $('#editname').val(item.editname).css("color", "#0000FF");
                            $('#editnameid').val(item.editnameid).css("color", "#0000FF");
                            $('#editinvage').val(item.editinvage).css("color", "#0000FF");
                            $('#editinvmonth').val(item.editinvmonth).css("color", "#0000FF");
                            $('#editinvyear').val(item.editinvyear).css("color", "#0000FF");
                            $('#editphone').val(item.editphone).css("color", "#0000FF");
                            $('#editphone2').val(item.editphone2).css("color", "#0000FF");
                            $('#editnationality').val(item.editnationality).css("color", "#0000FF");
                            $('#editaddress').val(item.editaddress).css("color", "#0000FF");
                            $('#editemail').val(item.editemail).css("color", "#0000FF");
                            $('#editrefby').val(item.editrefby);
                            $('#editrefbyid').val(item.editrefbyid);
                            $('#editoutdr').val(item.editoutdr);
                            $('#editpassport').val(item.editpassport);
                            $('#editsrfno').val(item.editsrfno);
                            $('#editbranch').val(item.editbranch);
                            $('#editbranchid').val(item.editbranchid);
                            $('#editadhar').val(item.editadhar);
                            $('#editwardno').val(item.editwardno);
                            $('#editwardnoid').val(item.editwardnoid);
                            $('#editcollmode').val(item.editcollmode);
                            $('#editcollmodeid').val(item.editcollmodeid);
                            $('#editcollby').val(item.editcollby);
                            $('#editcollbyid').val(item.editcollbyid);
                            $('#editreporton').val(item.editreporton);
                            $('#editsampleon').val(item.editsampleon);
                            $('#editsampleon').val(item.editsampleon);
                            if (item.editpersonality == 1) {
                                $('#editpersonality').prop('checked', true);
                            }
                            else {
                                $('#editpersonality').prop('checked', false);
                            }
                            if (item.edittelephone == 1) {
                                $('#edittelephone').prop('checked', true);
                            }
                            if (item.editcourier == 1) {
                                $('#editcourier').prop('checked', true);
                            }
                            else {
                                $('#editcourier').prop('checked', false);
                            }
                            if (item.chkeditemail == 1) {
                                $('#chkeditemail').prop('checked', true);
                            }
                            else {
                                $('#chkeditemail').prop('checked', false);
                            }
                            if (item.editsms == 1) {
                                $('#editsms').prop('checked', true);
                            }
                            else {
                                $('#editsms').prop('checked', false);
                            }
                            if (item.urgentreport == 1) {
                                $('#urgentreport').prop('checked', true);
                            }
                            else {
                                $('#urgentreport').prop('checked', false);
                            }
                            $('#txtReleaseMode').val(item.txtReleaseMode);
                            $('#editnote').val(item.editnote);
                            if (item.editwastsup == 1) {
                                $('#editwastsup').prop('checked', true);
                            }
                            else {
                                $('#editwastsup').prop('checked', false);
                            }
                            $('#editipopno').val(item.editipopno);

                            $('#LblPateniId').text(item.LblPateniId);
                            if (item.editmale == 1) {
                                $('#editmale').prop('checked', true);
                            }
                            else {
                                $('#editmale').prop('checked', false);

                            }
                            if (item.editfemale == 1) {
                                $('#editfemale').prop('checked', true);
                            }
                            else {
                                $('#editfemale').prop('checked', false);
                            }


                        }


                    })
                }
            })
        })
    })
    $('#editlabno').keyup(function (e) {
        if (e.keyCode == 13) {
            $(this).trigger("enterKey");
        }
    });

    //**********************END-DISPLAY-EDITINVOICE****************************






//***********************UPDATE-EDIT-INVOICE*******************************************
    $(document).on('click', '#editupdate', function (e) {
        e.preventDefault();
        $('#editupdate').prop('disabled', true);
        var editupdate = {};
        editupdate.editlabno = $("#editlabno").val();
        editupdate.editprefix = $("#editprefix").val();
        editupdate.editname = $("#editname").val();
        editupdate.editinvage = $("#editinvage").val();
        editupdate.editinvmonth = $("#editinvmonth").val();
        editupdate.editinvyear = $("#editinvyear").val();

        editupdate.LblPateniId = $("#LblPateniId").text().replace(/[^0-9]/gi, '');
        var editmale = 0
        if ($("#editmale").is(':checked') === true) {
            editupdate.editmale = 1;
        }
        var editfemale = 0
        if ($("#editfemale").is(':checked') === true) {
            editupdate.editfemale = 1;
        }
        editupdate.editphone = $("#editphone").val();
        editupdate.editphone2 = $("#editphone2").val();
        editupdate.editemail = $("#editemail").val();
        editupdate.editnationality = $("#editnationality").val();
        editupdate.editaddress = $("#editaddress").val();
        editupdate.editrefby = $("#editrefby").val();
        editupdate.editrefbyid = $("#editrefbyid").val();
        editupdate.editoutdr = $("#editoutdr").val();
        editupdate.editpassport = $("#editpassport").val();
        editupdate.editsrfno = $("#editsrfno").val();
        editupdate.editbranch = $("#editbranch").val();
        editupdate.editadhar = $("#editadhar").val();
        editupdate.editwardno = $("#editwardno").val();
        editupdate.editipopno = $("#editipopno").val();
        editupdate.editcollmode = $("#editcollmode").val();
        editupdate.editcollmodeid = $("#editcollmodeid").val();
        editupdate.editcollby = $("#editcollby").val();
        editupdate.editcollbyid = $("#editcollbyid").val();

        editupdate.editsampleon = $("#editsampleon").val();
        editupdate.editreporton = $("#editreporton").val();

        var editpersonality = 0
        if ($("#editpersonality").is(':checked') === true) {
            editupdate.editpersonality = 1;
        }
        var edittelephone = 0
        if ($("#edittelephone").is(':checked') === true) {
            editupdate.edittelephone = 1;
        }

        var editcourier = 0
        if ($("#editcourier").is(':checked') === true) {
            editupdate.editcourier = 1;
        }
        var chkeditemail = 0
        if ($("#chkeditemail").is(':checked') === true) {
            editupdate.chkeditemail = 1;
        }
        var editsms = 0
        if ($("#editsms").is(':checked') === true) {
            editupdate.editsms = 1;
        }
        var editwatsupp = 0;
        if ($("#editwastsup").is(':checked') === true) {
            editupdate.editwastsup = 1;
        }
        editupdate.txtReleaseMode = $("#txtReleaseMode").val();
        var urgentreport = 0
        if ($("#urgentreport").is(':checked') === true) {
            editupdate.urgentreport = 1;
        }
        var expr = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
        var email = $("#editemail").val();
        if ($("#editemail").val() !== "") {
            if (!expr.test(email)) {
                alert("invalid email address!!!");
                $("#editemail").focus();
                $('#editupdate').prop('disabled', false);
                return false;

            }
        }
        var adhar = $("#editadhar").val();
        if ($("#editadhar").val() !== "") {

            if (adhar.length !== 12) {
                alert("invalid Adhar Number!!!");
                $("#editadhar").focus();
                $('#editupdate').prop('disabled', false);
                return false;

            }
        }


        editupdate.editnote = $("#editnote").val();
        if ($("#editlabno").val() > 0) {
            confirm("Do You Want To Update LabNo");

            var email = $("#editemail").val();
            var expr = /^([\w-\.]+)@@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

            var adhar = $("#editadhar").val();
            $.ajax({
                type: "POST",
                url: "/LISFY/EDITUPDATEINVOICE",
                data: JSON.stringify(editupdate),
                contentType: "application/json; charset=utf-8",
                dataType: "json",

                success: function (data) {


                    if (data.Result === "Patient Name Must Be Entered") {
                        confirm("Patient Name Must Be Entered");
                        $('#editupdate').prop('disabled', false);
                        return false;

                    }
                    if (data.Result === "Age Must Be Entered") {
                        confirm("Age Must Be Entered");
                        $('#editupdate').prop('disabled', false);

                        return false;

                    }


                    alert("successfully");
                    $('#editupdate').prop('disabled', false);
                    $("#LblPateniId").text("");
                    $("#editlabno").val("");
                    $("#editprefix").val("");
                    $("#editname").val("");
                    $("#editinvage").val("");
                    $("#editinvmonth").val("");
                    $("#editinvyear").val("");
                    $("#LblPateniId").val("");
                    $("#editmale").prop('checked', false);
                    $("#editfemale").prop('checked', false);

                    $("#editphone").val("");
                    $("#editphone2").val("");
                    $("#editemail").val("");
                    $("#editnationality").val("");
                    $("#editaddress").val("");
                    $("#editrefby").val("");
                    $("#editoutdr").val("");
                    $("#editpassport").val("");
                    $("#editsrfno").val("");
                    $("#editbranch").val("");
                    $("#editadhar").val("");
                    $("#editwardno").val("");
                    $("#editipopno").val("");
                    $("#editcollmode").val("");
                    $("#editcollby").val("");
                    $("#editsampleon").val("");
                    $("#editreporton").val("");
                    $("#editpersonality").prop('checked', false);
                    $("#edittelephone").prop('checked', false);
                    $("#editcourier").prop('checked', false);
                    $("#chkeditemail").prop('checked', false);
                    $("#editsms").prop('checked', false);
                    $("#urgentreport").prop('checked', false);
                    $('#editnote').val("");
                    $("#editwastsup").prop('checked', false);

                    $("#editipopno").prop('checked', false);

                    $('#LblPateniId').val("");

                }
            })
        }



    })

    $('#editrefby').keyup(function (e) {
        if (e.keyCode == 120) {
            $("#refbybutton").click();

        }
    });

    //***********************  END-UPDATE-EDITINVOICE********************





    $(document).on('click', '#refbybutton', function () {

        event.preventDefault();

        $('#lookuptb tbody').empty();
        $("#txt").val("");
        $("#spinner-div").show();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETREFNAME',

            data: {},
            dataType: 'json',
            success: function (data) {

                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=roedit>"
                    + "<td style=width:387px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=text-align:left;width:50px>" + item.AhMst_Key + "</td>"
                    + "<td style=width:100px>" + item.AhMst_mobile + "</td>"
                    + "</tr>";
                });

                $("#header3").show();
                $("#header3").css("width", "200px");
                $("#header3").html("Mobile No");
                $("#header2").show();
                $("#header2").html("Code");
                $("#header").html("Name");
                $("#header").css("width", "500px");
                $("#modelsize").css("width", "600");
                $("#header3").css("width", "120px");
                $("#searchlookup").css("left", "30px");
                $("#txt").css("width", "400");
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $('#featuredSelectField option[value="1"]').text('Name');
                $('#featuredSelectField option[value="2"]').text('Code');
                $('#featuredSelectField option[value="3"]').text('Mobile No');


                $("#lookupLabel").html("Docter");
                $("#lookuptb").append(rows);



            },
            complete: function () {
                $("#spinner-div").hide();
            },
            error: function (edit) {
                alert('error');
            }

        })
    })


    $('body').on('click', '.roedit', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#scrollselectoredit");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }

        //$('#searchledger').onkeydown = function (e){
        //document.onkeydown = function (e) {
        $("#lookuptb tr").keydown(function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var refbyid = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var refby = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();

                    $("#editrefbyid").val(refbyid);
                    $("#editrefby").val(refby);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchledgerclose").trigger('click');
                    }, 500)

                    break;

            }

        })

    });

    $('body').on('dblclick', '.roedit', function (evt) {
        event.preventDefault();

        var refbyid = $(this).find("td:eq(2)").text();
        var refby = $(this).find("td:eq(1)").text();
        $("#editrefbyid").val(refbyid);
        $("#editrefby").val(refby);
        $(".searchledgerclose").trigger('click');


    })

    $('#editoutdr').keyup(function (e) {
        if (e.keyCode == 120) {
            $("#outdrbutton").click();

        }
    });
    $(document).on('click', '#outdrbutton', function () {

        event.preventDefault();

        $('#lookuptb tbody').empty();
        $("#txt").val("");
        $("#spinner-div").show();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETOUTDR',

            data: {},
            dataType: 'json',
            success: function (data) {

                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=editoutdrs>"
                    + "<td style=text-align:left;width:387px>" + item.AhMst_pName + "</td>"
                    + "<td style=text-align:left;width:50px>" + item.AhMst_Key + "</td>"
                     + "<td style=text-align:left;width:100px>" + item.AhMst_mobile + "</td>"
                    + "</tr>";
                });

                $("#header3").show();
                $("#header3").css("width", "200px");
                $("#header3").html("Mobile No");
                $("#header2").show();
                $("#header2").html("Code");
                $("#header").html("Name");
                $("#header").css("width", "500px");
                $("#header3").css("width", "120px");
                //$("#header").css("width", "200px");
                $("#modelsize").css("width", "600");
                $("#searchlookup").css("left", "30px");
                $("#txt").css("width", "400");
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $('#featuredSelectField option[value="1"]').text('Name');
                $('#featuredSelectField option[value="2"]').text('Code');
                $('#featuredSelectField option[value="3"]').text('Mobile No');


                $("#lookupLabel").html("Docter");
                $("#lookuptb").append(rows);

                $("#lookuptb").append(rows);



            },
            complete: function () {
                $('#spinner-div').hide();
            },
            error: function (edit) {
                alert('error');
            }

        })
    })



    $('body').on('click', '.roeditoutdr', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#scrollselectoredit");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#editoutdr tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }


        $("#lookuptb tr").keydown(function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var outdr = $('#lookuptb tbody tr.highlight_file td:first').text();
                    //var refby = $('#editoutdr tbody tr.highlight_file td:eq(1)').text();

                    $("#editoutdr").val(outdr);
                    //$("#editrefby").val(refby);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchledgerclose").trigger('click');
                    }, 500)

                    break;

            }

        })

    });
    $('body').on('dblclick', '.roeditoutdr', function (evt) {
        event.preventDefault();

        var outdr = $(this).find("td:eq(0)").text();

        $("#editoutdr").val(outdr);
        //$("#editrefby").val(refby);
        $(".searchledgerclose").trigger('click');
    })
    $('#editcollmode').keyup(function (e) {
        if (e.keyCode == 120) {
            $("#collmodebutton").click();
            //$(this).trigger("Key");
        }
    });
    $(document).on('click', '#collmodebutton', function () {

        event.preventDefault();

        $('#lookuptb tbody').empty();
        $("#txt").val("");
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETPAYMODE',

            data: {},
            dataType: 'json',
            success: function (data) {

                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=editcollmode>"
                    + "<td style=width:400px;text-align:left>" + item.Mstr_Desc + "</td>"
                    + "<td style=display:none>" + item.Mstr_Key + "</td>"
                    + "</tr>";
                });
                $("#header3").hide();

                $("#header").css("width", "400");
                $("#header2").hide();
                $("#header").html("Mode");
                //$("#header").css("width", "200px");
                $("#modelsize").css("width", "400");
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#txt").css("width", "200");
                $('#featuredSelectField option[value="1"]').text('Mode');
                $('#featuredSelectField option[value="2"]').text('Code');
                $('#featuredSelectField option[value="3"]').hide();


                $("#lookupLabel").html("Mode");
                $("#lookuptb").append(rows);

                $("#lookuptb").append(rows);



            },
            error: function (edit) {
                alert('error');
            }

        })
    })


    $('body').on('click', '.editcollmode', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#scrollselectoredit");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#lookuptb tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }

        //$('#searchledger').onkeydown = function (e){
        //document.onkeydown = function (e) {
        $("#lookuptb tr").keydown(function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var collmode = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var collmodeid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();

                    $("#editcollmode").val(collmode);
                    $("#editcollmodeid").val(collmodeid);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchledgerclose").trigger('click');
                    }, 500)

                    break;

            }

        })

    });

    $('body').on('dblclick', '.editcollmode', function (evt) {
        event.preventDefault();

        var collmode = $(this).find("td:eq(0)").text();
        var collmodeid = $(this).find("td:eq(1)").text();
        $("#editcollmode").val(collmode);
        $("#editcollmodeid").val(collmodeid);
        $(".searchledgerclose").trigger('click');
    })


    $('#editcollby').keyup(function (e) {
        if (e.keyCode == 120) {
            $("#collbybutton").click();

        }
    });

    function getDateStr(dateStr) {
        var date = eval("new " + dateStr.replace(/\//g, ""));
        var month = date.getMonth() + 1;
        return month + "/" + date.getDate() + "/" + date.getFullYear();
    }


    $(document).on('click', '#collbybutton', function () {

        event.preventDefault();
        $('#lookuptb tbody').empty();
        $.trim($("#txt").val(""));
        //$('#edittb tbody').empty();

        $.ajax({
            type: 'GET',
            url: '/LISFY/GETCOLLBYSTAFF',

            data: {},
            dataType: 'json',
            success: function (data) {

                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=editcollby>"
                    + "<td style=width:200px>" + item.AhMst_pName + "</td>"
                    + "<td style=width:70px>" + item.AhMst_Key + "</td>"
                      + "<td style=width:200px>" + item.AhMst_Address + "</td>"
                        + "<td style=width:100px>" + item.AhMst_mobile + "</td>"
                        + "<td style=display:none>" + item.AhMst_Phno + "</td>"
                         + "<td style=display:none>" + getDateStr(item.AhMst_Dob) + "</td>"
                          + "<td style=display:none>" + item.AhMst_Email + "</td>"
                          + "<td style=display:none>" + item.AhMst_Ismale + "</td>"

                    + "</tr>";
                });


                $("#modelsize").css("width", "600");
                $("#header3").html("Address");
                $("#header4").html("Mobile No");
                $("#header3").show();
                $("#header4").show();
                $("#txt").css("width", "300");
                $("#searchlookup").css("left", "8%");
                $('#featuredSelectField option[value="1"]').text('Name');
                $('#featuredSelectField option[value="2"]').text('Code');
                $('#featuredSelectField option[value="3"]').text('Address');
                $("#lookupLabel").html("staff");
                $("#header").html("Name");
                $("#header").css("width", "200");
                $("#header3").css("width", "200");
                $("#header4").css("width", "100");
                $("#header2").html("Code");
                $("#header2").css("width", "70");
                $("#header2").show();
                $("#lookuptb").append(rows);

                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                $("#lookuptb").append(rows);



            },
            error: function (edit) {
                alert('error');
            }

        })
    })
    $('body').on('click', '.editcollby', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#lookuptb tbody').live('keydown', function (e) {

            event.preventDefault();
            e.stopPropagation();
            const key = event.key;
            // space and arrow keys
            if ([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        function highlight(tableIndex) {

            var parent = $("#scrollselectoredit");


            if ((tableIndex + 1) > $('#lookuptb tbody tr').length) tableIndex = 0;


            if ($('#lookuptb tbody tr:eq(' + tableIndex + ')').length > 0) {
                $('#lookuptb tbody tr').removeClass('highlight');
                var currentEl = $('#editcollmode1 tbody tr:eq(' + tableIndex + ')');
                $("#lookuptb tr").removeClass('highlight_file');
                currentEl.addClass('highlight_file');
                if (currentEl.offset().top > parent.height()) {
                    parent[0].scrollTop = currentEl[0].offsetTop;
                }
                if (currentEl.offset().top < 0) {
                    parent[0].scrollTop = currentEl[0].offsetTop - parent.height() + $('#lookuptb tbody tr').first().height();
                }
            }
        }

        //$('#searchledger').onkeydown = function (e){
        //document.onkeydown = function (e) {
        $("#lookuptb tr").keydown(function (e) {

            switch (e.which) {
                case 38:
                    highlight($('#lookuptb tbody tr.highlight_file').index() - 1);

                    break;
                case 40:
                    highlight($('#lookuptb tbody tr.highlight_file').index() + 1);

                    break;
                case 13:
                    var editcollby = $('#lookuptb tbody tr.highlight_file td:first').text();
                    var editcollbyid = $('#lookuptb tbody tr.highlight_file td:eq(1)').text();

                    $("#editcollby").val(editcollby);
                    $("#editcollbyid").val(editcollbyid);
                    setTimeout(function () {
                        //$('.searchclose').modal('hide');
                        $(".searchledgerclose").trigger('click');
                    }, 500)

                    break;

            }

        })

    });
    //})

    $('body').on('dblclick', '.editcollby', function (evt) {
        event.preventDefault();

        var editcollby = $(this).find("td:eq(0)").text();
        var editcollbyid = $(this).find("td:eq(1)").text();
        $("#editcollby").val(editcollby);
        $("#editcollbyid").val(editcollbyid);
        $(".searchledgerclose").trigger('click');
    })

    $('#editexit').click(function () {
        $("#closeeditmodel").click();
        //location.reload();

    })


    $(document).on('click', '#editnew', function (e) {
        e.preventDefault();
        $("#editlabno").val("");
        $("#editprefix").val("");
        $("#editname").val("");
        $("#editinvage").val("");
        $("#editinvmonth").val("");
        $("#editinvyear").val("");
        $("#LblPateniId").val("");
        $("#editmale").prop('checked', false);
        $("#editfemale").prop('checked', false);

        $("#editphone").val("");
        $("#editphone2").val("");
        $("#editemail").val("");
        $("#editnationality").val("");
        $("#editaddress").val("");
        $("#editrefby").val("");
        $("#editoutdr").val("");
        $("#editpassport").val("");
        $("#editsrfno").val("");
        $("#editbranch").val("");
        $("#editadhar").val("");
        $("#editwardno").val("");
        $("#editipopno").val("");
        $("#editcollmode").val("");
        $("#editcollby").val("");
        $("#editsampleon").val("");
        $("#editreporton").val("");
        $("#editpersonality").prop('checked', false);
        $("#edittelephone").prop('checked', false);
        $("#editcourier").prop('checked', false);
        $("#chkeditemail").prop('checked', false);
        $("#editsms").prop('checked', false);
        $("#urgentreport").prop('checked', false);
        $('#editnote').val("");
        $("#editwastsup").prop('checked', false);

        $("#editipopno").prop('checked', false);

        $('#LblPateniId').text("");
        $('#txtReleaseMode').val("");



    })
    $(document).on('click', '#closeeditmodel', function (e) {
        e.preventDefault();
        $("#editlabno").val("");
        $("#editprefix").val("");
        $("#editname").val("");
        $("#editinvage").val("");
        $("#editinvmonth").val("");
        $("#editinvyear").val("");
        $("#LblPateniId").val("");
        $("#editmale").prop('checked', false);
        $("#editfemale").prop('checked', false);

        $("#editphone").val("");
        $("#editphone2").val("");
        $("#editemail").val("");
        $("#editnationality").val("");
        $("#editaddress").val("");
        $("#editrefby").val("");
        $("#editoutdr").val("");
        $("#editpassport").val("");
        $("#editsrfno").val("");
        $("#editbranch").val("");
        $("#editadhar").val("");
        $("#editwardno").val("");
        $("#editipopno").val("");
        $("#editcollmode").val("");
        $("#editcollby").val("");
        $("#editsampleon").val("");
        $("#editreporton").val("");
        $("#editpersonality").prop('checked', false);
        $("#edittelephone").prop('checked', false);
        $("#editcourier").prop('checked', false);
        $("#chkeditemail").prop('checked', false);
        $("#editsms").prop('checked', false);
        $("#urgentreport").prop('checked', false);
        $('#editnote').val("");
        $("#editwastsup").prop('checked', false);

        $("#editipopno").prop('checked', false);

        $('#LblPateniId').text("");


    })
    $("#editlabno").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#editphone").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#editphone2").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });



    //$("#txtedit").keyup(function () {

    //    var REFNAME = $.trim($("#txtedit").val());
    //    $.ajax({
    //        type: "POST",
    //        url: "/LISFY/SEARCHREFBY",
    //        data: "{REFNAME:'" + REFNAME + "'}",
    //        contentType: "application/json; charset=utf-8",
    //        dataType: "json",
    //        success: function (customers) {
    //            var input, filter, table, tr, td, i, txtValue;
    //            input = document.getElementById("txtedit");
    //            filter = input.value.toUpperCase();
    //            table = document.getElementById("edittb");
    //            tr = table.getElementsByTagName("tr");
    //            for (i = 0; i < tr.length; i++) {
    //                td = tr[i].getElementsByTagName("td")[0];
    //                if (td) {
    //                    txtValue = td.textContent || td.innerText;
    //                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
    //                        tr[i].style.display = "";
    //                    } else {
    //                        tr[i].style.display = "none";
    //                    }
    //                }
    //            }

    //        }

    //    })
    //})

    $("#editlabno").blur(function () {

        $(this).trigger("enterKey");
    });

    $(document).on('click ', '#editload', function () {

        $('#editlabno').focus();

    })

    //////////////////////// ....PENDINGCOLLECTION.../////////////////////////////

    $(document).ready(function () {

        $('#pndcorptxt').hide();
    })



    $(document).ready(function () {
        $("#pndcorporate").change(function () {
            if ($("#pndcorporate").is(':checked') === true) {
                $('#pndcorptxt').show();
                $('#pndcorpsrch').show();
                $('#pndcorptxt').val('');

                $(document).on('click', '#pndcorpsrch', function () {

                    event.preventDefault();

                    $('#lookuptb tbody').empty();
                    $("#txt").val("");
                    $.ajax({
                        type: 'GET',
                        url: '/LISFY/GETCORPORATE',

                        data: {},
                        dataType: 'json',
                        success: function (data) {

                            $('#lookuptb tbody').empty();
                            var rows;
                            $.each(data, function (i, item) {
                                rows += "<tr class=rocorp>"
                                + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                                + "<td style=display:none>" + item.AhMst_Key + "</td>"
                                + "</tr>";
                            });
                            $("#modelsize").css("width", "400");

                            $("#txt").css("width", "200");
                            $("#header").css("width", "400");
                            $('#featuredSelectField option[value="1"]').text('Corporate');
                            $('#featuredSelectField option[value="2"]').text('Code');
                            $('#featuredSelectField option[value="3"]').hide();
                            $("#header3").hide();
                            $("#searchlookup").css("left", "8%");
                            $("#header").text("Corporate");
                            $("#header2").hide();
                            $("#header4").hide();
                            $("#header5").hide();
                            $("#header6").hide();
                            $("#header7").hide();
                            $("#header8").hide();
                            $("#header9").hide();
                            $("#lookupLabel").html("Corporate");
                            $("#lookuptb").append(rows);



                        },
                        error: function (edit) {
                            alert('error');
                        }

                    })
                })
            }
            else if ($("#pndcorporate").is(':checked') === false) {

                $('#pndcorptxt').hide();
                $('#pndcorpsrch').hide();

            }
        })
    })

    $('body').on('dblclick', '.rocorp', function (evt) {
        event.preventDefault();

        var corpname = $(this).find("td:eq(0)").text();
        var corpid = $(this).find("td:eq(1)").text();
        $("#corpid").val(corpid);
        $("#pndcorptxt").val(corpname);
        $(".searchledgerclose").trigger('click');
    })
    $('body').on('click', '.rocorp', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $(document).ready(function () {
        $("#pendsave").attr("disabled", false);
    })

    $("#pndphono").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#pndamt").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#pndcollamt").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#pndcurbalance").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });



    //************SAVE-PENDINGCOLLECTION**************************************
    $(document).on('click', '#pendsave', function (e) {
        e.preventDefault();
        $("#pendsave").attr("disabled", false);
        var savepending = {};
        savepending.pendlabno = $("#pendlabno").val();
        savepending.pnddatetime = $("#pnddatetime").val();
        savepending.pndprifix = $("#pndprifix").val();
        savepending.pndname = $("#pndname").val();
        savepending.agedd = $("#agedd").val();
        savepending.agemm = $("#agemm").val();
        savepending.ageyy = $("#ageyy").val();
        savepending.pndgender = $("#pndgender option:selected").text();
        savepending.pndemail = $("#pndemail").val();
        savepending.pndpaymode = $("#pndpaymode option:selected").text();
        savepending.pndcardno = $("#pndcardno").val();
        savepending.pndbank = $("#pndbank").val();
        savepending.pndbankid = $("#pndbankid").val();
        savepending.pndamt = $("#pndamt").val();
        savepending.pndcollamt = $("#pndcollamt").val();
        savepending.pndcoldatetime = $("#pndcoldatetime").val();
        savepending.pndcurbalance = $("#pndcurbalance").val();
        savepending.pndnote = $("#pndnote").val();
        if ($("#pndcollamt").val() == 0) {
            alert("Enter collected amount!!");
            $("#pndcollamt").focus();
            return false;
        }


        $.ajax({
            type: "POST",
            url: "/LISFY/SAVEPNDCOLLECTION",
            data: JSON.stringify(savepending),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Result === "disablesave") {
                    $("#pendsave").attr("disabled", true);
                    return false;

                }

                if (data.Result === "Entered Amount Exceed The Balance. Please Check") {
                    confirm("Entered Amount Exceed The Balance. Please Check");
                    $("#pndcollamt").focus();
                    return false;

                }

                if (data.Result === "Please Select Bank") {
                    confirm("Please Select Bank");
                    $("#pndbank").focus();
                    return false;

                }
                $("#pendtb1 tbody").empty();
                $("#pndphono").val("");

                $("#pendlabno").val("");
                //$("#pnddatetime").val("");
                $("#pndprifix").val("");
                $("#pndname").val("");
                $("#agedd").val("");
                $("#agemm").val("");
                $("#ageyy").val("");
                $("#pndgender option:selected").text("");
                $("#pndemail").val("");
                $("#pndpaymode option:selected").text("");
                $("#pndcardno").val("");
                $("#pndbank").val("");
                $("#pndbankid").val("");
                $("#pndamt").val("");
                $("#pndcollamt").val("");
                //$("#pndcoldatetime").val("");
                $("#pndcurbalance").val("");
                $("#pndnote").val("");
                alert("successfully");

            },
            failure: function () {
                alert("not successfull");
            }

        })
    })
    //**********************END-SAVE-PENDING-COLECTION*****************************



    $(document).on('click', '#pndrefresh', function () {
        event.preventDefault();
        $("#pendsave").attr("disabled", false);
        $("#pendtb1 tbody").empty();
        $("#pndphono").val("");

        $("#pendlabno").val("");
        //$("#pnddatetime").val("");
        $("#pndprifix").val("");
        $("#pndname").val("");
        $("#agedd").val("");
        $("#agemm").val("");
        $("#ageyy").val("");
        $("#pndgender option:selected").text("");
        $("#pndemail").val("");
        $("#pndpaymode option:selected").text("");
        $("#pndcardno").val("");
        $("#pndbank").val("");
        $("#pndbankid").val("");
        $("#pndamt").val("");
        $("#pndcollamt").val("");
        //$("#pndcoldatetime").val("");
        $("#pndcurbalance").val("");
        $("#pndnote").val("");
        pndcorptxt = $("#pndcorptxt").val();
        var corpid = $("#corpid").val();
        var chkcorp = 0
        if ($("#pndcorporate").is(':checked') === true) {
            chkcorp = 1;
        }


        const pndfromdate = $("#pndfromdate").val();


        const pndtodate = $("#pndtodate").val();

        $.ajax({
            type: 'GET',
            url: '/LISFY/Getpendingdata',
            data: { corpid: corpid, pndfromdate: pndfromdate, pndtodate: pndtodate, chkcorp: chkcorp },
            dataType: 'json',
            success: function (data) {
                $("#pndtb2 tbody").empty();
                var rows;
                $.each(data, function (i, item) {
                    i = i + 1;
                    rows += "<tr class=ropending>"
                       + "<td>" + i + "</td>"
                       + "<td data-toggle='tooltip'title='" + item.LabNo + "'>" + item.LabNo + "</td>"
                       + "<td data-toggle='tooltip'title='" + item.InvDate + "'>" + item.InvDate + "</td>"
                       + "<td data-toggle='tooltip'title='" + item.InvName + "'>" + item.InvName + "</td>"
                       + "<td data-toggle='tooltip'title='" + item.InvCurbalance + "'>" + item.InvCurbalance + "</td>"
                        + "<td data-toggle='tooltip'title='" + item.Invcorporate + "'>" + item.Invcorporate + "</td>"
                        + "<td>" + "<button id=pndview data-toggle=modal data-target=#Pendingviewmodel data-backdrop=static data-keyboard=false>View</button>" + " </td>"
                       + "</tr>";
                });
                $("#pndtb2").append(rows);
            },
            error: function (emp) {
                alert('error');
            }
        })
    })


    //*********************DISPLAY-PENDING-COLLECTION****************************
    $(document).ready(function () {
        $('#pendlabno').bind("enterKey", function (e) {
            $("#pendsave").attr("disabled", false);
            var pndlabno = $("#pendlabno").val();
            var pnddate;
            $.ajax({
                type: 'POST',
                url: '/LISFY/DISPLAYPENDINING',
                data: { pndlabno: pndlabno },
                dataType: 'json',
                success: function (data) {

                    $.each(data, function (i, item) {
                        $('#pendlabno').val(item.pendlabno);
                        $('#pnddatetime').val(item.pnddatetime);
                        $('#pndprifix').val(item.pndprifix);

                        $('#pndname').val(item.pndname);
                        $('#pndphono').val(item.pndphono);
                        $('#pndemail').val(item.pndemail);
                        $('#pndcurbalance').val(item.pndcurbalance);
                        $('#pndamt').val(item.pndamt);
                        $('#pndgender option:selected').text(item.pndgender);
                        //$('#pndpaymode option:selected').text(item.pndpaymode);
                        $('#pndcollamt').val(item.pndcollamt);
                        $('#agedd').val(item.agedd);
                        $('#agemm').val(item.agemm);
                        $('#ageyy').val(item.ageyy);
                        $("#pendtb1 tbody").empty();
                        var rows;
                        $.each(data, function (i, item) {

                            $("#pendtb1 tbody").empty();
                            i = i + 1;
                            rows += "<tr class=ropending1>"
                               + "<td>" + i + "</td>"
                               + "<td data-toggle='tooltip'title='" + item.pndc_date + "'>" + item.pndc_date + "</td>"
                               + "<td data-toggle='tooltip'title='" + item.PndC_Amount + "'>" + item.PndC_Amount + "</td>"
                               + "<td >" + "<input type=checkbox value= id=pndchk  />  " + "</td>"
                               + "<td data-toggle='tooltip'title='" + item.PndC_TimeSmp + "'>" + item.PndC_TimeSmp + "</td>"

                               + "</tr>";
                            pnddate = item.pndc_date;
                        });
                        if (pnddate != "") {
                            $("#pendtb1").append(rows);
                        }

                        $('#pndcollamt').focus();



                    })
                }

            })
        })
    })

    //*****************END-DISPLAY-PENDINGCOLLECTION********************************
    $('#pendlabno').keyup(function (e) {
        if (e.keyCode == 13) {
            $(this).trigger("enterKey");
        }
    });
    $("#pendlabno").blur(function () {

        $(this).trigger("enterKey");
    });








    $(document).on('click', '#pndbankbtn', function () {

        event.preventDefault();
        $('#lookuptb tbody').empty();
        $.trim($("#txt").val(""));
        $("#modelsize").css("width", "400");
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETBANKACCOUNT',

            data: {},
            dataType: 'json',
            success: function (data) {

                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=robank>"
                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                     + "<td style=display:none>" + item.AhMst_Phno + "</td>"
                    + "</tr>";
                });
                $("#header3").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#header").css("width", "400");
                $("#txt").css("width", "200");
                $("#searchlookup").css("left", "8%");
                $('#featuredSelectField option[value="1"]').text('AccountName');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#lookupLabel").html("Account");
                $("#header").html("AccountName");
                $("#header2").hide();


                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                $("#lookuptb").append(rows);



            },
            error: function (edit) {
                alert('error');
            }

        })
    })
    $(document).ready(function () {
        $('#pndbank').keyup(function (e) {
            if (e.keyCode == 120) {
                $("#pndbankbtn").click();

            }
        });
    })

    $('body').on('dblclick', '.robank', function (evt) {
        event.preventDefault();

        var bankid = $(this).find("td:eq(1)").text();
        var bnkname = $(this).find("td:eq(0)").text();
        $("#pndbankid").val(bankid);
        $("#pndbank").val(bnkname);
        $(".searchclose").trigger('click');
    })
    $('body').on('click', '.robank', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $('body').on('click', '.ropending', function (evt) {
        event.preventDefault();

        $("#pndtb2 tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })

    $('body').on('dblclick', '.ropending', function (evt) {
        event.preventDefault();
        $("#pendsave").attr("disabled", false);

        var pndlabno = $(this).find("td:eq(1)").text();
        var pnddate;
        $.ajax({
            type: 'GET',
            url: '/LISFY/DISPLAYPENDINING',
            data: { pndlabno: pndlabno },
            dataType: 'json',
            success: function (data) {
                $.each(data, function (i, item) {
                    $('#pendlabno').val(item.pendlabno);
                    $('#pnddatetime').val(item.pnddatetime);
                    $('#pndprifix').val(item.pndprifix);

                    $('#pndname').val(item.pndname);
                    $('#pndphono').val(item.pndphono);
                    $('#pndemail').val(item.pndemail);
                    $('#pndcurbalance').val(item.pndcurbalance);
                    $('#pndamt').val(item.pndamt);
                    $('#pndgender option:selected').text(item.pndgender);
                    $('#pndcollamt').val(item.pndcollamt);
                    $("#pendtb1 tbody").empty();
                    var rows;
                    $.each(data, function (i, item) {
                        if (item == 0) {
                            $("#pendtb1 tbody").empty();
                        }
                        else {
                            $("#pendtb1 tbody").empty();
                            i = i + 1;
                            rows += "<tr class=ropending1>"
                               + "<td >" + i + "</td>"
                               + "<td data-toggle='tooltip'title='" + item.pndc_date + "'>" + item.pndc_date + "</td>"
                               + "<td data-toggle='tooltip'title='" + item.PndC_Amount + "'>" + item.PndC_Amount + "</td>"
                               + "<td >" + "<input type=checkbox value= id=pndchk  />  " + "</td>"
                               + "<td data-toggle='tooltip'title='" + item.PndC_TimeSmp + "'>" + item.PndC_TimeSmp + "</td>"

                               + "</tr>";
                        }
                        pnddate = item.pndc_date;
                    });
                    if (pnddate != "") {
                        $("#pendtb1").append(rows);
                    }


                    $('#pndcollamt').focus();


                })
            }

        })
    })
    $("#pndtb2").on('click', '#pndview', function () {

        event.preventDefault();
        var currentRow = $(this).closest("tr");

        var pendviewlabno = currentRow.find("td:eq(1)").text();


        $.ajax({
            type: 'POST',
            url: '/LISFY/DISPLAYPENDININGVIEW',
            data: { pendviewlabno: pendviewlabno },
            dataType: 'json',
            success: function (data) {
                $.each(data, function (i, item) {
                    $('#pendviewlabno').val(item.pendviewlabno);
                    $('#pndviewname').val(item.pndviewname);
                    $('#pndscharge').val(item.pndscharge);
                    $('#pndnetamt').val(item.pndnetamt);
                    $('#pndviewtotal').val(item.pndviewtotal);
                    $('#pndpaidnetamt').val(item.pndpaidnetamt);
                    $('#pndBalance').val(item.pndBalance);
                    $('#pndpaymodeview option:selected').text(item.pndpaymodeview);
                    $('#pnddiscrson').val(item.pnddiscrson);
                    $('#discperview option:selected').text(item.discperview);
                    $('#pndviewdisc').val(item.pndviewdisc);
                })

                $.ajax({
                    type: 'POST',
                    url: '/LISFY/DISPLAYPENDVIEWTABLE',
                    data: { pendviewlabno: pendviewlabno },
                    dataType: 'json',
                    success: function (data) {
                        var rows;
                        $('#pendviewtb tbody').empty();
                        $.each(data, function (i, item) {
                            i = i + 1;
                            rows += "<tr class=ropenview>"
                               + "<td>" + i + "</td>"
                                 + "<td data-toggle='tooltip'title='" + item.TESTCODE + "'>" + item.TESTCODE + "</td>"
                               + "<td data-toggle='tooltip'title='" + item.TESTNAME + "'>" + item.TESTNAME + "</td>"
                               + "<td data-toggle='tooltip'title='" + item.RATE + "'>" + item.RATE + "</td>"
                               + "<td data-toggle='tooltip'title='" + item.DISCAMT + "'>" + item.DISCAMT + "</td>"
                                + "<td data-toggle='tooltip'title='" + item.TOTAL + "' >" + item.TOTAL + "</td>"

                               + "</tr>";
                        });
                        $("#pendviewtb").append(rows);


                    }

                })
            }
        })

        $('#pndtablediv').hide();
        $('#pndviewdiv').show();

    })
    $(document).on('click', '#pndviewhide', function () {
        $('#pndviewdiv').hide();
        $('#pndtablediv').show();

    })
    $(document).ready(function () {


        $(document).on('click', '#pndprint', function () {
            event.preventDefault();
            var saveprint = {};
            saveprint.pendlabno = $("#pendlabno").val();
            var pndlabno = $("#pendlabno").val();
            $('body').on('click', '.ropending1', function (evt) {

                $("#pendtb1 tr").each(function () {
                    var currentRow = $(this);
                    var recdate = $(this).find("td:eq(0)").text();
                    var amount = $(this).find("td:eq(1)").text();

                    saveprint.pndc_date = recdate;
                    saveprint.PndC_Amount = amount;
                    var currentRow = $(this).closest("tr");
                    if (currentRow.find("#pndchk").is(':checked')) {
                        saveprint.printcheck = 1;
                    }






                    saveprint.pendlabno = $("#pendlabno").val();
                    saveprint.pndcollamt = $('#pndcollamt').val();

                    $.ajax({
                        type: "POST",
                        url: "/LISFY/PRINTPENDINGCOLLECTION",
                        data: JSON.stringify(saveprint),
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (data) {


                        }

                    })
                })
            })
        })

    })


    $('#pndpaymode').change(function (event) {
        event.preventDefault();
        var selectedValue = $(this).find('option:selected').text();

        if (selectedValue == 'Debit/Credit') {
            $("#pndlabel").html("Card No");
        }
        if (selectedValue == 'Cheque') {
            $("#pndlabel").html("Cheque No");
        }
        if (selectedValue == 'BHIM/UPI Online Payment') {
            $("#pndlabel").html("BHIM/UPI No");
        }
    })
    $(document).on('click', '#pndprint1', function () {
        event.preventDefault();
        var pndcorptxt = $("#pndcorptxt").val();
        var corpid = $("#corpid").val();
        var chkcorp = 0
        if ($("#pndcorporate").is(':checked') === true) {
            chkcorp = 1;
        }
        else {
            chkcorp = 0;
        }
        var pndfromdate = $("#pndfromdate").val();
        var pndtodate = $("#pndtodate").val();
        if (confirm("Do you want to see Print Preview??")) {



            $.ajax({
                type: 'POST',
                url: '/LISFY/PRINTPENDINGCOLLTION',
                data: { corpid: corpid, pndcorptxt: pndcorptxt, chkcorp: chkcorp, pndfromdate: pndfromdate, pndtodate: pndtodate },
                dataType: 'json',
                success: function (data) {
                    //$.each(data, function (i, item) {
                    if (data.Result === "OK") {
                        window.open("/LISFY/GetPDFPending", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=200,width=950,height=700");
                        //window.location = "/LISFY/GetPDFPending";

                    }

                }
            })
        }
        else {
            return false;
        }
    })




    ////////////////.....PENDINGCOLLECTION ...END....//////////////////////////




    $(document).ready(function () {

        new Date($.now());

        var dateObj = new Date();
        var time = dateObj.getHours() + ":" + dateObj.getMinutes() + ":" + dateObj.getSeconds();
        var time1 = time.toLocaleString();
        var AMorPM = (dateObj.getHours() >= 12) ? "PM" : "AM";

        $('#cashtime').val(time1 + AMorPM);


        $('#cashAlluser').hide();
        $('#cashLoguser').hide();
        $('#fetchtxt').hide();
        $('#fetchbtn').hide();
        $('#invoicediv').hide();
        $('#invoicehead').hide();
        $('#pndhead').hide();
        $('#penddiv').hide();
        $('#paymenthead').hide();
        $('#paymentdiv').hide();
        $('#receipthead').hide();
        $('#reciptdiv').hide();
        $('#allusrlabel').hide();
        $('#cashLoguserid').hide();


        $('#cashUsrWise').change(function () {
            if ($("#cashUsrWise").is(':checked') === true) {
                $('#cashAlluser').show();
                $('#cashAlluser').prop("checked", true);
                $('#cashLoguser').show();

                $('#fetchbtn').show();
                $('#invoicediv').show();
                $('#invoicehead').show();
                $('#pndhead').show();
                $('#penddiv').show();
                $('#setbtn').hide();
                $('#paymenthead').show();
                $('#paymentdiv').show();
                $('#receipthead').show();
                $('#reciptdiv').show();
                $('#allusrlabel').show();
                $('#cashLoguserid').show();

            }
            else {
                $('#cashAlluser').hide();
                $('#cashLoguser').hide();
                $('#fetchtxt').hide();
                $('#fetchbtn').hide();
                $('#invoicediv').hide();
                $('#invoicehead').hide();
                $('#pndhead').hide();
                $('#penddiv').hide();
                $('#paymenthead').hide();
                $('#paymentdiv').hide();
                $('#receipthead').hide();
                $('#reciptdiv').hide();
                $('#allusrlabel').hide();
                $('#cashLoguserid').hide();
                $('#setbtn').show();
            }
        })
    })
    $('#cashclose').click(function () {
        location.reload();

    })
    $(document).on('click', '#fetchbtn', function () {
        event.preventDefault();
        $('#fetchbtn').prop('disabled', true);

        $("#txtcoll1").val("").prop("readonly", true);
        $("#txtcoll2").val("").prop("readonly", true);

        $("#txtpayment").val("").prop("readonly", true);
        $("#txtcoll1").val("");
        $("#txtcoll2").val("");
        $("#txtpayment").val("");
        $("#txtrecp").val("");
        $("#txtotal").val("");
        $("#txtofficeamt").val("");

        $("#userinfo").val("");

        var cashAlluser;
        var cashloguser;
        var sumcoll1 = 0;
        var sumpendcol = 0;
        var sumpayment = 0;
        var username;
        var coll2 = 0;
        var invno = 0;
        var TotalAmt = 0;
        var txtiid = 0;
        var temp = txtiid;

        var saveCashclosing = {};

        if ($("#cashAlluser").is(':checked') === true) {

            saveCashclosing.cashAlluser = 1
            cashAlluser = 1;
            $('#fetchtxt').hide();

        }




        $.ajax({
            type: 'POST',
            url: '/LISFY/DISPLAYCASHPENDINGCOLLECTION',
            data: JSON.stringify(saveCashclosing),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',

            success: function (data) {
                var rows;
                $('#pendingtb tbody').empty();
                $.each(data, function (i, item) {
                    i = i + 1;
                    rows += "<tr class=ropndtb>"
                           + "<td>" + i + "</td>"
                             + "<td>" + item.PndC_Labno + "</td>"
                           + "<td>" + item.pndname + "</td>"
                           + "<td>" + item.PndC_Amount + "</td>"
                           + "<td style=display:none>" + item.PndC_UsrId + "</td>"

                           + "</tr>";
                    sumpendcol += item.PndC_Amount;
                })

                $("#pendingtb").append(rows);
                if ($('#pendingtb tr').length !== 0) {

                    var colltxt = sumcoll1 + sumpendcol;
                    $("#txtcoll1").val(colltxt);
                    $("#txtcoll2").val(coll2);
                    TotalAmt = colltxt + coll2 - sumpayment;
                    $("#txttotal").val(TotalAmt);
                    $("#txtpayment").val(sumpayment);



                }


            }
        })
        $.ajax({
            type: 'POST',
            url: '/LISFY/DISPLAYCASHPAYMENT',
            data: JSON.stringify(saveCashclosing),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',

            success: function (data) {
                $('#paymenttb tbody').empty()
                var rows;
                $.each(data, function (i, item) {
                    i = i + 1;

                    rows += "<tr class=ropaymenttb>"
                           + "<td>" + i + "</td>"
                             + "<td>" + item.vchr_TransNo + "</td>"
                           + "<td>" + item.AccountName + "</td>"
                           + "<td>" + item.vchr_Payment + "</td>"
                           + "<td style=display:none>" + item.vchr_UsrId + "</td>"

                           + "</tr>";
                    sumpayment += item.vchr_Payment;

                })
                $("#paymenttb").append(rows);
                if ($('#paymenttb tr').length !== 0) {
                    var colltxt = sumcoll1 + sumpendcol;
                    $("#txtcoll1").val(colltxt);
                    $("#txtcoll2").val(coll2);
                    TotalAmt = colltxt + coll2 - sumpayment;
                    $("#txttotal").val(TotalAmt);
                    $("#txtpayment").val(sumpayment);


                }

            }
        })

        $.ajax({
            type: 'POST',
            url: '/LISFY/DISPLAYCASHRECEPIT',
            data: JSON.stringify(saveCashclosing),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',

            success: function (data) {
                $('#receipttb tbody').empty()
                var rows;
                $.each(data, function (i, item) {
                    i = i + 1;

                    rows += "<tr class=roreceipt>"
                       + "<td>" + i + "</td>"
                         + "<td>" + item.vchr_recpno + "</td>"
                       + "<td>" + item.AccountNamerecp + "</td>"
                       + "<td>" + item.vchr_Receipt + "</td>"
                        + "<td style=display:none>" + item.vchr_UsrIdrecp + "</td>"

                       + "</tr>";
                    coll2 += item.vchr_Receipt;
                })
                $("#receipttb").append(rows);
                if ($('#receipttb tr').length !== 0) {
                    var colltxt = sumcoll1 + sumpendcol;
                    $("#txtcoll1").val(colltxt);
                    $("#txtcoll2").val(coll2);
                    TotalAmt = colltxt + coll2 - sumpayment;
                    $("#txttotal").val(TotalAmt);
                    $("#txtpayment").val(sumpayment);

                }


            }
        })
        $.ajax({
            type: 'POST',
            url: '/LISFY/DISPLAYCASHFETCH',
            data: JSON.stringify(saveCashclosing),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',

            success: function (data) {

                var rows;
                $('#transtb tbody').empty();
                $.each(data, function (i, item) {

                    i = i + 1;
                    rows += "<tr class=roinvoice>"
                       + "<td>" + i + "</td>"
                         + "<td>" + item.Inv_No + "</td>"
                       + "<td>" + item.Inv_Name + "</td>"
                       + "<td>" + item.Inv_RcvdAmt + "</td>"
                        + "<td style=display:none>" + item.Inv_UsrId + "</td>"
                       + "</tr>";

                    invno = item.Inv_No;

                    sumcoll1 += item.Inv_RcvdAmt;

                })
                if (invno > 0) {
                    $("#transtb").append(rows);
                }
                $("#txtid").val(temp);
                if ($('#transtb tr').length !== 0) {
                    var colltxt = sumcoll1 + sumpendcol;
                    $("#txtcoll1").val(colltxt);
                    $("#txtcoll2").val(coll2);
                    TotalAmt = colltxt + coll2 - sumpayment;
                    $("#txttotal").val(TotalAmt);
                    $("#txtpayment").val(sumpayment);

                }




            }



        });


        $("#txtcoll1").val("");
        $("#txtcoll2").val("");
        $("#txttotal").val("");
        $("#txtpayment").val("");
        if ($("#cashLoguser").is(':checked') === true) {


            $.ajax({
                type: 'POST',
                url: '/LISFY/DISPLAYUSERNAME',
                data: JSON.stringify(saveCashclosing),
                contentType: "application/json; charset=utf-8",
                dataType: 'json',

                success: function (data) {

                    $.each(data, function (i, item) {
                        $('#fetchtxt').val(item.username);

                    })
                }
            })
            $('#fetchtxt').show();


            $("#txtcoll1").val("");
            $("#txtcoll2").val("");
            $("#txttotal").val("");
            $("#txtpayment").val("");


        }
        $('#fetchbtn').prop('disabled', false);




    })



//*****************CASH-CLOSING-SAVE****************************************
    $(document).on('click', '#CashCloseSave', function () {

        event.preventDefault();
        $('#CashCloseSave').prop('disabled', true);
        var cashclosingsave = {};
        var saveCashclosing = {};
        if ($("#cashAlluser").is(':checked') === true) {

            saveCashclosing.cashAlluser = 1
            cashAlluser = 1;
            $('#fetchtxt').hide();

        }
        $.ajax({
            type: 'POST',
            url: '/LISFY/DISPLAYCASHPENDINGCOLLECTION',
            data: JSON.stringify(saveCashclosing),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',

            success: function (data) {
                var rows;
                $('#pendingtb tbody').empty();
                $.each(data, function (i, item) {
                    i = i + 1;
                    rows += "<tr class=ropndtb>"
                           + "<td>" + i + "</td>"
                             + "<td>" + item.PndC_Labno + "</td>"
                           + "<td>" + item.pndname + "</td>"
                           + "<td>" + item.PndC_Amount + "</td>"
                           + "<td style=display:none>" + item.PndC_UsrId + "</td>"

                           + "</tr>";
                    sumpendcol += item.PndC_Amount;
                })

                $("#pendingtb").append(rows);
                if ($('#pendingtb tr').length !== 0) {

                    var colltxt = sumcoll1 + sumpendcol;
                    $("#txtcoll1").val(colltxt);
                    $("#txtcoll2").val(coll2);
                    TotalAmt = colltxt + coll2 - sumpayment;
                    $("#txttotal").val(TotalAmt);
                    $("#txtpayment").val(sumpayment);

                }


            }
        })
        $.ajax({
            type: 'POST',
            url: '/LISFY/DISPLAYCASHPAYMENT',
            data: JSON.stringify(saveCashclosing),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',

            success: function (data) {
                $('#paymenttb tbody').empty()
                var rows;
                $.each(data, function (i, item) {
                    i = i + 1;

                    rows += "<tr class=ropaymenttb>"
                           + "<td>" + i + "</td>"
                             + "<td>" + item.vchr_TransNo + "</td>"
                           + "<td>" + item.AccountName + "</td>"
                           + "<td>" + item.vchr_Payment + "</td>"
                           + "<td style=display:none>" + item.vchr_UsrId + "</td>"

                           + "</tr>";
                    sumpayment += item.vchr_Payment;

                })
                $("#paymenttb").append(rows);
                if ($('#paymenttb tr').length !== 0) {
                    var colltxt = sumcoll1 + sumpendcol;
                    $("#txtcoll1").val(colltxt);
                    $("#txtcoll2").val(coll2);
                    TotalAmt = colltxt + coll2 - sumpayment;
                    $("#txttotal").val(TotalAmt);
                    $("#txtpayment").val(sumpayment);

                }

            }
        })

        $.ajax({
            type: 'POST',
            url: '/LISFY/DISPLAYCASHRECEPIT',
            data: JSON.stringify(saveCashclosing),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',

            success: function (data) {
                $('#receipttb tbody').empty()
                var rows;
                $.each(data, function (i, item) {
                    i = i + 1;

                    rows += "<tr class=roreceipt>"
                       + "<td>" + i + "</td>"
                         + "<td>" + item.vchr_recpno + "</td>"
                       + "<td>" + item.AccountNamerecp + "</td>"
                       + "<td>" + item.vchr_Receipt + "</td>"
                        + "<td style=display:none>" + item.vchr_UsrIdrecp + "</td>"

                       + "</tr>";
                    coll2 += item.vchr_Receipt;
                })
                $("#receipttb").append(rows);
                if ($('#receipttb tr').length !== 0) {
                    var colltxt = sumcoll1 + sumpendcol;
                    $("#txtcoll1").val(colltxt);
                    $("#txtcoll2").val(coll2);
                    TotalAmt = colltxt + coll2 - sumpayment;
                    $("#txttotal").val(TotalAmt);
                    $("#txtpayment").val(sumpayment);

                }


            }
        })
        $.ajax({
            type: 'POST',
            url: '/LISFY/DISPLAYCASHFETCH',
            data: JSON.stringify(saveCashclosing),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',

            success: function (data) {
                //$("#txtid").val(data.txtId);
                var rows;
                $('#transtb tbody').empty();
                $.each(data, function (i, item) {

                    i = i + 1;
                    rows += "<tr class=roinvoice>"
                       + "<td>" + i + "</td>"
                         + "<td>" + item.Inv_No + "</td>"
                       + "<td>" + item.Inv_Name + "</td>"
                       + "<td>" + item.Inv_RcvdAmt + "</td>"
                        + "<td style=display:none>" + item.Inv_UsrId + "</td>"
                       + "</tr>";
                    //username = item.username;
                    invno = item.Inv_No;

                    sumcoll1 += item.Inv_RcvdAmt;


                })
                if (invno > 0) {
                    $("#transtb").append(rows);
                }
                $("#txtid").val(temp);
                if ($('#transtb tr').length !== 0) {
                    var colltxt = sumcoll1 + sumpendcol;
                    $("#txtcoll1").val(colltxt);
                    $("#txtcoll2").val(coll2);
                    TotalAmt = colltxt + coll2 - sumpayment;
                    $("#txttotal").val(TotalAmt);
                    $("#txtpayment").val(sumpayment);

                }



            }



        });



        cashclosingsave.cashclosingdate = $("#cashclosingdate").val();
        cashclosingsave.cashtime = $("#cashtime").val();
        if ($("#printclosing").is(':checked') === true) {
            cashclosingsave.printclosing = 1;
        }
        if ($("#cashLoguser").is(':checked') === true) {
            cashclosingsave.cashLoguser = 1;
        }
        if ($("#cashAlluser").is(':checked') === true) {
            cashclosingsave.cashAlluser = 1;
        }
        var txt = $("#txtexcessamt").val();

        if ($("#txtexcessamt").val().length < 0) {

            $('#CashCloseSave').prop('disabled', true);
            alert("Excess Amount!!!!");
            return false;
        }
        else {
            $('#CashCloseSave').prop('disabled', false);
        }

        var txt = $("#txtshortamt").val();
        if ($("#txtshortamt").val().trim() !== "") {
            //if(!$.trim$("#txtshortamt").val().length) {
            $('#CashCloseSave').prop('disabled', true);
            alert("Short Amount!!!!")
            return false;
        }
        else {
            $('#CashCloseSave').prop('disabled', false);
        }

        cashclosingsave.txtcoll1 = $("#txtcoll1").val();
        cashclosingsave.txtcoll2 = $("#txtcoll2").val();
        cashclosingsave.txtpayment = $("#txtpayment").val();
        cashclosingsave.txtrecp = $("#txtrecp").val();
        cashclosingsave.txtofficeamt = $("#txtofficeamt").val();
        cashclosingsave.txttotal = $("#txttotal").val();
        cashclosingsave.userinfo = $("#userinfo").val();
        cashclosingsave.txt2000 = $("#txt2000").val();
        cashclosingsave.txt1000 = $("#txt1000").val();
        cashclosingsave.txt500 = $("#txt500").val();
        cashclosingsave.txt200 = $("#txt200").val();
        cashclosingsave.txt100 = $("#txt100").val();
        cashclosingsave.txt50 = $("#txt50").val();
        cashclosingsave.txt20 = $("#txt20").val();
        cashclosingsave.txt10 = $("#txt10").val();
        cashclosingsave.txt5 = $("#txt5").val();
        cashclosingsave.txtcoin = $("#txtcoin").val();
        cashclosingsave.txttotals = $("#txttotals").val();
        cashclosingsave.txtoffice = $("#txtoffice").val();
        cashclosingsave.txtbalance = $("#txtbalance").val();
        cashclosingsave.txtexcessamt = $("#txtexcessamt").val();
        cashclosingsave.txtshortamt = $("#txtshortamt").val();
        cashclosingsave.txtNote = $("#txtNote").val();
        cashclosingsave.txtId = $("#txtid").val();

        $.ajax({
            type: "POST",
            url: "/LISFY/SAVECASHCLOSING",
            data: JSON.stringify(cashclosingsave),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $.each(data, function (i, item) {
                    $("#txtid").val(item.txtId);
                })

                alert("successfully");

                $('#paymenttb tbody').empty();
                $('#pendingtb tbody').empty();
                $('#transtb tbody').empty();

                $("#txtcoll1").val("");
                $("#txtcoll2").val("");
                $("#txtpayment").val("");
                $("#txtrecp").val("");
                $("#txtofficeamt").val("");
                $("#txt2000").val("");
                $("#txt1000").val("");
                $("#txt500").val("");
                $("#txt200").val("");
                $("#txt100").val("");
                $("#txt50").val("");
                $("#txt20").val("");
                $("#txt10").val("");
                $("#txt5").val("");
                $("#txtcoin").val("");
                $("#txtNote").val("");
                $("#txtoffice").val("");
                $("#txtbalance").val("");
                $("#txtshortamt").val("");
                $("#txtexcessamt").val("");
                $("#txttotal").val("");
                $("#userinfo").val("");
                $("#total2000").empty();
                $("#total1000").empty();
                $("#total500").empty();
                $("#total200").empty();
                $("#total100").empty();
                $("#total50").empty();
                $("#total20").empty();
                $("#total10").empty();
                $("#total5").empty();
                $("#totalCoins").empty();
                $("#txttotals").val("");
                $('#CashCloseSave').prop('disabled', false);
                if (confirm("Do you want to see Print Preview??")) {
                    $("#cashcloseprint").trigger('click');

                }
            }
        })
    })

    //*************************END-SAVE-CASH-CLOSING************************************



    $(document).on('click', '#cashclosingnext', function () {

        event.preventDefault();
        var txtid = $("#txtid").val();
        $("#fetchbtn").hide();

        $.ajax({
            type: 'POST',
            url: '/LISFY/CASHCLOSINGNEXT',
            data: { txtid: txtid },
            dataType: 'json',
            success: function (data) {
                if (data == 0) {
                    alert("No Data found");
                    $('#paymenttb tbody').empty();
                    $('#pendingtb tbody').empty();
                    $('#transtb tbody').empty();

                    $("#txtcoll1").val("");
                    $("#txtcoll2").val("");
                    $("#txtpayment").val("");
                    $("#txtrecp").val("");
                    $("#txtofficeamt").val("");
                    $("#txt2000").val("");
                    $("#txt1000").val("");
                    $("#txt500").val("");
                    $("#txt200").val("");
                    $("#txt100").val("");
                    $("#txt50").val("");
                    $("#txt20").val("");
                    $("#txt10").val("");
                    $("#txt5").val("");
                    $("#txtcoin").val("");
                    $("#txtNote").val("");
                    $("#txtoffice").val("");
                    $("#txtbalance").val("");
                    $("#txtshortamt").val("");
                    $("#txtexcessamt").val("");
                    $("#txttotal").val("");
                    $("#userinfo").val("");
                    $("#total2000").empty();
                    $("#total1000").empty();
                    $("#total500").empty();
                    $("#total200").empty();
                    $("#total100").empty();
                    $("#total50").empty();
                    $("#total20").empty();
                    $("#total10").empty();
                    $("#total5").empty();
                    $("#totalCoins").empty();
                    $("#txttotals").val("");
                    return false;
                }
                if (data.Result === "No Data found") {

                    alert("No Data found");
                    $('#paymenttb tbody').empty();
                    $('#pendingtb tbody').empty();
                    $('#transtb tbody').empty();
                    $('#receipttb tbody').empty()

                    $("#txtcoll1").val("");
                    $("#txtcoll2").val("");
                    $("#txtpayment").val("");
                    $("#txtrecp").val("");
                    $("#txtofficeamt").val("");
                    $("#txt2000").val("");
                    $("#txt1000").val("");
                    $("#txt500").val("");
                    $("#txt200").val("");
                    $("#txt100").val("");
                    $("#txt50").val("");
                    $("#txt20").val("");
                    $("#txt10").val("");
                    $("#txt5").val("");
                    $("#txtcoin").val("");
                    $("#txtNote").val("");
                    $("#txtoffice").val("");
                    $("#txtbalance").val("");
                    $("#txtshortamt").val("");
                    $("#txtexcessamt").val("");
                    $("#txttotal").val("");
                    $("#userinfo").val("");
                    $("#txttotals").val("");
                    $("#total2000").empty();
                    $("#total1000").empty();
                    $("#total500").empty();
                    $("#total200").empty();
                    $("#total100").empty();
                    $("#total50").empty();
                    $("#total20").empty();
                    $("#total10").empty();
                    $("#total5").empty();
                    $("#totalCoins").empty();
                    $("#txttotals").val("");

                    return false;

                }
                $.ajax({
                    type: 'GET',
                    url: '/LISFY/CASHCLOSINGFILLING',
                    data: {},
                    dataType: 'json',
                    success: function (data) {

                        $('#cashUsrWise').prop("checked", true);
                        $('#cashAlluser').show();
                        $('#cashAlluser').prop("checked", true);
                        $('#cashLoguser').show();
                        //$('#fetchtxt').show();
                        $('#fetchbtn').show();
                        $('#invoicediv').show();
                        $('#invoicehead').show();
                        $('#pndhead').show();
                        $('#penddiv').show();
                        $('#paymenthead').show();
                        $('#paymentdiv').show();
                        $('#receipthead').show();
                        $('#reciptdiv').show();
                        $('#allusrlabel').show();
                        $('#cashLoguserid').show();



                        $.each(data, function (i, item) {


                            var cashclosingdate = $('#cashclosingdate').val();
                            const d = new Date(item.cashclosingdate);
                            const formattedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();
                            $('#cashclosingdate').val(formattedDate);
                            $("#txtid").val(item.txtId);


                            $("#cashtime").val(item.cashtime);
                            $("#txtcoll1").val(item.txtcoll1).prop("readonly", true);
                            $("#txtcoll2").val(item.txtcoll2);

                            var txtcoll1 = parseInt($("#txtcoll1").val());
                            var txtcoll2 = parseInt($("#txtcoll2").val());
                            $("#txtpayment").val(item.txtpayment).prop("readonly", true);
                            var txtpayment = parseInt($("#txtpayment").val());

                            $("#txtrecp").val(item.txtrecp).prop("readonly", true);
                            var txtrecp = parseInt($("#txtrecp").val());

                            var TotalAmt = txtcoll1 + txtcoll2 - txtpayment;
                            parseInt($("#txttotal").val(TotalAmt));
                            $("#txtofficeamt").val(item.txtofficeamt);
                            $("#txt2000").val(item.txt2000);
                            $("#txt1000").val(item.txt1000);
                            $("#txt500").val(item.txt500);
                            $("#txt200").val(item.txt200);
                            $("#txt100").val(item.txt100);
                            $("#txt50").val(item.txt50);
                            $("#txt20").val(item.txt20);
                            $("#txt10").val(item.txt10);
                            $("#txt5").val(item.txt5);
                            $("#txtcoin").val(item.txtcoin);
                            $("#txtNote").val(item.txtNote);
                            $("#txtoffice").val(item.txtoffice);
                            $("#txtbalance").val(item.txtbalance);
                            $("#txtshortamt").val(item.txtshortamt);
                            $("#txtexcessamt").val(item.txtexcessamt);


                            $("#userinfo").val(item.userinfo);



                        })
                        var total = 0;
                        var result1000 = 0;
                        var result500 = 0;
                        var result100 = 0;
                        var result50 = 0;
                        var result200 = 0;
                        var result20 = 0;
                        var result10 = 0;
                        var result5 = 0;
                        var txtcoin = parseInt(0);
                        var result2000 = 0;
                        var txt2000 = parseInt($("#txt2000").val());

                        if (txt2000 > 0) {
                            result2000 = txt2000 * 2000;
                            $("#total2000").text(result2000);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        else if (parseInt($("#txt2000").val()).length === 0) {

                            $("#total2000").empty();
                            var txt2000 = parseInt($("#txt2000").val());
                            result2000 = txt2000 * 2000;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));

                        }
                        var txt1000 = parseInt($("#txt1000").val());
                        if (txt1000 > 0) {
                            result1000 = txt1000 * 1000;
                            $("#total1000").text(result1000);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if (parseInt($("#txt1000").val()).length === 0) {
                            $("#total1000").empty();
                            txt1000 = parseInt($("#txt1000").val());
                            result1000 = txt1000 * 1000;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        var txt500 = parseInt($("#txt500").val());
                        if (txt500 > 0) {
                            result500 = txt500 * 500;
                            $("#total500").text(result500);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if (parseInt($("#txt500").val()).length === 0) {

                            $("#total500").empty();
                            txt500 = parseInt($("#txt500").val());
                            result500 = txt500 * 500;

                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));

                        }

                        var txt200 = parseInt($("#txt200").val());
                        if (txt200 > 0) {
                            result200 = txt200 * 200;
                            $("#total200").text(result200);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if (parseInt($("#txt200").val()).length === 0) {
                            $("#total200").empty();
                            txt200 = parseInt($("#txt200").val());
                            result200 = txt200 * 200;

                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        var txt100 = parseInt($("#txt100").val());
                        if (txt100 > 0) {
                            result100 = txt100 * 100;
                            $("#total100").text(result100);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        else if (parseInt($("#txt100").val()).length === 0) {
                            $("#total100").empty();
                            txt100 = parseInt($("#txt100").val());
                            result100 = txt100 * 100;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));

                        }

                        var txt50 = parseInt($("#txt50").val());
                        if (txt50 > 0) {
                            result50 = txt50 * 50;
                            $("#total50").text(result50);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if (parseInt($("#txt50").val()).length === 0) {
                            $("#total50").empty();
                            txt50 = parseInt($("#txt50").val());
                            result50 = txt50 * 50;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        var txt20 = parseInt($("#txt20").val());
                        if (txt20 > 0) {
                            result20 = txt20 * 20;
                            $("#total20").text(result20);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if ($("#txt20").val().length === 0) {
                            $("#total20").empty();
                            txt20 = parseInt($("#txt20").val());
                            result20 = txt20 * 20;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        var txt10 = parseInt($("#txt10").val());
                        if (txt10 > 0) {
                            result10 = txt10 * 10;
                            $("#total10").text(result10);

                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        else if ($("#txt10").val().length === 0) {
                            $("#total10").empty();
                            result10 = txt10 * 10;
                            txt10 = parseInt($("#txt10").val());

                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }


                        var txt5 = parseInt($("#txt5").val());
                        if (txt5 > 0) {
                            result5 = txt5 * 5;
                            $("#total5").text(result5);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if (parseInt($("#txt5").val()).length === 0) {
                            $("#total5").empty();
                            txt5 = parseInt($("#txt5").val());
                            result5 = txt5 * 5;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }


                        var txtcoin = parseInt($("#txtcoin").val());
                        if (txtcoin > 0) {
                            resultcoin = txtcoin + ".00";
                            $("#totalcoins").text(resultcoin);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if (parseInt($("#txtcoin").val()).length === 0) {
                            $("#totalcoins").empty();
                            txtcoin = $("#txtcoin").val();
                            resultcoin = txtcoin + ".00";
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                        parseInt($("#txttotals").val(total));

                        var collectiontotal = $("#txttotal").val();
                        var nDifference = collectiontotal - total;
                        var nToOffice = $("#txtoffice").val();

                        var nbalance = total - nToOffice;
                        $("#txtbalance").val(nbalance);
                        if (nDifference > 0) {
                            var txtShort = nDifference;
                            $("#txtshortamt").val(txtShort);

                        }
                        else {

                            if (nDifference != 0) {
                                var txtExcess = nDifference;
                                $("#txtexcessamt").val(txtExcess);

                            }
                            else {

                                txtExcess = nDifference;

                                $("#txtexcessamt").val(txtExcess);
                            }
                        }
                        $.ajax({
                            type: 'GET',
                            url: '/LISFY/CASHCLOSINGFILLINGINVOICE',
                            data: {},
                            dataType: 'json',
                            success: function (data) {
                                var rows;
                                $('#transtb tbody').empty();
                                $.each(data, function (i, item) {

                                    i = i + 1;
                                    rows += "<tr class=roinvoice>"
                                       + "<td>" + i + "</td>"
                                         + "<td>" + item.Inv_No + "</td>"
                                       + "<td>" + item.Inv_Name + "</td>"
                                       + "<td>" + item.Inv_RcvdAmt + "</td>"
                                        + "<td style=display:none>" + item.Inv_UsrId + "</td>"
                                       + "</tr>";
                                })
                                $("#transtb").append(rows);

                            }
                        })
                        $.ajax({
                            type: 'GET',
                            url: '/LISFY/CASHCLOSINGFILLINGPENDING',
                            data: {},
                            dataType: 'json',
                            success: function (data) {
                                var rows;
                                var rows;
                                $('#pendingtb tbody').empty();
                                $.each(data, function (i, item) {
                                    i = i + 1;
                                    rows += "<tr class=ropndtb>"
                                           + "<td>" + i + "</td>"
                                             + "<td>" + item.PndC_Labno + "</td>"
                                           + "<td>" + item.pndname + "</td>"
                                           + "<td>" + item.PndC_Amount + "</td>"
                                           + "<td style=display:none>" + item.PndC_UsrId + "</td>"

                                           + "</tr>";


                                })
                                $("#pendingtb").append(rows);
                            }
                        })
                        $.ajax({
                            type: 'GET',
                            url: '/LISFY/CASHCLOSINGFILLINGPAYMENT',
                            data: {},
                            dataType: 'json',
                            success: function (data) {
                                $('#paymenttb tbody').empty()
                                var rows;
                                $.each(data, function (i, item) {
                                    i = i + 1;
                                    //$('#paymenttb tbody').empty();
                                    rows += "<tr class=ropaymenttb>"
                                           + "<td>" + i + "</td>"
                                             + "<td>" + item.vchr_TransNo + "</td>"
                                           + "<td>" + item.AccountName + "</td>"
                                           + "<td>" + item.vchr_Payment + "</td>"
                                           + "<td style=display:none>" + item.vchr_UsrId + "</td>"

                                           + "</tr>";


                                })
                                $("#paymenttb").append(rows);
                            }
                        })
                        $.ajax({
                            type: 'GET',
                            url: '/LISFY/CASHCLOSINGFILLINGRECEPT',
                            data: {},
                            dataType: 'json',
                            success: function (data) {
                                $('#receipttb tbody').empty()
                                var rows;
                                $.each(data, function (i, item) {
                                    i = i + 1;

                                    rows += "<tr class=roreceipt>"
                                       + "<td>" + i + "</td>"
                                         + "<td>" + item.vchr_recpno + "</td>"
                                       + "<td>" + item.AccountNamerecp + "</td>"
                                       + "<td>" + item.vchr_Receipt + "</td>"
                                        + "<td style=display:none>" + item.vchr_UsrIdrecp + "</td>"

                                       + "</tr>";


                                })
                                $("#receipttb").append(rows);
                            }
                        })
                    }
                })


                $("#CashCloseSave").html("Update");

            }

        })
    })
    $(document).on('click', '#cashcloeprivious', function () {

        event.preventDefault();
        var txtid = $("#txtid").val();
        $("#fetchbtn").hide();
        $.ajax({
            type: 'POST',
            url: '/LISFY/CASHCLOSINGPREV',
            data: { txtid: txtid },
            dataType: 'json',
            success: function (data) {

                if (data == 0) {
                    alert("No Data found");
                    $('#paymenttb tbody').empty();
                    $('#pendingtb tbody').empty();
                    $('#transtb tbody').empty();
                    $('#receipttb tbody').empty()

                    $("#txtcoll1").val("");
                    $("#txtcoll2").val("");
                    $("#txtpayment").val("");
                    $("#txtrecp").val("");
                    $("#txtofficeamt").val("");
                    $("#txt2000").val("");
                    $("#txt1000").val("");
                    $("#txt500").val("");
                    $("#txt200").val("");
                    $("#txt100").val("");
                    $("#txt50").val("");
                    $("#txt20").val("");
                    $("#txt10").val("");
                    $("#txt5").val("");
                    $("#txtcoin").val("");
                    $("#txtNote").val("");
                    $("#txtoffice").val("");
                    $("#txtbalance").val("");
                    $("#txtshortamt").val("");
                    $("#txtexcessamt").val("");
                    $("#txttotal").val("");
                    $("#userinfo").val("");
                    $("#total2000").empty();
                    $("#total1000").empty();
                    $("#total500").empty();
                    $("#total200").empty();
                    $("#total100").empty();
                    $("#total50").empty();
                    $("#total20").empty();
                    $("#total10").empty();
                    $("#total5").empty();
                    $("#totalCoins").empty();
                    $("#txttotals").val("");

                    return false;
                }
                if (data.Result === "No Data found") {

                    alert("No Data found");
                    $('#paymenttb tbody').empty();
                    $('#pendingtb tbody').empty();
                    $('#transtb tbody').empty();
                    $('#receipttb tbody').empty()

                    $("#txtcoll1").val("");
                    $("#txtcoll2").val("");
                    $("#txtpayment").val("");
                    $("#txtrecp").val("");
                    $("#txtofficeamt").val("");
                    $("#txt2000").val("");
                    $("#txt2000").val("");
                    $("#txt1000").val("");
                    $("#txt500").val("");
                    $("#txt200").val("");
                    $("#txt100").val("");
                    $("#txt50").val("");
                    $("#txt20").val("");
                    $("#txt10").val("");
                    $("#txt5").empty();
                    $("#txtNote").val("");
                    $("#txtoffice").val("");
                    $("#txtbalance").val("");
                    $("#txtshortamt").val("");
                    $("#txtexcessamt").val("");
                    $("#txttotal").val("");
                    $("#userinfo").val("");
                    $("#txttotals").val("");
                    $("#total2000").empty();
                    $("#total1000").empty();
                    $("#total500").empty();
                    $("#total200").empty();
                    $("#total100").empty();
                    $("#total50").empty();
                    $("#total20").empty();
                    $("#total10").empty();
                    $("#total5").empty();
                    $("#totalCoins").empty();
                    $("#txttotals").val("");

                    return false;

                }

                $.ajax({
                    type: 'GET',
                    url: '/LISFY/CASHCLOSINGFILLING',
                    data: {},
                    dataType: 'json',
                    success: function (data) {
                        $('#cashUsrWise').prop("checked", true);
                        $('#cashAlluser').show();
                        $('#cashAlluser').prop("checked", true);
                        $('#cashLoguser').show();

                        $('#invoicediv').show();
                        $('#invoicehead').show();
                        $('#pndhead').show();
                        $('#penddiv').show();
                        $('#paymenthead').show();
                        $('#paymentdiv').show();
                        $('#receipthead').show();
                        $('#reciptdiv').show();
                        $('#allusrlabel').show();
                        $('#cashLoguserid').show();



                        $.each(data, function (i, item) {



                            var cashclosingdate = $('#cashclosingdate').val();
                            const d = new Date(item.cashclosingdate);
                            const formattedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();
                            $('#cashclosingdate').val(formattedDate);
                            $("#txtid").val(item.txtId);


                            $("#cashtime").val(item.cashtime);
                            $("#txtcoll1").val(item.txtcoll1).prop("readonly", true);
                            $("#txtcoll2").val(item.txtcoll2);

                            var txtcoll1 = parseInt($("#txtcoll1").val());
                            var txtcoll2 = parseInt($("#txtcoll2").val());
                            $("#txtpayment").val(item.txtpayment).prop("readonly", true);
                            var txtpayment = parseInt($("#txtpayment").val());

                            $("#txtrecp").val(item.txtrecp).prop("readonly", true);
                            var txtrecp = parseInt($("#txtrecp").val());

                            var TotalAmt = txtcoll1 + txtcoll2 - txtpayment;
                            parseInt($("#txttotal").val(TotalAmt));
                            $("#txtofficeamt").val(item.txtofficeamt);
                            $("#txt2000").val(item.txt2000);
                            $("#txt1000").val(item.txt1000);
                            $("#txt500").val(item.txt500);
                            $("#txt200").val(item.txt200);
                            $("#txt100").val(item.txt100);
                            $("#txt50").val(item.txt50);
                            $("#txt20").val(item.txt20);
                            $("#txt10").val(item.txt10);
                            $("#txt5").val(item.txt5);
                            $("#txtcoin").val(item.txtcoin);
                            $("#txtNote").val(item.txtNote);
                            $("#txtoffice").val(item.txtoffice);
                            $("#txtbalance").val(item.txtbalance);
                            $("#txtshortamt").val(item.txtshortamt);
                            $("#txtexcessamt").val(item.txtexcessamt);


                            $("#userinfo").val(item.userinfo);



                        })
                        var total = 0;
                        var result1000 = 0;
                        var result500 = 0;
                        var result100 = 0;
                        var result50 = 0;
                        var result200 = 0;
                        var result20 = 0;
                        var result10 = 0;
                        var result5 = 0;
                        var txtcoin = parseInt(0);
                        var result2000 = 0;
                        var txt2000 = parseInt($("#txt2000").val());

                        if (txt2000 > 0) {
                            result2000 = txt2000 * 2000;
                            $("#total2000").text(result2000);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        else if ($("#txt2000").val().length >= 0) {

                            $("#total2000").empty();
                            var txt2000 = parseInt($("#txt2000").val());
                            result2000 = txt2000 * 2000;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));

                        }
                        var txt1000 = parseInt($("#txt1000").val());
                        if (txt1000 > 0) {
                            result1000 = txt1000 * 1000;
                            $("#total1000").text(result1000);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if ($("#txt1000").val().length >= 0) {
                            $("#total1000").empty();
                            txt1000 = parseInt($("#txt1000").val());
                            result1000 = txt1000 * 1000;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        var txt500 = parseInt($("#txt500").val());
                        if (txt500 > 0) {
                            result500 = txt500 * 500;
                            $("#total500").text(result500);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if ($("#txt500").val().length >= 0) {

                            $("#total500").empty();
                            txt500 = parseInt($("#txt500").val());
                            result500 = txt500 * 500;

                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));

                        }

                        var txt200 = parseInt($("#txt200").val());
                        if (txt200 > 0) {
                            result200 = txt200 * 200;
                            $("#total200").text(result200);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if ($("#txt200").val().length >= 0) {
                            $("#total200").empty();
                            txt200 = parseInt($("#txt200").val());
                            result200 = txt200 * 200;

                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        var txt100 = parseInt($("#txt100").val());
                        if (txt100 > 0) {
                            result100 = txt100 * 100;
                            $("#total100").text(result100);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        else if ($("#txt100").val().length >= 0) {
                            $("#total100").empty();
                            txt100 = parseInt($("#txt100").val());
                            result100 = txt100 * 100;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));

                        }

                        var txt50 = parseInt($("#txt50").val());
                        if (txt50 > 0) {
                            result50 = txt50 * 50;
                            $("#total50").text(result50);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if ($("#txt50").val().length >= 0) {
                            $("#total50").empty();
                            txt50 = parseInt($("#txt50").val());
                            result50 = txt50 * 50;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        var txt20 = parseInt($("#txt20").val());
                        if (txt20 > 0) {
                            result20 = txt20 * 20;
                            $("#total20").text(result20);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if ($("#txt20").val().length >= 0) {
                            $("#total20").empty();
                            txt20 = parseInt($("#txt20").val());
                            result20 = txt20 * 20;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        var txt10 = parseInt($("#txt10").val());
                        if (txt10 > 0) {
                            result10 = txt10 * 10;
                            $("#total10").text(result10);

                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        else if ($("#txt10").val().length >= 0) {
                            $("#total10").empty();
                            result10 = txt10 * 10;
                            txt10 = parseInt($("#txt10").val());

                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }


                        var txt5 = parseInt($("#txt5").val());
                        if (txt5 > 0) {
                            result5 = txt5 * 5;
                            $("#total5").text(result5);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if ($("#txt5").val().length >= 0) {
                            $("#total5").empty();
                            txt5 = parseInt($("#txt5").val());
                            result5 = txt5 * 5;
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }


                        var txtcoin = parseInt($("#txtcoin").val());
                        if (txtcoin > 0) {
                            resultcoin = txtcoin + ".00";
                            $("#totalcoins").text(resultcoin);
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }
                        else if ($("#txtcoin").val().length >= 0) {
                            $("#totalcoins").empty();
                            txtcoin = parseInt($("#txtcoin").val());
                            resultcoin = txtcoin + ".00";
                            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                            parseInt($("#txttotals").val(total));
                        }

                        total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
                        parseInt($("#txttotals").val(total));

                        var collectiontotal = $("#txttotal").val();
                        var Difference = collectiontotal - total;
                        var nDifference = Difference.toFixed(2);
                        var nToOffice = $("#txtoffice").val();

                        var balance = total - nToOffice;
                        var nbalance = balance.toFixed(2);
                        $("#txtbalance").val(nbalance);
                        if (nDifference > 0) {
                            var txtShort = nDifference;
                            //var txtShort = txtShorts.toFixed(2);
                            $("#txtshortamt").val(txtShort);

                        }
                        else {

                            if (nDifference != 0) {
                                var txtExcess = nDifference;
                                //var txtExcess = txtExcesss.toFixed(2);
                                $("#txtexcessamt").val(txtExcess);

                            }
                            else {

                                txtExcess = nDifference;

                                $("#txtexcessamt").val(txtExcess);
                            }
                        }
                        $.ajax({
                            type: 'GET',
                            url: '/LISFY/CASHCLOSINGFILLINGINVOICE',
                            data: {},
                            dataType: 'json',
                            success: function (data) {
                                var rows;
                                $('#transtb tbody').empty();
                                $.each(data, function (i, item) {

                                    i = i + 1;
                                    rows += "<tr class=roinvoice>"
                                       + "<td>" + i + "</td>"
                                         + "<td>" + item.Inv_No + "</td>"
                                       + "<td>" + item.Inv_Name + "</td>"
                                       + "<td>" + item.Inv_RcvdAmt + "</td>"
                                        + "<td style=display:none>" + item.Inv_UsrId + "</td>"
                                       + "</tr>";
                                })
                                $("#transtb").append(rows);

                            }
                        })
                        $.ajax({
                            type: 'GET',
                            url: '/LISFY/CASHCLOSINGFILLINGPENDING',
                            data: {},
                            dataType: 'json',
                            success: function (data) {
                                var rows;
                                var rows;
                                $('#pendingtb tbody').empty();
                                $.each(data, function (i, item) {
                                    i = i + 1;
                                    rows += "<tr class=ropndtb>"
                                           + "<td>" + i + "</td>"
                                             + "<td>" + item.PndC_Labno + "</td>"
                                           + "<td>" + item.pndname + "</td>"
                                           + "<td>" + item.PndC_Amount + "</td>"
                                           + "<td style=display:none>" + item.PndC_UsrId + "</td>"

                                           + "</tr>";


                                })
                                $("#pendingtb").append(rows);
                            }
                        })
                        $.ajax({
                            type: 'GET',
                            url: '/LISFY/CASHCLOSINGFILLINGPAYMENT',
                            data: {},
                            dataType: 'json',
                            success: function (data) {
                                $('#paymenttb tbody').empty()
                                var rows;
                                $.each(data, function (i, item) {
                                    i = i + 1;
                                    //$('#paymenttb tbody').empty();
                                    rows += "<tr class=ropaymenttb>"
                                           + "<td>" + i + "</td>"
                                             + "<td>" + item.vchr_TransNo + "</td>"
                                           + "<td>" + item.AccountName + "</td>"
                                           + "<td>" + item.vchr_Payment + "</td>"
                                           + "<td style=display:none>" + item.vchr_UsrId + "</td>"

                                           + "</tr>";


                                })
                                $("#paymenttb").append(rows);
                            }
                        })
                        $.ajax({
                            type: 'GET',
                            url: '/LISFY/CASHCLOSINGFILLINGRECEPT',
                            data: {},
                            dataType: 'json',
                            success: function (data) {
                                $('#receipttb tbody').empty()
                                var rows;
                                $.each(data, function (i, item) {
                                    i = i + 1;

                                    rows += "<tr class=roreceipt>"
                                       + "<td>" + i + "</td>"
                                         + "<td>" + item.vchr_recpno + "</td>"
                                       + "<td>" + item.AccountNamerecp + "</td>"
                                       + "<td>" + item.vchr_Receipt + "</td>"
                                        + "<td style=display:none>" + item.vchr_UsrIdrecp + "</td>"

                                       + "</tr>";


                                })
                                $("#receipttb").append(rows);
                            }
                        })





                    }
                })


                $("#CashCloseSave").html("Update");

            }

        })
    })





    function sum() {
        var total = 0;
        var result1000 = 0;
        var result500 = 0;
        var result100 = 0;
        var result50 = 0;
        var result200 = 0;
        var result20 = 0;
        var result10 = 0;
        var result5 = 0;
        var txtcoin = 0;
        var result2000 = 0;
        var txt2000 = $("#txt2000").val();

        if (txt2000 > 0) {
            result2000 = txt2000 * 2000;
            $("#total2000").text(result2000);
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }

        else if ($("#txt2000").val().length === 0) {

            $("#total2000").empty();
            var txt2000 = $("#txt2000").val();
            result2000 = txt2000 * 2000;
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);

        }
        var txt1000 = $("#txt1000").val();
        if (txt1000 > 0) {
            result1000 = txt1000 * 1000;
            $("#total1000").text(result1000);
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }
        else if ($("#txt1000").val().length === 0) {
            $("#total1000").empty();
            txt1000 = $("#txt1000").val();
            result1000 = txt1000 * 1000;
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }

        var txt500 = parseInt($("#txt500").val());
        if (txt500 > 0) {
            result500 = txt500 * 500;
            $("#total500").text(result500);
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            parseFloat($("#txttotals").val(total));
        }
        else if (parseInt($("#txt500").val()).length === 0) {

            $("#total500").empty();
            txt500 = parseFloat($("#txt500").val());
            result500 = txt500 * 500;

            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            parseFloat($("#txttotals").val(total));

        }

        var txt200 = $("#txt200").val();
        if (txt200 > 0) {
            result200 = txt200 * 200;
            $("#total200").text(result200);
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }
        else if ($("#txt200").val().length === 0) {
            $("#total200").empty();
            txt200 = $("#txt200").val();
            result200 = txt200 * 200;

            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }

        var txt100 = $("#txt100").val();
        if (txt100 > 0) {
            result100 = txt100 * 100;
            $("#total100").text(result100);
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }

        else if ($("#txt100").val().length === 0) {
            $("#total100").empty();
            txt100 = $("#txt100").val();
            result100 = txt100 * 100;
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);

        }

        var txt50 = $("#txt50").val();
        if (txt50 > 0) {
            result50 = txt50 * 50;
            $("#total50").text(result50);
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }
        else if ($("#txt50").val().length === 0) {
            $("#total50").empty();
            txt50 = $("#txt50").val();
            result50 = txt50 * 50;
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }

        var txt20 = $("#txt20").val();
        if (txt20 > 0) {
            result20 = txt20 * 20;
            $("#total20").text(result20);
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }
        else if ($("#txt20").val().length === 0) {
            $("#total20").empty();
            txt20 = $("#txt20").val();
            result20 = txt20 * 20;
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }

        var txt10 = $("#txt10").val();
        if (txt10 > 0) {
            result10 = txt10 * 10;
            $("#total10").text(result10);

            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }

        else if ($("#txt10").val().length === 0) {
            $("#total10").empty();
            result10 = txt10 * 10;
            txt10 = $("#txt10").val();

            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }


        var txt5 = $("#txt5").val();
        if (txt5 > 0) {
            result5 = txt5 * 5;
            $("#total5").text(result5);
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }
        else if ($("#txt5").val().length === 0) {
            $("#total5").empty();
            txt5 = $("#txt5").val();
            result5 = txt5 * 5;
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }


        txtcoin = parseFloat($("#txtcoin").val());
        if (isNaN(txtcoin)) {
            txtcoin = 0;
        }
        if (txtcoin > 0) {
            resultcoin = txtcoin + ".00";
            $("#totalcoins").text(resultcoin);
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }
        else if ($("#txtcoin").val().length === 0) {
            $("#totalcoins").empty();
            txtcoin = $("#txtcoin").val();
            resultcoin = txtcoin + ".00";
            total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
            $("#txttotals").val(total);
        }

        total = result2000 + result1000 + result500 + result100 + result200 + result50 + result20 + result10 + result5 + txtcoin;
        $("#txttotals").val(total);

        var collectiontotal = $("#txttotal").val();
        var Difference = collectiontotal - total;
        var nDifference = Difference.toFixed(2);
        var nToOffice = $("#txtoffice").val();
        var balance = total - nToOffice;
        var nbalance = balance.toFixed(2);
        $("#txtbalance").val(nbalance);
        if (nDifference > 0) {
            var txtShort = nDifference;
            //var txtShort = txtShorts.toFixed(2);
            $("#txtshortamt").val(txtShort);

        }
        else {

            if (nDifference != 0) {

                var txtExcess = nDifference;
                //var txtExcess = txtExcesss.toFixed(2);
                $("#txtexcessamt").val(txtExcess);

            }
            else {
                $("#txtshortamt").val("");
                txtExcess = nDifference;
                //var txtExcess = txtExcesss.toFixed(2);
                $("#txtexcessamt").val(txtExcess);
            }
        }




    }
    $(document).on('click', '#cashcloseprint', function () {
        event.preventDefault();
        if ($("#printclosing").is(':checked') === true) {
            var printclosing = 1;
        }
        var cashclosingdate = $("#cashclosingdate").val();
        var cashtime = $("#cashtime").val();
        var txtid = $("#txtid").val();

        $.ajax({
            type: 'POST',
            url: '/LISFY/CASHCLOSINGPRINT',
            data: { printclosing: printclosing, cashclosingdate: cashclosingdate, cashtime: cashtime, txtid: txtid },
            dataType: 'json',
            success: function (data) {

                if (data.Result === "OK") {
                    window.open("/LISFY/GetPDFCashClosing", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=200,width=950,height=700");
                    //window.location = "/LISFY/GetPDFPending";

                }



            }
        })

    })
    $(document).on('click', '#cashclosingnew', function () {
        event.preventDefault();
        $("#loaddiv").load();

        $('#paymenttb tbody').empty();
        $('#pendingtb tbody').empty();
        $('#transtb tbody').empty();
        $('#receipttb tbody').empty()
        $("#total2000").empty();
        $("#total1000").empty();
        $("#total500").empty();
        $("#total200").empty();
        $("#total100").empty();
        $("#total50").empty();
        $("#total20").empty();
        $("#total10").empty();
        $("#total5").empty();
        $("#totalCoins").empty();

        $("#txt2000").val("");
        $("#txt1000").val("");
        $("#txt500").val("");
        $("#txt200").val("");
        $("#txt100").val("");
        $("#txt50").val("");
        $("#txt20").val("");
        $("#txt10").val("");
        $("#txt5").val("");
        $("#txtcoin").val("");
        $("#txttotals").val("");

        $("#txtcoll1").val("");
        $("#txtcoll2").val("");
        $("#txtpayment").val("");
        $("#txtrecp").val("");
        $("#txtofficeamt").val("");

        $("#txtNote").val("");
        $("#txtoffice").val("");
        $("#txtbalance").val("");
        $("#txtshortamt").val("");
        $("#txtexcessamt").val("");
        $("#txttotal").val("");
        $("#userinfo").val("");
        $("#txttotals").val("");
        $("#fetchtxt").hide();
        var dateObj = new Date();
        var time = dateObj.getHours() + ":" + dateObj.getMinutes() + ":" + dateObj.getSeconds();
        var time1 = time.toLocaleString();
        var AMorPM = (dateObj.getHours() >= 12) ? "PM" : "AM";

        $('#cashtime').val(time1 + AMorPM);

        $('#cashclosingdate').val("@ViewBag.cashcurdate");
        $('#cashAlluser').hide();
        $('#cashLoguser').hide();
        $('#fetchtxt').hide();
        $('#fetchbtn').hide();
        $('#invoicediv').hide();
        $('#invoicehead').hide();
        $('#pndhead').hide();
        $('#penddiv').hide();
        $('#paymenthead').hide();
        $('#paymentdiv').hide();
        $('#receipthead').hide();
        $('#reciptdiv').hide();
        $('#allusrlabel').hide();
        $('#cashLoguserid').hide();
        $('#setbtn').show();
        $('#cashUsrWise').prop("checked", false);
        $("#CashCloseSave").html("Save");
        $("#txtid").val("");



    })
    $("#txt2000").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txt1000").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txt500").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txt200").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txt100").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txt50").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txt20").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txt10").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txt5").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txtcoin").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txttotals").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txtcoll1").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txtcoll2").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txtpayment").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txtofficeamt").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txtrecp").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txtoffice").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txtshortamt").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txtexcessamt").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#txttotal").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });

    function collsum() {
        var txtrecp = 0;
        var txtcol1 = 0;
        var txtcol2 = 0;
        var txtpayment = 0;
        var txtofficeamt = 0;
        txtcol1 = parseFloat($("#txtcoll1").val());
        if ($("#txtcoll1").val() == "") {

            $("#txttotal").val(0);
        }
        if (isNaN(txtcol1)) {
            txtcol1 = 0;
        }

        txtcol2 = parseFloat($("#txtcoll2").val());
        if ($("#txtcoll2").val() == "") {
            $("#txttotal").val(0)
        }
        if (isNaN(txtcol2)) {
            txtcol2 = 0;
        }

        txtpayment = parseFloat($("#txtpayment").val());
        if ($("#txtpayment").val() == "") {
            $("#txttotal").val(0)
        }
        if (isNaN(txtpayment)) {
            txtpayment = 0;
        }
        txtrecp = parseFloat($("#txtrecp").val());
        if ($("#txtrecp").val() == "") {
            $("#txttotal").val(0)
        }
        if (isNaN(txtrecp)) {
            txtrecp = 0;
        }

        txtofficeamt = $("#txtofficeamt").val();
        if ($("#txtofficeamt").val() == "") {
            $("#txttotal").val(0)
        }
        if (isNaN(txtofficeamt)) {
            txtofficeamt = 0;
        }
        var ntotal = txtcol1 + txtcol2 + txtrecp - txtpayment - txtofficeamt;
        var total = ntotal.toFixed(2);
        parseFloat($("#txttotal").val(total));
        if (isNaN(total)) {
            $(this).val(0);
        }
        var collectiontotal = parseFloat($("#txttotals").val());
        if (isNaN(collectiontotal)) {
            collectiontotal = 0;
        }
        var Difference = total - collectiontotal;
        var nDifference = Difference.toFixed(2);
        var nToOffice = $("#txtoffice").val();

        var balance = total - nToOffice;
        var nbalance = balance.toFixed(2);

        if (nDifference > 0) {
            var txtShort = nDifference;
            //var txtShort = txtShorts.toFixed(2);
            $("#txtshortamt").val(txtShort);

        }
        else {

            if (nDifference != 0) {

                var txtExcess = nDifference;
                //var txtExcess = txtExcesss.toFixed(2);
                $("#txtexcessamt").val(txtExcess);

            }
            else {
                $("#txtshortamt").val("");
                txtExcesss = nDifference;
                //var txtExcess = txtExcesss.toFixed(2);
                $("#txtexcessamt").val(txtExcess);
            }
        }

    }
    $(document).on('click', '#setbtn', function (e) {
        event.preventDefault();
        var cashclosingdate = $('#cashclosingdate').val();
        $.ajax({
            type: 'POST',
            url: '/LISFY/CASHCLOSINGSETVALUE',
            data: { cashclosingdate: cashclosingdate },
            dataType: 'json',
            success: function (data) {
                $.each(data, function (i, item) {
                    $('#txtcoll1').val(item.txtcoll1);
                    $('#txtpayment').val(item.txtpayment);
                    $('#txtofficeamt').val(item.txtofficeamt);
                    collsum();

                })


            }
        })

        $('#paymenttb tbody').empty();
        $('#pendingtb tbody').empty();
        $('#transtb tbody').empty();
        $('#receipttb tbody').empty()
        $("#total2000").empty();
        $("#total1000").empty();
        $("#total500").empty();
        $("#total200").empty();
        $("#total100").empty();
        $("#total50").empty();
        $("#total20").empty();
        $("#total10").empty();
        $("#total5").empty();
        $("#totalCoins").empty();

        $("#txt2000").val("");
        $("#txt1000").val("");
        $("#txt500").val("");
        $("#txt200").val("");
        $("#txt100").val("");
        $("#txt50").val("");
        $("#txt20").val("");
        $("#txt10").val("");
        $("#txt5").val("");
        $("#txtcoin").val("");
        $("#txttotals").val("");
        $('#cashAlluser').hide();
        $('#cashLoguser').hide();
        $('#fetchtxt').hide();
        $('#fetchbtn').hide();
        $('#invoicediv').hide();
        $('#invoicehead').hide();
        $('#pndhead').hide();
        $('#penddiv').hide();
        $('#paymenthead').hide();
        $('#paymentdiv').hide();
        $('#receipthead').hide();
        $('#reciptdiv').hide();
        $('#allusrlabel').hide();
        $('#cashLoguserid').hide();
        $('#cashUsrWise').prop("checked", false);


    })

    $("#txtoffice").keyup(function () {
        var txtrecp = 0;
        var txtcol1 = 0;
        var txtcol2 = 0;
        var txtpayment = 0;
        var txtofficeamt = 0;
        txtcol1 = parseFloat($("#txtcoll1").val());
        if ($("#txtcoll1").val() == "") {

            $("#txttotal").val(0);
        }
        if (isNaN(txtcol1)) {
            txtcol1 = 0;
        }

        txtcol2 = parseFloat($("#txtcoll2").val());
        if ($("#txtcoll2").val() == "") {
            $("#txttotal").val(0)
        }
        if (isNaN(txtcol2)) {
            txtcol2 = 0;
        }

        txtpayment = parseFloat($("#txtpayment").val());
        if ($("#txtpayment").val() == "") {
            $("#txttotal").val(0)
        }
        if (isNaN(txtpayment)) {
            txtpayment = 0;
        }
        txtrecp = parseFloat($("#txtrecp").val());
        if ($("#txtrecp").val() == "") {
            $("#txttotal").val(0)
        }
        if (isNaN(txtrecp)) {
            txtrecp = 0;
        }

        txtofficeamt = $("#txtofficeamt").val();
        if ($("#txtofficeamt").val() == "") {
            $("#txttotal").val(0)
        }
        if (isNaN(txtofficeamt)) {
            txtofficeamt = 0;
        }
        var ntotal = txtcol1 + txtcol2 + txtrecp - txtpayment - txtofficeamt;
        var total = ntotal.toFixed(2);
        parseFloat($("#txttotal").val(total));
        if (isNaN(total)) {
            $(this).val(0);
        }
        var collectiontotal = $("#txttotals").val();
        if (isNaN(collectiontotal)) {
            collectiontotal = 0;
        }
        var nDifference = collectiontotal - total;
        var nToOffice = $("#txtoffice").val();

        var nbalance = total - nToOffice;
        $("#txtbalance").val(nbalance);
        if (nDifference > 0) {
            var txtShort = nDifference;
            $("#txtshortamt").val(txtShort);

        }
        else {

            if (nDifference != 0) {

                var txtExcess = nDifference;
                $("#txtexcessamt").val(txtExcess);

            }
            else {
                $("#txtshortamt").val("");
                txtExcess = nDifference;

                $("#txtexcessamt").val(txtExcess);
            }
        }
    })

    $(document).ready(function () {
        $("#reportPending").hide();
        $("#lablreportpending").hide();
        new Date($.now());

        var dateObj = new Date();
        var time = dateObj.getHours() + ":" + dateObj.getMinutes() + ":" + dateObj.getSeconds();
        var AMorPM = (dateObj.getHours() >= 12) ? "PM" : "AM";

        $('#ReportDisTime').val(time + AMorPM);
        $('#ServerSelect').change(function () {
            if ($("#ServerSelect option:selected").text() == "Counter") {

                var ServerSelect = 0
                $.ajax({
                    type: "POST",
                    url: "/LISFY/NEWREPORTDISPATCH",
                    data: JSON.stringify({ ServerSelect: ServerSelect }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        $.each(data, function (i, item) {
                            $("#ReportdisEntryNo").val(item.ReportdisEntryNo);

                        })
                    }
                })
            }
            else if ($("#ServerSelect option:selected").text() == "Branch") {


                var ServerSelect = 1
                $.ajax({
                    type: "POST",
                    url: "/LISFY/NEWREPORTDISPATCH",
                    data: JSON.stringify({ ServerSelect: ServerSelect }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        $.each(data, function (i, item) {
                            $("#ReportdisEntryNo").val(item.ReportdisEntryNo);

                        })
                    }
                })
            }
        })

    })



  //*************************DISPLAY-REPORT-DISPATCH******************************
    $(document).ready(function () {
        $('#ReportDisLabno').bind("enterKey", function (e) {

            var ServerSelect = 1;

            var reportlabno = $("#ReportDisLabno").val();
            $.ajax({
                type: 'GET',
                url: '/LISFY/DISPLAYREPORTDISPATCH',
                data: { reportlabno: reportlabno, ServerSelect: ServerSelect },
                dataType: 'json',
                success: function (data) {
                    if (data.Result === "InvalidLabNo") {
                        alert("Invalid Lab No");
                        return false;
                    }
                    var rows;
                    $.each(data, function (i, item) {



                        $("#ReportdisPname").val(item.ReportdisPname);
                        $("#reportPending").val(item.reportPending);
                        $("#ReportDisDate").val(item.ReportDisDate);
                        $("#Sampleon").val(item.Sampleon);
                        $("#Reporton").val(item.Reporton);
                        $("#ReportDisEmail").val(item.ReportDisEmail);
                        $("#RepMode").val(item.RepMode);
                        $("#RegNote").val(item.RegNote);
                        $("#Note").val(item.Note);


                        $("#ReportDisTime").val(item.ReportDisTime);

                        $("#ReportDisipop").val(item.ReportDisipop);
                        $("#RefBy").val(item.RefBy);
                        $("#BranchName").val(item.BranchName);

                        if (item.chkPersonally == true) {

                            $("#chkPersonallys").prop('checked', true);

                        }

                        else {
                            $("#chkPersonally").prop('checked', false);
                        }
                        if (item.chkTelephone == true) {
                            $("#chkTelephones").prop('checked', true);
                        }
                        else {
                            $("#chkTelephones").prop('checked', false);
                        }
                        if (item.checkCourier == true) {
                            $("#checkCouriers").prop('checked', true);
                        }
                        else {
                            $("#checkCouriers").prop('checked', false);
                        }
                        if (item.chkEmail == true) {
                            $("#chkEmails").prop('checked', true);
                        }
                        else {
                            $("#chkEmails").prop('checked', false);
                        }
                        if (item.chksms == true) {
                            $("#chksmss").prop('checked', true);
                        }
                        else {
                            $("#chksmss").prop('checked', false);
                        }




                        $("#reportPending").val(item.reportPending);
                        if ($("#reportPending").val().length != 0) {
                            $("#reportPending").show();
                            $("#lablreportpending").show();

                        }

                        var invstatus = item.Inv_Status;
                        if (invstatus == -1) {
                            $("#ReportDisSave").prop('disabled', true);

                        }
                        else {
                            $("#ReportDisSave").prop('disabled', false);
                        }
                        $("#AgeDD").val(item.AgeDD);
                        $("#AgeMM").val(item.AgeMM);
                        $("#AgeYY").val(item.AgeYY);
                    })

                },
                error: function (data) {
                    alert("Invalid Lab No");
                    $("#ReportdisPname").val("");
                    $("#ReportDisLabno").val("");
                    $("#ReportDisipop").val("");
                    $("#RefBy").val("");
                    $("#RefBy").val("");
                    $("#AgeDD").val(0);
                    $("#AgeMM").val(0);
                    $("#AgeYY").val(0);
                    $("#BranchName").val("");
                    $("#ReportDisEmail").val("");
                    $("#RepMode").val("");
                    $("#RegNote").val("");
                    $("#Dispatchtable tbody").empty();
                    $("#lablreportpending").hide();
                    $("#reportPending").hide();

                    $("#Note").val("");
                    $("#chkPersonallys").prop('checked', false);
                    $("#chkTelephones").prop('checked', false);
                    $("#checkCouriers").prop('checked', false);
                    $("#chkEmails").prop('checked', false);
                    $("#chksmss").prop('checked', false);
                    $("#ReportDisTime").val("");
                    var dateObj = new Date();
                    var time = dateObj.getHours() + ":" + dateObj.getMinutes() + ":" + dateObj.getSeconds();
                    var AMorPM = (dateObj.getHours() >= 12) ? "PM" : "AM";

                    $('#ReportDisTime').val(time + AMorPM);
                    $("#ReportDisDate").val("");
                    $("#ReportDisDate").val("@ViewBag.reportdate");
                    $("#Sampleon").val("");

                    $("#Sampleon").val("@ViewBag.reportdate");
                    $("#Reporton").val("");

                    $("#Reporton").val("@ViewBag.reportdate");
                    $("#ReportdisEntryNo").val("");
                    $("#ReportdisEntryNo").val("@ViewBag.ReportDispatchkey");
                }

            })

            $.ajax({
                type: 'GET',
                url: '/LISFY/DISPLAYREPORTDISPATCHTABLE',
                data: { reportlabno: reportlabno, ServerSelect: ServerSelect },
                dataType: 'json',
                success: function (data) {
                    $("#Dispatchtable tbody").empty();
                    var rows;
                    $.each(data, function (i, item) {
                        $("#ReportdisEntryNo").val(item.ReportdisEntryNo);
                        i = i + 1;
                        rows += "<tr class=roreport>"
                           + "<td>" + i + "</td>"
                           + "<td>" + '<input type=checkbox> ' + "</td>"
                           + "<td data-toggle='tooltip'title='" + item.RptDis_Person + "'>" + '<input type="text" value="' + item.RptDis_Person + '" >' + "</td>"
                           + "<td data-toggle='tooltip'title='" + item.RptDis_Dispmode + "'>" + item.RptDis_Dispmode + "</td>"
                            + "<td data-toggle='tooltip'title='" + item.RptDis_Userinfo + "'>" + item.RptDis_Userinfo + "</td>"
                        + "<td>" + '<button id="DeleteButton" ><i class="fas fa-times"></i></button>' + "</td>"
                           + "</tr>";
                    });

                    $("#Dispatchtable").append(rows);

                }
            })


        })
    })

    $('#ReportDisLabno').keyup(function (e) {
        if (e.keyCode == 13) {
            $(this).trigger("enterKey");
        }
    });

    //**************END-DISPLAY-REPORT-DISPATCH**************************






    $('#DispatchMode').change(function () {
        if ($("#DispatchMode option:selected").text() == "Phone") {
            var currentrow = $("#Dispatchtable").find("tr").last();
            var slno = currentrow.find("td:eq(0)").text();
            if (slno == "") {
                slno = 0;
            }
            var iNum = parseInt(slno);
            slno1 = iNum + 1;
            $.ajax({
                type: 'POST',
                url: '/LISFY/DISPLAYUSERINFO',
                data: {},
                dataType: 'json',
                success: function (data) {
                    //$("#Dispatchtable tbody").empty();
                    var rows;
                    $.each(data, function (i, item) {
                        i = i + 1;
                        rows += "<tr class=roreport>"
                           + "<td>" + slno1 + "</td>"
                           + "<td>" + '<input type=checkbox> ' + "</td>"
                           + "<td>" + '<input type="text" value="" >' + "</td>"
                           + "<td data-toggle='tooltip'title=Phone>" + "Phone" + "</td>"
                            + "<td data-toggle='tooltip'title='" + item.RptDis_Userinfo + "'>" + item.RptDis_Userinfo + "</td>"
                        + "<td>" + '<button id="DeleteButton" ><i class="fas fa-times"></i></button>' + "</td>"
                           + "</tr>";
                    });

                    $("#Dispatchtable").append(rows);

                }
            })
            return false;
        }

        if ($("#DispatchMode option:selected").text() == "ByHand") {
            var currentrow = $("#Dispatchtable").find("tr").last();
            var slno = currentrow.find("td:eq(0)").text();
            if (slno == "") {
                slno = 0;
            }
            var iNum = parseInt(slno);
            slno1 = iNum + 1;
            $.ajax({
                type: 'POST',
                url: '/LISFY/DISPLAYUSERINFO',
                data: {},
                dataType: 'json',
                success: function (data) {

                    var rows;
                    $.each(data, function (i, item) {
                        i = i + 1;
                        rows += "<tr class=roreport>"
                           + "<td>" + slno1 + "</td>"
                           + "<td>" + '<input type=checkbox> ' + "</td>"
                           + "<td>" + '<input type="text" value="" >' + "</td>"
                           + "<td data-toggle='tooltip'title=ByHand>" + "ByHand" + "</td>"
                            + "<td data-toggle='tooltip'title='" + item.RptDis_Userinfo + "'>" + item.RptDis_Userinfo + "</td>"
                        + "<td>" + '<button id="DeleteButton" ><i class="fas fa-times"></i></button>' + "</td>"
                           + "</tr>";
                    });

                    $("#Dispatchtable").append(rows);

                }
            })
            return false;
        }
        if ($("#DispatchMode option:selected").text() == "Email") {
            var currentrow = $("#Dispatchtable").find("tr").last();
            var slno = currentrow.find("td:eq(0)").text();
            var iNum = parseInt(slno);
            if (slno == "") {
                slno = 0;
            }
            slno1 = iNum + 1;
            $.ajax({
                type: 'POST',
                url: '/LISFY/DISPLAYUSERINFO',
                data: {},
                dataType: 'json',
                success: function (data) {

                    var rows;
                    $.each(data, function (i, item) {
                        i = i + 1;
                        rows += "<tr class=roreport>"
                           + "<td>" + slno1 + "</td>"
                           + "<td>" + '<input type=checkbox> ' + "</td>"
                           + "<td>" + '<input type="text" value="" >' + "</td>"
                           + "<td data-toggle='tooltip'title=Email>" + "Email" + "</td>"
                            + "<td data-toggle='tooltip'title='" + item.RptDis_Userinfo + "'>" + item.RptDis_Userinfo + "</td>"
                        + "<td>" + '<button id="DeleteButton" ><i class="fas fa-times"></i></button>' + "</td>"
                           + "</tr>";
                    });

                    $("#Dispatchtable").append(rows);

                }
            })
            return false;
        }
        if ($("#DispatchMode option:selected").text() == "Courier") {
            var currentrow = $("#Dispatchtable").find("tr").last();
            var slno = currentrow.find("td:eq(0)").text();
            if (slno == "") {
                slno = 0;
            }
            var iNum = parseInt(slno);
            slno1 = iNum + 1;


            $.ajax({
                type: 'POST',
                url: '/LISFY/DISPLAYUSERINFO',
                data: {},
                dataType: 'json',
                success: function (data) {
                    //$("#Dispatchtable tbody").empty();
                    var rows;
                    $.each(data, function (i, item) {
                        i = i + 1;
                        rows += "<tr class=roreport>"
                           + "<td>" + slno1 + "</td>"
                           + "<td>" + '<input type=checkbox> ' + "</td>"
                           + "<td>" + '<input type="text" value="" >' + "</td>"
                           + "<td data-toggle='tooltip'title=Courier>" + "Courier" + "</td>"
                            + "<td data-toggle='tooltip'title='" + item.RptDis_Userinfo + "'>" + item.RptDis_Userinfo + "</td>"
                        + "<td>" + '<button id="DeleteButton" ><i class="fas fa-times"></i></button>' + "</td>"
                           + "</tr>";
                    });

                    $("#Dispatchtable").append(rows);

                }
            })
            return false;
        }
        if ($("#DispatchMode option:selected").text() == "Through Branch") {
            var currentrow = $("#Dispatchtable").find("tr").last();
            var slno = currentrow.find("td:eq(0)").text();
            if (slno == "") {
                slno = 0;
            }
            var iNum = parseInt(slno);
            slno1 = iNum + 1;
            $.ajax({
                type: 'POST',
                url: '/LISFY/DISPLAYUSERINFO',
                data: {},
                dataType: 'json',
                success: function (data) {
                    //$("#Dispatchtable tbody").empty();
                    var rows;
                    $.each(data, function (i, item) {
                        i = i + 1;
                        rows += "<tr class=roreport>"
                           + "<td id=slno1>" + slno1 + "</td>"
                           + "<td>" + '<input type=checkbox> ' + "</td>"
                           + "<td>" + '<input type="text" value="" >' + "</td>"
                           + "<td data-toggle='tooltip'title=ThroughBranch>" + "Through Branch" + "</td>"
                            + "<td data-toggle='tooltip'title='" + item.RptDis_Userinfo + "'>" + item.RptDis_Userinfo + "</td>"
                        + "<td>" + '<button id="DeleteButton"><i class="fas fa-times"></i></button>' + "</td>"
                           + "</tr>";
                    });

                    $("#Dispatchtable").append(rows);

                }
            })
            return false;
        }

    })
    $("#Dispatchtable").on("click", "#DeleteButton", function () {
        $(this).closest("tr").remove();
        arrangeSno();
        return false;
    });
    function arrangeSno() {
        event.preventDefault();

        $('#Dispatchtable tr').each(function (index) {
            console.log($(this));
            $(this).find("td:eq(0)").html(index + 0);

        })
    }




//************SAVE-REPORT-DISPATH************************************

    $(document).on('click', '#ReportDisSave', function () {
        event.preventDefault();
        var rpdispatch = new Array();
        //var ReportDispatchsave = {};
        //ReportDispatchsave.reportPending = $("#reportPending").val();
        var ReportdisEntryNo = $("#ReportdisEntryNo").val();
        var ReportDisLabno = $("#ReportDisLabno").val();
        //if ($("#ServerSelect option:selected").text() == "Counter") {

        //     var ServerSelect = 0;
        //}
        //if ($("#ServerSelect option:selected").text() == "Branch") {

        var ServerSelect = 1;
        //}
        $("#Dispatchtable tbody tr").each(function () {

            var ReportDispatchsavetb = {};
            var row = $(this);
            ReportDispatchsavetb.RptDis_Person = row.find("td:eq(2) input[type='text']").val();
            ReportDispatchsavetb.RptDis_Dispmode = row.find("td").eq(3).html();
            ReportDispatchsavetb.RptDis_Userinfo = row.find("td").eq(4).html();
            rpdispatch.push(ReportDispatchsavetb);
        })
        if ($("#ReportDisLabno").val().trim() == "") {
            alert("invalid lab no");
            $("#ReportDisLabno").focus();
            return false;
        }
        else {

            $.ajax({
                type: "POST",
                url: "/LISFY/SAVEREPORTDISPATCH",
                data: JSON.stringify({ rpdispatch: rpdispatch, ReportdisEntryNo: ReportdisEntryNo, ReportDisLabno: ReportDisLabno, ServerSelect: ServerSelect }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {

                    alert("save successfully");
                    $("#ReportdisPname").val("");
                    $("#ReportDisLabno").val("");
                    $("#ReportDisipop").val("");
                    $("#RefBy").val("");
                    $("#RefBy").val("");
                    $("#AgeDD").val(0);
                    $("#AgeMM").val(0);
                    $("#AgeYY").val(0);
                    $("#BranchName").val("");
                    $("#ReportDisEmail").val("");
                    $("#RepMode").val("");
                    $("#RegNote").val("");
                    $("#Dispatchtable tbody").empty();
                    $("#lablreportpending").hide();
                    $("#reportPending").hide();

                    $("#Note").val("");
                    $("#chkPersonallys").prop('checked', false);
                    $("#chkTelephones").prop('checked', false);
                    $("#checkCouriers").prop('checked', false);
                    $("#chkEmails").prop('checked', false);
                    $("#chksmss").prop('checked', false);
                    $("#ReportDisTime").val("");
                    var dateObj = new Date();
                    var time = dateObj.getHours() + ":" + dateObj.getMinutes() + ":" + dateObj.getSeconds();
                    var AMorPM = (dateObj.getHours() >= 12) ? "PM" : "AM";

                    $('#ReportDisTime').val(time + AMorPM);
                    $("#ReportDisDate").val("");
                    $("#ReportDisDate").val("@ViewBag.reportdate");
                    $("#Sampleon").val("");

                    $("#Sampleon").val("@ViewBag.reportdate");
                    $("#Reporton").val("");

                    $("#Reporton").val("@ViewBag.reportdate");
                    $("#ReportdisEntryNo").val("");
                    $("#ReportdisEntryNo").val("@ViewBag.ReportDispatchkey");
                }
            })
        }

    })

  //******************END-SAVE-REPORT-DISPATH******************************







    //***************************DELETE-REPORT-DISPATCH*******************
    $(document).on('click', '#ReportDisDelete', function () {
        event.preventDefault();

        var ReportDisLabno = $("#ReportDisLabno").val();
        //if ($("#ServerSelect option:selected").text() == "Counter") {

        //    var ServerSelect = 0;
        //}
        //if ($("#ServerSelect option:selected").text() == "Branch") {

        var ServerSelect = 1;
        //}
        if (confirm("Are You Sure to Delete?")) {
            $.ajax({
                type: "POST",
                url: "/LISFY/DELETEREPORTDISPATCH",
                data: JSON.stringify({ ReportDisLabno: ReportDisLabno, ServerSelect: ServerSelect }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    alert("delete successfully");
                    $("#ReportdisPname").val("");
                    $("#ReportDisLabno").val("");
                    $("#ReportDisipop").val("");
                    $("#RefBy").val("");
                    $("#RefBy").val("");
                    $("#AgeDD").val(0);
                    $("#AgeMM").val(0);
                    $("#AgeYY").val(0);
                    $("#BranchName").val(0);
                    $("#ReportDisEmail").val("");
                    $("#RepMode").val("");
                    $("#RegNote").val("");
                    $("#Dispatchtable tbody").empty();
                    $("#Note").val("");
                    $("#lablreportpending").hide();
                    $("#reportPending").hide();
                    $("#ReportdisEntryNo").val("");
                    $("#ReportdisEntryNo").val("@ViewBag.ReportDispatchkey");
                    $("#chkPersonallys").prop('checked', false);
                    $("#chkTelephones").prop('checked', false);
                    $("#checkCouriers").prop('checked', false);
                    $("#chkEmails").prop('checked', false);
                    $("#chksmss").prop('checked', false);
                    $("#ReportDisTime").val("");
                    var dateObj = new Date();
                    var time = dateObj.getHours() + ":" + dateObj.getMinutes() + ":" + dateObj.getSeconds();
                    var AMorPM = (dateObj.getHours() >= 12) ? "PM" : "AM";

                    $('#ReportDisTime').val(time + AMorPM);
                    $("#ReportDisDate").val("");
                    $("#ReportDisDate").val("@ViewBag.reportdate");
                    $("#Sampleon").val("");

                    $("#Sampleon").val("@ViewBag.reportdate");
                    $("#Reporton").val("");

                    $("#Reporton").val("@ViewBag.reportdate");
                }
            })
        } else {
            return false;
        }
    })

    //********************END-DELETE-REPORT-DISPATCH***************


    $(document).on('click', '#ReportDisNew', function () {
        event.preventDefault();
        //if ($("#ServerSelect option:selected").text() == "Counter") {

        //    var ServerSelect = 0;
        //}
        //if ($("#ServerSelect option:selected").text() == "Branch") {

        var ServerSelect = 1;
        //}
        $("#ReportdisPname").val("");
        $("#ReportDisLabno").val("");
        $("#ReportDisipop").val("");
        $("#RefBy").val("");
        $("#RefBy").val("");
        $("#AgeDD").val(0);
        $("#AgeMM").val(0);
        $("#AgeYY").val(0);
        $("#BranchName").val("");
        $("#ReportDisEmail").val("");
        $("#RepMode").val("");
        $("#RegNote").val("");
        $("#Dispatchtable tbody").empty();
        $("#Note").val("");
        $("#reportPending").hide();
        $("#lablreportpending").hide();

        $("#chkPersonallys").prop('checked', false);
        $("#chkTelephones").prop('checked', false);
        $("#checkCouriers").prop('checked', false);
        $("#chkEmails").prop('checked', false);
        $("#chksmss").prop('checked', false);
        $("#ReportDisTime").val("");
        var dateObj = new Date();
        var time = dateObj.getHours() + ":" + dateObj.getMinutes() + ":" + dateObj.getSeconds();
        var AMorPM = (dateObj.getHours() >= 12) ? "PM" : "AM";

        $('#ReportDisTime').val(time + AMorPM);
        $("#ReportDisDate").val("");
        $("#ReportDisDate").val("@ViewBag.reportdate");
        $("#Sampleon").val("");

        $("#Sampleon").val("@ViewBag.reportdate");
        $("#Reporton").val("");
        $("#ReportdisEntryNo").val("");
        $("#ReportdisEntryNo").val("@ViewBag.ReportDispatchkey");
        $("#Reporton").val("@ViewBag.reportdate");




        $.ajax({
            type: "POST",
            url: "/LISFY/NEWREPORTDISPATCH",
            data: JSON.stringify({ ServerSelect: ServerSelect }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $.each(data, function (i, item) {
                    $("#ReportdisEntryNo").val(item.ReportdisEntryNo);

                })
            }
        })
    })
    $('#ReportDisExit').click(function () {
        location.reload();

    })
    $('#reportdispatchclose').click(function () {
        location.reload();

    })
    $("#ReportDisLabno").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });

    $(document).on('click', '#billwisesrcharea', function () {

        event.preventDefault();
        $("#txt").val("");
        $('#lookuptb tbody').empty();

        $.ajax({
            type: 'GET',
            url: '/LISFY/GETAREA',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=robillarea>"

                    + "<td style=width:400px;text-align:left>" + item.Mstr_Desc + "</td>"
                    + "<td style=display:none>" + item.Mstr_Key + "</td>"

                    + "</tr>";
                });

                $("#modelsize").css("width", "400");
                $("#header3").hide();
                $("#header").css("width", "400");
                $("#txt").css("width", "200");
                $("#searchlookup").css("left", "8%");
                $('#featuredSelectField option[value="1"]').text('Area');
                $('#featuredSelectField option[value="2"]').text('Code');
                $('#featuredSelectField option[value="3"]').hide();
                $("#lookupLabel").html("Area");
                $("#header").html("Area");
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $("#lookuptb").append(rows);

                $("#featuredSelectField option[value=1]").attr('selected', 'selected');




            },




            error: function (emp) {
                alert('error');
            }

        })
    })
    $(document).on('click', '#billwisesrchbank', function () {

        event.preventDefault();
        $("#txt").val("");
        $('#lookuptb tbody').empty();

        var table = $("#lookuptb").find('tbody');
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETBANKACCOUNT',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=robillbank>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"

                    + "</tr>";
                });

                $("#modelsize").css("width", "400");
                $("#header3").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $("#header").css("width", "400");
                $("#txt").css("width", "200");
                $("#searchlookup").css("left", "8%");
                $('#featuredSelectField option[value="1"]').text('Account');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#lookupLabel").html("Account");
                $("#header").html("Account");
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#lookuptb").append(rows);

                $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                $("#Billbanktb").append(rows);



            },




            error: function (emp) {
                alert('error');
            }

        })
    })
    $("#bankname").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#billwisesrchbank").click();

        }
    })

    $('body').on('click', '.robillbank', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $('body').on('dblclick', '.robillbank', function (evt) {
        event.preventDefault();

        var bankname = $(this).find("td:eq(0)").text();
        var banknameid = $(this).find("td:eq(1)").text();
        $("#bankname").val(bankname);
        $("#banknameid").val(banknameid);
        $("#txtbankname").val(bankname);
        $("#bankid").val(banknameid);
        $(".searchledgerclose").trigger('click');
    })


    $('body').on('click', '.robillarea', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $('body').on('dblclick', '.robillarea', function (evt) {
        event.preventDefault();

        var areaname = $(this).find("td:eq(0)").text();
        var areaid = $(this).find("td:eq(1)").text();
        $("#Billwisearea").val(areaname);
        $("#Billwiseareaid").val(areaid);
        $(".searchledgerclose").trigger('click');
    })

    $(document).on('click', '#srchBillwiseCorp', function () {

        event.preventDefault();
        $('#selectallbillwise').prop('checked', false);
        $('#AmountBillwise').val("");
        var temptotal = parseFloat(0);
        var tempbal = parseFloat(0);
        var tempallow = parseFloat(0);
        var tempcubal = parseFloat(0);

        var invno = parseFloat(0);
        $('#lookuptb tbody').empty();
        $('#selectareabillwisecollection').hide();
        $('#selectcorpbillwisecol').show();

        var table = $("#lookuptb").find('tbody');

        if ($("#selectbillMode option:selected").text() == "Daily") {

            var selectbillMode = 'Daily';
        }
        if ($("#selectbillMode option:selected").text() == "Monthly") {

            var selectbillMode = 'Monthly';
        }
        var areaid = $("#Billwiseareaid").val();
        if ($('#LabcollectionRadio').is(':checked')) {
            var optCollection1 = 1;
        }
        else {
            optCollection1 = 0;
        }
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETBILLWISECORP',
            data: { selectbillMode: selectbillMode, areaid: areaid, optCollection1: optCollection1 },
            dataType: 'json',
            success: function (data) {
                $("#txt").val("");

                var rows;

                $('#lookuptb tbody').empty();
                $("#Billareatb").hide();
                var rows;

                $.each(data, function (i, item) {
                    rows += "<tr class=robillcorp>"

                    + "<td style=width:400px;text-align:left>" + item.txtName + "</td>"
                     + "<td style=display:none>" + item.txtNameid + "</td>"

                    + "</tr>";


                });
                $("#modelsize").css("width", "400");
                $("#header3").hide();
                $("#txt").css("width", "200");
                $("#searchlookup").css("left", "8%");
                $("#header").css("width", "400");
                $('#featuredSelectField option[value="1"]').text('Corporate');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#lookupLabel").html("Corporate");
                $("#header").html("Corporate");
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#lookuptb").append(rows);

                $("#featuredSelectField option[value=1]").attr('selected', 'selected');


                $('body').on('click', '.ro', function (evt) {
                    event.preventDefault();
                    $("#Billareatb tr").removeClass('highlight_file');
                    $(this).addClass('highlight_file');
                })
                $('body').on('click', '.robillcorp', function (evt) {
                    event.preventDefault();
                    $("#lookuptb tr").removeClass('highlight_file');
                    $(this).addClass('highlight_file');
                })

                $('body').on('dblclick', '.robillcorp', function (evt) {
                    event.preventDefault();

                    var corpname = $(this).find("td:eq(0)").text();
                    var corpnameid = $(this).find("td:eq(1)").text();
                    $("#BillwiseCorp").val(corpname);
                    $("#BillwiseCorpid").val(corpnameid);
                    $(".searchledgerclose").trigger('click');

                    $.ajax({
                        type: 'GET',
                        url: '/LISFY/GETBILLWISECORPDATA',
                        data: { selectbillMode: selectbillMode, areaid: areaid, optCollection1: optCollection1, corpnameid: corpnameid },
                        dataType: 'json',
                        success: function (data) {
                            $('#maintablebillwise tbody').empty();
                            $('#maintablebillwise tfoot tr td').empty();


                            var rows;
                            var temptotal = parseFloat(0);
                            var tempbal = parseFloat(0);
                            var tempallow = parseFloat(0);
                            var tempcubal = parseFloat(0);
                            var invno = parseFloat(0);

                            $.each(data, function (i, item) {
                                i = i + 1;
                                rows += "<tr class=maintable>"
                                + "<td>" + i + "</td>"
                                 + "<td data-toggle='tooltip'title='" + item.invno + "'>" + item.invno + "</td>"
                                 + "<td data-toggle='tooltip'title='" + item.TempInvdate + "'>" + item.TempInvdate + "</td>"
                                  + "<td >" + '<input type=checkbox id=chk> ' + "</td>"
                                 + "<td data-toggle='tooltip'title='" + item.Inv_Name + "'>" + item.Inv_Name + "</td>"
                                 + "<td style=width:70px data-toggle='tooltip'title='" + item.AhMst_PName + "' >" + item.AhMst_PName + "</td>"
                                 + "<td data-toggle='tooltip'title='" + item.Inv_Netamt + "'>" + item.Inv_Netamt + "</td>"
                                  + "<td data-toggle='tooltip'title='" + item.BalAmt + "'>" + item.BalAmt + "</td>"
                                  + "<td contenteditable='true' id='allowamt' >" + '' + "</td>"
                                   + "<td id='balamt'data-toggle='tooltip'title='" + item.BalAmt + "' >" + item.BalAmt + "</td>"
                                + "<td style=display:none>" + item.Inv_InsId + "</td>"
                                + "<td style=display:none>" + item.txtPhone + "</td>"
                                + "</tr>";




                                if (item.Inv_Netamt == "") {
                                    item.Inv_Netamt = 0;
                                }
                                temptotal += parseFloat(item.Inv_Netamt);

                                tempbal += parseFloat(item.BalAmt);

                                tempcubal += parseFloat(item.BalAmt);

                                var invno = item.invno;
                                $('#maintablebillwise tfoot tr td').eq(5).html('Total');
                                $('#maintablebillwise tfoot tr td').eq(6).html(temptotal);
                                $('#maintablebillwise tfoot tr td').eq(7).html(tempbal);
                                $('#maintablebillwise tfoot tr td').eq(9).html(tempcubal);


                                $('#maintablebillwise tfoot tr td').eq(6).attr("data-toggle='tooltip'title='" + temptotal + "'");
                                $('#maintablebillwise tfoot tr').find("td:eq(7)").attr("data-toggle='tooltip'title=" + tempbal + "");
                                $('#maintablebillwise tfoot tr').find("td:eq(9)").attr("data-toggle='tooltip'title=" + tempcubal + "");


                            });

                            if (invno != null) {
                                $("#maintablebillwise").append(rows);
                                $('#maintablebillwise tfoot').show();

                            }

                            if (data.length < 1) {
                                $('#maintablebillwise tfoot').hide();
                            }

                            $.ajax({
                                type: "POST",
                                url: "/LISFY/GETLABLSUMM",
                                data: JSON.stringify({ corpnameid: corpnameid }),
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (data) {
                                    $.each(data, function (i, item) {
                                        $("#labsum").text(item.LblSumm);

                                    })
                                }
                            })


                        },




                        error: function (emp) {
                            alert('error');
                        }

                    })

                })
            }
        })
    })
    $('#maintablebillwise').on('click', 'input[type="checkbox"]', function () {
        var TempBalAmt = parseFloat(0);
        var BalanceAmt = parseFloat(0);
        var lblSelectedBillAmt;

        $("#maintablebillwise tbody tr").each(function () {
            var row = $(this);
            if (row.find("td:eq(3) input[type='checkbox']").is(':checked')) {
                $(this).prop('checked', true);

                TempBalAmt = row.find("td").eq(7).html();

                BalanceAmt += parseFloat(TempBalAmt);
                lblSelectedBillAmt = "Selected Bill Total: " + BalanceAmt;
                $('#selectbill').text(lblSelectedBillAmt);
            }

            else {
                $(this).prop('checked', false);

                lblSelectedBillAmt = "Selected Bill Total: " + BalanceAmt;
                $('#selectbill').text(lblSelectedBillAmt);

            }

        })

    })
    $('#selectallbillwise').change(function () {
        var TempBalAmt = parseFloat(0);
        var BalanceAmt = parseFloat(0);
        var lblSelectedBillAmt;

        if ($("#selectallbillwise").prop('checked') == true) {
            $("#maintablebillwise tbody tr").each(function () {
                var row = $(this);
                if (row.find("td:eq(3) input[type='checkbox']").is(':checked')) {
                    TempBalAmt = row.find("td").eq(7).html();

                    BalanceAmt += parseFloat(TempBalAmt);
                    lblSelectedBillAmt = "Selected Bill Total: " + BalanceAmt;
                    $('#selectbill').text(lblSelectedBillAmt);
                }
            })
        }
        if ($("#selectallbillwise").prop('checked') == false) {
            lblSelectedBillAmt = "Selected Bill Total: " + 0;
            $('#selectbill').text(lblSelectedBillAmt);
        }

    })


    $(document).ready(function () {


        $('#chqDate').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });

        $('#Cashradio').prop("checked", true);
        $('#maintablebillwise tfoot').hide();

        var BalanceAmt = parseFloat(0);
        var tempamt = parseFloat(0);
        $("#selectbill").text("");

        $('#chqdiv1').hide();
        $('#chqdiv2').hide();
        $('#chqdiv3').hide();
        $('#chqdiv').hide();




        $('#uptodate').prop("disabled", true);
        $('#selectallbillwise').change(function () {
            if ($("#selectallbillwise").prop('checked') == true) {
                $("#maintablebillwise input[type='checkbox']").each(function () {
                    $(this).prop("checked", true);

                });

            }
            else {
                if ($("#selectallbillwise").prop('checked') == false) {
                    $("#maintablebillwise input[type='checkbox']").each(function () {
                        $(this).prop("checked", false);

                    });
                }
            }

        })
        $('#selectallbillwise').change(function () {
            var TempBalAmt = parseFloat(0);
            var BalanceAmt = parseFloat(0);
            var lblSelectedBillAmt;

            if ($("#selectallbillwise").prop('checked') == true) {
                $("#maintablebillwise tbody tr").each(function () {
                    var row = $(this);
                    if (row.find("td:eq(3) input[type='checkbox']").is(':checked')) {
                        TempBalAmt = row.find("td").eq(7).html();

                        BalanceAmt += parseFloat(TempBalAmt);
                        lblSelectedBillAmt = "Selected Bill Total: " + BalanceAmt;
                        $('#selectbill').text(lblSelectedBillAmt);
                    }
                })
            }
            if ($("#selectallbillwise").prop('checked') == false) {
                lblSelectedBillAmt = "Selected Bill Total: " + 0;
                $('#selectbill').text(lblSelectedBillAmt);
            }

        })

    })

    $('#Uptobillwise').change(function () {
        if ($("#Uptobillwise").prop('checked') == true) {
            $('#uptodate').prop("disabled", false);
        }
        if ($("#Uptobillwise").prop('checked') == false) {
            $('#uptodate').prop("disabled", true);
            $('#uptodate').val("@ViewBag.cashcurdate");
        }

    })

    $('#Chequeradio').change(function () {
        if ($("#Chequeradio").prop('checked') == true) {

            $('#chqdiv').show();
            $('#chqdiv2').show();
            $('#chqdiv3').show();
            $('#chqdiv1').show();


            $("#Cashradio").prop('checked', false);
        }
        if ($("#Chequeradio").prop('checked') == false) {
            $("#Cashradio").prop('checked', true);
            $('#chqdiv').hide();
            $('#chqdiv2').hide();
            $('#chqdiv3').hide();
            $('#chqdiv1').hide();

        }

    })
    $('#Cashradio').change(function () {
        if ($("#Cashradio").prop('checked') == true) {

            $('#chqdiv').hide();
            $('#chqdiv2').hide();
            $('#chqdiv3').hide();
            $('#chqdiv1').hide();
            $("#bankname").val("");
            $("#banknameid").val("");

            $("#chqno").val("");
            $("#narration").val("");
            $("#chqDate").val("@ViewBag.cashcurdate");

            $("#Chequeradio").prop('checked', false);
        }
        if ($("#Cashradio").prop('checked') == false) {
            $("#Chequeradio").prop('checked', true);
            $('#chqdiv').show();
            $('#chqdiv2').show();
            $('#chqdiv3').show();
            $('#chqdiv1').show();


        }
    })

    $(document).on('click', '#AutoAllocatebtn', function (e) {

        var temptotal = parseFloat(0);
        var tempbal = parseFloat(0);
        var tempallow = parseFloat(0);
        var tempcubal = parseFloat(0);
        var allowamt = parseFloat(0);
        var currentbal = parseFloat(0);
        var billwisearea = new Array();
        var autos = new Array();
        let autoss = new Array();
        var labno = parseFloat(0);


        var allowamt = $('#AmountBillwise').val();
        $('#BillWisesrchs').prop('disabled', false);
        $('#BillWisePrint').prop('disabled', false);
        $('#BillwiseSave').prop('disabled', false);

        $("#maintablebillwise tbody tr").each(function () {
            var bill = {};
            var row = $(this);

            if (row.find("td:eq(3) input[type='checkbox']").is(':checked')) {
                var ChkSelectS = true;
            }
            else {
                var ChkSelectS = false;
            }


            bill.selectall = ChkSelectS;
            bill.slno = row.find("td").eq(0).html();
            bill.labno = row.find("td").eq(1).html();
            bill.date = row.find("td").eq(2).html();
            bill.pat = row.find("td").eq(4).html();
            bill.corpname = row.find("td").eq(5).html();
            bill.amount = row.find("td").eq(6).html();
            bill.balamount = row.find("td").eq(7).html();
            bill.TempBalAmt = row.find("td").eq(7).html();
            bill.currentbal = row.find("td").eq(9).html();
            bill.corpid = row.find("td").eq(10).html();
            bill.phonono = row.find("td").eq(11).html();

            billwisearea.push(bill);

        })

        $.ajax({
            type: "POST",
            url: "/LISFY/GETAutoAlloc",
            data: JSON.stringify({ billwisearea: billwisearea, allowamt: allowamt }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Result === "Excess Amount,Check the Total Balance Amount") {
                    alert("Excess Amount,Check the Total Balance Amount");
                    $('#AmountBillwise').focus();
                    return false;
                }
                if (data.Result === "Please Select Invoice") {
                    alert("Please Select Invoice");
                    $('#AmountBillwise').focus();
                    return false;
                }
                var rows;
                var temptotal = parseFloat(0);
                var tempbal = parseFloat(0);
                var tempcubal = parseFloat(0);

                var tempallow = parseFloat(0);
                $.each(data, function (i, item) {
                    if (item.selectall == true) {
                        $('#maintablebillwise tbody').empty();

                        rows += "<tr class=maintable>"
                                    + "<td>" + item.slno + "</td>"
                                     + "<td data-toggle='tooltip'title='" + item.labno + "'>" + item.labno + "</td>"
                                       + "<td data-toggle='tooltip'title='" + item.date + "'>" + item.date + "</td>"
                            + "<td >" + '<input type=checkbox id=chk checked> ' + "</td>"
                                      + "<td data-toggle='tooltip'title='" + item.pat + "'>" + item.pat + "</td>"
                                     + "<td data-toggle='tooltip'title='" + item.corpname + "'>" + item.corpname + "</td>"
                                     + "<td data-toggle='tooltip'title='" + item.amount + "' >" + item.amount + "</td>"
                                      + "<td data-toggle='tooltip'title='" + item.balamount + "' >" + item.balamount + "</td>"
                                      + "<td contenteditable='true' id='allowamt'data-toggle='tooltip'title='" + item.AllowAmt + "'  >" + item.AllowAmt + "</td>"
                                       + "<td id='balamt' data-toggle='tooltip'title='" + item.currentbal + "' >" + item.currentbal + "</td>"
                                       + "<td style=display:none>" + item.corpid + "</td>"
                                + "<td style=display:none>" + item.phonono + "</td>"

                                    + "</tr>";
                        labno = item.labno;
                        temptotal += parseFloat(item.amount);
                        tempbal += parseFloat(item.balamount);
                        tempcubal += parseFloat(item.currentbal);
                        tempallow += parseFloat(item.AllowAmt);
                        $('#maintablebillwise tfoot tr td').eq(5).html('Total');
                        $('#maintablebillwise tfoot tr td').eq(6).html(temptotal);
                        $('#maintablebillwise tfoot tr td').eq(7).html(tempbal);
                        $('#maintablebillwise tfoot tr td').eq(8).html(tempallow);
                        $('#maintablebillwise tfoot tr td').eq(9).html(tempcubal);

                    }
                    else if (item.selectall == false) {
                        $('#maintablebillwise tbody').empty();

                        rows += "<tr class=maintable>"
                                    + "<td>" + item.slno + "</td>"
                                     + "<td data-toggle='tooltip'title=" + item.labno + ">" + item.labno + "</td>"
                                       + "<td data-toggle='tooltip'title='" + item.date + "'>" + item.date + "</td>"
                            + "<td >" + '<input type=checkbox id=chk > ' + "</td>"
                                      + "<td data-toggle='tooltip'title='" + item.pat + "'>" + item.pat + "</td>"
                                     + "<td data-toggle='tooltip'title='" + item.corpname + "'>" + item.corpname + "</td>"
                                     + "<td data-toggle='tooltip'title='" + item.amount + "' >" + item.amount + "</td>"
                                      + "<td data-toggle='tooltip'title='" + item.balamount + "'>" + item.balamount + "</td>"
                                      + "<td contenteditable='true' id='allowamt'data-toggle='tooltip'title=" + item.AllowAmt + " >" + item.AllowAmt + "</td>"
                                       + "<td id='balamt' data-toggle='tooltip'title='" + item.currentbal + "'>" + item.currentbal + "</td>"
                                          + "<td style=display:none>" + item.corpid + "</td>"
                                + "<td style=display:none>" + item.phonono + "</td>"
                                    + "</tr>";

                        labno = item.labno;
                        temptotal += parseFloat(item.amount);

                        tempbal += parseFloat(item.balamount);

                        tempcubal += parseFloat(item.currentbal);

                        tempallow += parseFloat(item.AllowAmt);

                        $('#maintablebillwise tfoot tr td').eq(5).html('Total');
                        $('#maintablebillwise tfoot tr td').eq(6).html(temptotal);
                        $('#maintablebillwise tfoot tr td').eq(7).html(tempbal);
                        $('#maintablebillwise tfoot tr td').eq(8).html(tempallow);
                        $('#maintablebillwise tfoot tr td').eq(9).html(tempcubal);

                    }
                });

                if (labno != null) {
                    $("#maintablebillwise").append(rows);
                    $('#maintablebillwise tfoot').show();
                }

                $("#maintablebillwise tr").each(function () {


                    var colorstatusred = $(this).find("td:eq(8)").text();
                    if (colorstatusred == "0.00") {

                        $(this).css('background', '');
                    }
                    if (colorstatusred != "0.00") {

                        if (colorstatusred != "") {

                            $(this).css('background', '#DB7093');

                        }

                        else if (colorstatusred == "" || colorstatusred == "0.00") {

                            $(this).css('background', '');
                        }
                    }

                })
            }
        })

    })


//*******BILLEISECOLLECTION-AREA-SAVE******************************
    $(document).on('click', '#BillwiseSave', function (e) {
        event.preventDefault();
        $('#BillwiseSave').prop('disabled', true);
        $('#BillWisesrchs').prop('disabled', false);
        $('#BillWisePrint').prop('disabled', false);

        var billwisearea = new Array();
        var billsave = {};
        var allowamt = $('#maintablebillwise tfoot tr td').eq(8).html();
        var currentbal = $('#maintablebillwise tfoot tr td').eq(9).html();


        if ($('#LabcollectionRadio').is(':checked')) {
            var optCollection1 = 1;
        }
        else {
            optCollection1 = 0;
        }
        var currentdate = $('#curntdate').val();
        var bankname = $("#bankname").val();
        var chqno = $("#chqno").val();
        var narration = $("#narration").val();
        var chqDate = $("#chqDate").val();
        var bankid = $("#banknameid").val();
        if ($("#Chequeradio").prop('checked') == true) {
            var Chequeradio = 1;
        }
        if ($("#Cashradio").prop('checked') == true) {
            var Cashradio = 1;

        }

        $("#maintablebillwise tbody tr").each(function () {
            var bill = {};
            var row = $(this);

            if (row.find("td:eq(3) input[type='checkbox']").is(':checked')) {
                var ChkSelectS = true;
            }
            else {
                var ChkSelectS = false;
            }

            bill.selectall = ChkSelectS;
            bill.TempBalAmt = row.find("td").eq(7).html();
            bill.collallowAmt = row.find("td").eq(8).html();
            bill.Inv_Netamt = row.find("td").eq(6).html();
            bill.invno = row.find("td").eq(1).html();
            bill.currentbal = row.find("td").eq(9).html();
            bill.Inv_InsId = row.find("td").eq(10).html();
            bill.txtPhone = row.find("td").eq(11).html();
            bill.txtname = row.find("td").eq(4).html();
            billwisearea.push(bill);

        })
        if (confirm("Do you want to Save?")) {
            $.ajax({
                type: "POST",
                url: "/LISFY/BILLWISESAVE",
                data: JSON.stringify({ billwisearea: billwisearea, allowamt: allowamt, optCollection1: optCollection1, currentdate: currentdate, bankname: bankname, chqno: chqno, narration: narration, chqDate: chqDate, Chequeradio: Chequeradio, Cashradio: Cashradio, bankid: bankid, currentbal: currentbal }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $('#BillwiseSave').prop('disabled', false);
                    if (data.Result === "Invalid Bank") {
                        alert("Invalid Bank");
                        $("#bankname").focus();
                        $('#BillwiseSave').prop('disabled', false);

                        return false;
                    }
                    if (data.Result === "Invalid Cheque No") {
                        alert("Invalid Cheque No");
                        $("#chqno").focus();
                        $('#BillwiseSave').prop('disabled', false);
                        return false;
                    }
                    if (data.Result === "InValid Bill Amount") {
                        alert("InValid Bill Amount");
                        $("#AmountBillwise").focus();
                        $('#BillwiseSave').prop('disabled', false);

                        return false;
                    }


                    alert("successfully");
                    $("#maintablebillwise tbody").empty();
                    $("#maintablebillwise tfoot tr td").empty();

                    $('#BillwiseSave').prop('disabled', false);
                    var BalanceAmt = parseFloat(0);
                    $("#selectbill").text("");

                    $('#invallowtotal').val("");

                    $('#Billwisearea').val("");
                    $('#BillwiseCorp').val("");
                    $('#selectbillMode').val("");
                    $('#AmountBillwise').val("");
                    $("#Chequeradio").prop('checked', false);
                    $("#selectallbillwise").prop('checked', false);
                    $('#uptodate').prop("disabled", true);
                    $('#uptodate').val("@ViewBag.cashcurdate");
                    $("#Cashradio").prop('checked', true);
                    $('#invtotal').val("");
                    $('#invbaltotal').val("");
                    $('#invcurnttotal').val("");
                    $('#chqdiv').hide();
                    $('#chqdiv2').hide();
                    $('#chqdiv3').hide();
                    $('#chqdiv1').hide();
                    $("#bankname").val("");
                    $("#chqno").val("");
                    $("#narration").val("");
                    $("#labsum").hide();

                }
            })
        }
        else {
            return false;
        }








    })
    //*************END-BILLWISECOLLECTION-AREA-SAVE******************




    $('#maintablebillwise').on('focusout input', 'td[contenteditable]', function () {
        var manuvalamt = parseFloat(0);
        var manuvalbal = parseFloat(0);
        var manuvalcurbal = parseFloat(0);
        var tempcubal = parseFloat(0);
        var tempallow = parseFloat(0);

        $("#maintablebillwise tbody tr").each(function () {


            manuvalamt = $(this).find("td").eq(8).html();
            manuvalbal = $(this).find("td").eq(7).html();
            manuvalcurbal = manuvalbal - manuvalamt;
            $(this).find("td").eq(9).html(manuvalcurbal);




            if (manuvalamt != "") {
                tempallow += parseFloat(manuvalamt);
            }
            if (manuvalcurbal != "") {
                tempcubal += parseFloat(manuvalcurbal);
            }



        })


        $('#maintablebillwise tfoot tr td').eq(8).html(tempallow);
        $('#maintablebillwise tfoot tr td').eq(9).html(tempcubal);

    })

    $('body').on('click', '.maintable', function (evt) {
        if ($(this).css("background-color") == "rgb(219, 112, 147)") {
            $(this).css("background-color", "");
            $(this).find("td:eq(8)").addClass('active_file');

        }


        $("#maintablebillwise tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');

        $("#maintablebillwise tr").focusout(function () {
            $(this).find("td:eq(8)").removeClass('active_file');

            var colorstatusred = $(this).find("td:eq(8)").text();
            if (colorstatusred == "0.00") {

                $(this).css('background', '');
            }
            if (colorstatusred != "0.00") {

                if (colorstatusred != "") {

                    $(this).css('background', '#DB7093');

                }

                else if (colorstatusred == "" || colorstatusred == "0.00") {

                    $(this).css('background', '');
                }
            }

        })




    })

    $(document).on('click', '#BillWisePrint', function () {
        event.preventDefault();
        $('#BillWisePrint').prop('disabled', true);
        $('#BillWisesrchs').prop('disabled', false);

        $('#BillwiseSave').prop('disabled', false);
        var currentdate = $("#curntdate").val();
        var corpid = $("#BillwiseCorpid").val();
        var txtName = $("#BillwiseCorp").val();
        if (corpid == "") {
            alert("please select corporation name...");
            $("#BillwiseCorp").focus();
            return false;
        }
        if (confirm("Do you want to see Print -  ?")) {
            $.ajax({
                type: 'POST',
                url: '/LISFY/BILLWISEPRINT',
                data: { currentdate: currentdate, corpid: corpid, txtName: txtName },
                dataType: 'json',
                success: function (data) {

                    if (data.Result === "OK") {
                        window.open("/LISFY/GetPDFbillwise", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=200,width=950,height=700");

                    }
                    $('#BillWisePrint').prop('disabled', false);



                }
            })
        }
        else {
            return false;
        }

    })

    $(document).on('click', '#BillWisesrchs', function () {
        $("#selectbill").text("");
        //event.preventDefault();
        $('#BillWisePrint').prop('disabled', false);
        $('#selectallbillwise').prop('checked', false);
        $('#AmountBillwise').val("");

        $('#BillwiseSave').prop('disabled', false);
        $('#BillWisesrchs').prop('disabled', true);
        var temptotal = parseFloat(0);
        var tempbal = parseFloat(0);
        var tempallow = parseFloat(0);
        var tempcubal = parseFloat(0);
        var invno = 0;
        var corpid = $("#BillwiseCorpid").val();
        var areaid = $("#Billwiseareaid").val();
        if ($("#selectbillMode option:selected").text() == "Daily") {

            var selectbillMode = 'Daily';
        }
        if ($("#selectbillMode option:selected").text() == "Monthly") {

            var selectbillMode = 'Monthly';
        }
        if ($('#Uptobillwise').prop('checked')) {
            var chkup = 1;
        }
        else {
            var chkup = 0;
        }
        var update = $('#uptodate').val();

        $.ajax({
            type: 'POST',
            url: '/LISFY/BILLWISEFETCH',
            data: { corpid: corpid, areaid: areaid, selectbillMode: selectbillMode, chkup: chkup, update: update },
            dataType: 'json',
            success: function (data) {
                $('#BillWisesrchs').prop('disabled', false);
                $('#maintablebillwise tbody').empty();
                $('#maintablebillwise tfoot tr td').empty();

                var rows;


                $.each(data, function (i, item) {

                    i = i + 1;
                    rows += "<tr class=maintable>"
                    + "<td>" + i + "</td>"
                     + "<td data-toggle='tooltip'title='" + item.invno + "'>" + item.invno + "</td>"
                     + "<td data-toggle='tooltip'title='" + item.TempInvdate + "'>" + item.TempInvdate + "</td>"
                      + "<td>" + '<input type=checkbox> ' + "</td>"
                     + "<td data-toggle='tooltip'title='" + item.Inv_Name + "'>" + item.Inv_Name + "</td>"
                     + "<td data-toggle='tooltip'title='" + item.AhMst_PName + "'>" + item.AhMst_PName + "</td>"
                     + "<td data-toggle='tooltip'title='" + item.Inv_Netamt + "'>" + item.Inv_Netamt + "</td>"
                      + "<td data-toggle='tooltip'title='" + item.BalAmt + "'>" + item.BalAmt + "</td>"
                      + "<td contenteditable='true' id='allowamt'>" + '' + "</td>"
                       + "<td id='balamt' data-toggle='tooltip'title='" + item.BalAmt + "'>" + item.BalAmt + "</td>"
                    + "<td style=display:none>" + item.Inv_InsId + "</td>"
                    + "<td style=display:none>" + item.txtPhone + "</td>"


                    + "</tr>";
                    if (item.Inv_Netamt == "") {
                        item.Inv_Netamt = 0;
                    }
                    temptotal += parseFloat(item.Inv_Netamt);

                    tempbal += parseFloat(item.BalAmt);

                    tempcubal += parseFloat(item.BalAmt);

                    $('#maintablebillwise tfoot tr td').eq(5).html('Total');
                    $('#maintablebillwise tfoot tr td').eq(6).html(temptotal);
                    $('#maintablebillwise tfoot tr td').eq(7).html(tempbal);
                    $('#maintablebillwise tfoot tr td').eq(9).html(tempcubal);


                });

                $("#maintablebillwise").append(rows);
                $('#maintablebillwise tfoot').show();

                if (data.length < 1) {
                    $('#maintablebillwise tfoot').hide();
                }

                $.ajax({
                    type: 'POST',
                    url: '/LISFY/BILLWISEFETCHLABEL',
                    data: { corpid: corpid, areaid: areaid, selectbillMode: selectbillMode, chkup: chkup, update: update },
                    dataType: 'json',
                    success: function (data) {

                        $.each(data, function (i, item) {
                            $("#labsum").val(item.LblSumm);
                        })
                    }
                })

                $('#BillWisesrchs').prop('disabled', false);


            },




            error: function (emp) {
                alert('error');
            }

        })


    })
    $('#BillwiseExit').click(function () {
        location.reload();

    })
    $('#BillwisExit').click(function () {
        location.reload();

    })
    $('#closebillwise').click(function () {
        location.reload();

    })
    $('#closebill').click(function () {
        location.reload();

    })
    $(document).on('click', '#BillWiseNewone', function (e) {
        event.preventDefault();
        var BalanceAmt = parseFloat(0);
        $("#maintablebillwise tbody").empty();
        $('#BillWisePrint').prop('disabled', false);
        $('#BillWisesrchs').prop('disabled', false);
        $('#BillwiseSave').prop('disabled', false);
        $('#invallowtotal').val("");
        $('#Billwisearea').val("");
        $('#BillwiseCorp').val("");
        $('#AmountBillwise').val("");
        $("#Chequeradio").prop('checked', false);
        $("#selectallbillwise").prop('checked', false);
        $('#selectbillMode').val("");
        $('#uptodate').prop("disabled", true);
        $('#uptodate').val("@ViewBag.cashcurdate");
        $("#Cashradio").prop('checked', true);
        $('#invtotal').val("");
        $('#invbaltotal').val("");
        $('#invcurnttotal').val("");
        $('#chqdiv').hide();
        $('#chqdiv2').hide();
        $('#chqdiv3').hide();
        $('#chqdiv1').hide();
        $("#bankname").val("");
        $("#chqno").val("");
        $("#narration").val("");
        $("#BillwiseCorpid").val("");
        $("#Billwiseareaid").val("");
        $('#maintablebillwise tfoot').hide();
        $("#selectbill").text("");

        $("#labsum").text("");







    })
    $("#AmountBillwise").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });




    $(document).ready(function () {

        $('#Cashotp').prop("checked", true);
        $('#billwiseLab').prop("checked", true);

        $("#maintablebillwise2 tfoot").hide();
        var BalanceAmt = parseFloat(0);
        var tempamt = parseFloat(0);
        $("#selectbillab").text("");


        $('#chqdivv').hide();
        $('#chqdivv1').hide();
        $('#chqdivv2').hide();
        $('#chqdivv3').hide();
        $('#chqdivv4').hide();
        $('#chqdivv5').hide();

        $('#fromdate').prop("disabled", true);
        $('#uptobillwise1').prop("disabled", true);
        $('#chkselectall').change(function () {
            if ($("#chkselectall").prop('checked') == true) {
                $("#maintablebillwise2 input[type='checkbox']").each(function () {
                    $(this).prop("checked", true);

                });

            }
            else {
                if ($("#selectallbillwise").prop('checked') == false) {
                    $("#maintablebillwise2 input[type='checkbox']").each(function () {
                        $(this).prop("checked", false);

                    });
                }
            }

        })
        $('#chkselectall').change(function () {
            var TempBalAmt = parseFloat(0);
            var BalanceAmt = parseFloat(0);
            var lblSelectedBillAmt;

            if ($("#chkselectall").prop('checked') == true) {
                $("#maintablebillwise2 tbody tr").each(function () {
                    var row = $(this);
                    if (row.find("td:eq(3) input[type='checkbox']").is(':checked')) {
                        TempBalAmt = row.find("td").eq(6).html();

                        BalanceAmt += parseFloat(TempBalAmt);
                        lblSelectedBillAmt = "Selected Bill Total: " + BalanceAmt;
                        $('#selectbillab').text(lblSelectedBillAmt);
                    }
                })
            }
            if ($("#chkselectall").prop('checked') == false) {
                lblSelectedBillAmt = "Selected Bill Total: " + 0;
                $('#selectbillab').text(lblSelectedBillAmt);
            }

        })
    })
    $('#otpUpto').change(function () {
        if ($("#otpUpto").prop('checked') == true) {
            $('#uptobillwise1').prop("disabled", false);
            $('#fromdate').prop("disabled", false);
        }
        if ($("#otpUpto").prop('checked') == false) {
            $('#uptobillwise1').prop("disabled", true);
            $('#fromdate').prop("disabled", true);
            $('#uptobillwise1').val("@ViewBag.cashcurdate");
            $('#fromdate').val("@ViewBag.cashcurdate");
        }

    })
    $('#maintablebillwise2').on('click', 'input[type="checkbox"]', function () {
        var TempBalAmt = parseFloat(0);
        var BalanceAmt = parseFloat(0);
        var lblSelectedBillAmt;

        $("#maintablebillwise2 tbody tr").each(function () {
            var row = $(this);
            if (row.find("td:eq(3) input[type='checkbox']").is(':checked')) {
                $(this).prop('checked', true);

                TempBalAmt = row.find("td").eq(6).html();

                BalanceAmt += parseFloat(TempBalAmt);
                lblSelectedBillAmt = "Selected Bill Total: " + BalanceAmt;
                $('#selectbillab').text(lblSelectedBillAmt);
            }

            else {
                $(this).prop('checked', false);

                lblSelectedBillAmt = "Selected Bill Total: " + BalanceAmt;
                $('#selectbillab').text(lblSelectedBillAmt);

            }

        })

    })


    $(document).on('click', '#srchCorp', function () {

        event.preventDefault();
        var temptotal = parseFloat(0);
        var tempbal = parseFloat(0);
        var tempallow = parseFloat(0);
        var tempcubal = parseFloat(0);

        var invno = parseFloat(0);
        $('#BillWiPrint').prop('disabled', false);
        $('#lookuptb tbody').empty();

        var table = $("#lookuptb").find('tbody');
        if ($('#billwiseLab').is(':checked')) {
            var optCollection1 = 1;
        }
        else {
            optCollection1 = 0;
        }
        if ($('#billwisePurchase').is(':checked')) {
            var optCollectionpur = 1;
        }
        else {
            optCollectionpur = 0;
        }
        if ($('#billwisePharmacy').is(':checked')) {
            var optCollectionpha = 1;
        }
        else {
            optCollectionpha = 0;
        }
        if ($('#otpUpto').is(':checked')) {
            var otpUpto = 1;
        }
        else {
            otpUpto = 0;
        }
        var uptodate = $('#uptobillwise1').val();
        var fromdate = $('#fromdate').val();

        $.ajax({
            type: 'GET',
            url: '/LISFY/BILLWISECORPORATION',
            data: { optCollectionpur: optCollectionpur, optCollectionpha: optCollectionpha, optCollection1: optCollection1, otpUpto: otpUpto, uptodate: uptodate, fromdate: fromdate },
            dataType: 'json',
            success: function (data) {
                $("#txt").val("");

                var rows;

                $('#lookuptb tbody').empty();

                var rows;

                $.each(data, function (i, item) {
                    rows += "<tr class=robillcorp2>"

                    + "<td style=width:400px;text-align:left>" + item.txtName + "</td>"
                     + "<td style=display:none>" + item.txtNameid + "</td>"
                      + "<td style=display:none>" + item.txtPhone + "</td>"

                    + "</tr>";


                });
                $("#modelsize").css("width", "400");
                $("#header3").hide();
                $("#txt").css("width", "200");
                $("#header").css("width", "400");
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#searchlookup").css("left", "8%");
                $('#featuredSelectField option[value="1"]').text('Corporate');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#lookupLabel").html("Corporate");
                $("#header").html("Corporate");
                $("#header2").hide();
                $("#lookuptb").append(rows);

                $("#featuredSelectField option[value=1]").attr('selected', 'selected');

                $('body').on('click', '.robillcorp2', function (evt) {
                    event.preventDefault();
                    $("#lookuptb tr").removeClass('highlight_file');
                    $(this).addClass('highlight_file');
                })
                $('body').on('dblclick', '.robillcorp2', function (evt) {
                    event.preventDefault();

                    var corpname = $(this).find("td:eq(0)").text();
                    var corpnameid = $(this).find("td:eq(1)").text();
                    var corphone = $(this).find("td:eq(2)").text();
                    $("#Corptxt").val(corpname);
                    $("#Corpid").val(corpnameid);
                    $("#Corphone").val(corphone);

                    $(".searchledgerclose").trigger('click');


                    $.ajax({
                        type: 'GET',
                        url: '/LISFY/BILLWISECORPDATA',
                        data: { optCollectionpur: optCollectionpur, optCollectionpha: optCollectionpha, optCollection1: optCollection1, corpnameid: corpnameid, otpUpto: otpUpto, uptodate: uptodate, fromdate: fromdate },
                        dataType: 'json',
                        success: function (data) {
                            $('#maintablebillwise2 tbody').empty();
                            $('#maintablebillwise2 tfoot tr td').empty();
                            var rows;
                            var temptotal = parseFloat(0);
                            var tempbal = parseFloat(0);
                            var tempallow = parseFloat(0);
                            var tempcubal = parseFloat(0);
                            var invno = parseFloat(0);
                            $.each(data, function (i, item) {
                                i = i + 1;
                                rows += "<tr class=maintable2>"
                                + "<td>" + i + "</td>"
                                 + "<td data-toggle='tooltip'title='" + item.invno + "'>" + item.invno + "</td>"
                                 + "<td data-toggle='tooltip'title='" + item.TempInvdate + "'>" + item.TempInvdate + "</td>"
                                  + "<td>" + '<input type=checkbox id=chk> ' + "</td>"
                                 + "<td data-toggle='tooltip'title='" + item.Inv_Name + "'>" + item.Inv_Name + "</td>"
                                 + "<td data-toggle='tooltip'title='" + item.Inv_Netamt + "'>" + item.Inv_Netamt + "</td>"
                                  + "<td data-toggle='tooltip'title='" + item.BalAmt + "'>" + item.BalAmt + "</td>"
                                  + "<td contenteditable='true' id='allowamt' >" + '' + "</td>"
                                   + "<td id='balamt'data-toggle='tooltip'title='" + item.BalAmt + "'>" + item.BalAmt + "</td>"
                                + "</tr>";



                                if (item.Inv_Netamt == "") {
                                    item.Inv_Netamt = 0;
                                }
                                temptotal += parseFloat(item.Inv_Netamt);

                                tempbal += parseFloat(item.BalAmt);

                                tempcubal += parseFloat(item.BalAmt);

                                var invno = item.invno;
                                $('#maintablebillwise2 tfoot tr td').eq(4).html('Total');

                                $('#maintablebillwise2 tfoot tr td').eq(5).html(temptotal);
                                $('#maintablebillwise2 tfoot tr td').eq(6).html(tempbal);
                                $('#maintablebillwise2 tfoot tr td').eq(8).html(tempcubal);

                            });
                            if (invno != null) {
                                $("#maintablebillwise2").append(rows);
                                $("#maintablebillwise2 tfoot").show();

                            }

                            if (data.length < 1) {
                                $('#maintablebillwise2 tfoot').hide();
                            }
                            $.ajax({
                                type: "POST",
                                url: "/LISFY/GETBILLWISELABLSUMM",
                                data: JSON.stringify({ corpnameid: corpnameid }),
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (data) {
                                    $.each(data, function (i, item) {
                                        $("#billlabsum").text(item.LblSumm);

                                    })
                                }
                            })
                        },




                        error: function (emp) {
                            alert('error');
                        }

                    })

                })
            }
        })
    })



    $(document).on('click', '#Autobtn', function (e) {
        event.preventDefault();
        var temptotal = parseFloat(0);
        var tempbal = parseFloat(0);
        var tempallow = parseFloat(0);
        var tempcubal = parseFloat(0);
        var allowamt = parseFloat(0);
        var currentbal = parseFloat(0);
        var billwisearea = new Array();

        var labno = parseFloat(0);

        $('#BillWiPrint').prop('disabled', false);
        var allowamt = $('#Amounttxt').val();


        $("#maintablebillwise2 tbody tr").each(function () {
            var bill = {};
            var row = $(this);
            if (row.find("td:eq(3) input[type='checkbox']").is(':checked')) {
                var ChkSelectS = true;
            }
            else {
                var ChkSelectS = false;
            }


            bill.selectall = ChkSelectS;
            bill.slno = row.find("td").eq(0).html();
            bill.labno = row.find("td").eq(1).html();
            bill.date = row.find("td").eq(2).html();
            bill.pat = row.find("td").eq(4).html();
            bill.amount = row.find("td").eq(5).html();
            bill.balamount = row.find("td").eq(6).html();
            bill.TempBalAmt = row.find("td").eq(6).html();
            bill.currentbal = row.find("td").eq(8).html();
            billwisearea.push(bill);

        })

        $.ajax({
            type: "POST",
            url: "/LISFY/BillwiseGetAutoAlloc",
            data: JSON.stringify({ billwisearea: billwisearea, allowamt: allowamt }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Result === "Excess Amount,Check the Total Balance Amount") {
                    alert("Excess Amount,Check the Total Balance Amount");
                    $("#Amounttxt").focus();
                    return false;
                }
                if (data.Result === "Please Select Invoice") {
                    alert("Please Select Invoice");
                    $("#Amounttxt").focus();
                    return false;
                }
                var rows;
                var temptotal = parseFloat(0);
                var tempbal = parseFloat(0);
                var tempcubal = parseFloat(0);

                var tempallow = parseFloat(0);

                $.each(data, function (i, item) {
                    if (item.selectall == true) {
                        $('#maintablebillwise2 tbody').empty();
                        rows += "<tr class=maintable2>"
                                    + "<td>" + item.slno + "</td>"
                                     + "<td data-toggle='tooltip'title='" + item.labno + "'>" + item.labno + "</td>"
                                       + "<td data-toggle='tooltip'title='" + item.date + "'>" + item.date + "</td>"
                            + "<td >" + '<input type=checkbox id=chk checked> ' + "</td>"
                                      + "<td data-toggle='tooltip'title='" + item.pat + "'>" + item.pat + "</td>"
                                     + "<td data-toggle='tooltip'title='" + item.amount + "'>" + item.amount + "</td>"
                                      + "<td data-toggle='tooltip'title='" + item.balamount + "'>" + item.balamount + "</td>"
                                      + "<td contenteditable='true' id='allowamt' data-toggle='tooltip'title='" + item.AllowAmt + "'>" + item.AllowAmt + "</td>"
                                       + "<td id='balamt' data-toggle='tooltip'title='" + item.currentbal + "'>" + item.currentbal + "</td>"
                                    + "</tr>";
                        labno = item.labno;
                        temptotal += parseFloat(item.amount);
                        tempbal += parseFloat(item.balamount);
                        tempcubal += parseFloat(item.currentbal);
                        tempallow += parseFloat(item.AllowAmt);
                        $('#maintablebillwise2 tfoot tr td').eq(4).html('Total');
                        $('#maintablebillwise2 tfoot tr td').eq(5).html(temptotal);
                        $('#maintablebillwise2 tfoot tr td').eq(6).html(tempbal);
                        $('#maintablebillwise2 tfoot tr td').eq(7).html(tempallow);
                        $('#maintablebillwise2 tfoot tr td').eq(8).html(tempcubal);
                    }
                    else if (item.selectall == false) {
                        $('#maintablebillwise2 tbody').empty();
                        rows += "<tr class=maintable2>"
                                    + "<td>" + item.slno + "</td>"
                                     + "<td data-toggle='tooltip'title='" + item.labno + "'>" + item.labno + "</td>"
                                       + "<td data-toggle='tooltip'title='" + item.date + "'>" + item.date + "</td>"
                            + "<td >" + '<input type=checkbox id=chk > ' + "</td>"
                                      + "<td data-toggle='tooltip'title='" + item.pat + "'>" + item.pat + "</td>"
                                     + "<td data-toggle='tooltip'title='" + item.amount + "'>" + item.amount + "</td>"
                                      + "<td data-toggle='tooltip'title='" + item.balamount + "'>" + item.balamount + "</td>"
                                      + "<td contenteditable='true' id='allowamt' data-toggle='tooltip'title='" + item.AllowAmt + "' >" + item.AllowAmt + "</td>"
                                       + "<td id='balamt' data-toggle='tooltip'title='" + item.balamount + "'>" + item.currentbal + "</td>"
                                    + "</tr>";

                        labno = item.labno;
                        temptotal += parseFloat(item.amount);
                        tempbal += parseFloat(item.balamount);
                        tempcubal += parseFloat(item.currentbal);
                        tempallow += parseFloat(item.AllowAmt);
                        $('#maintablebillwise2 tfoot tr td').eq(4).html('Total');
                        $('#maintablebillwise2 tfoot tr td').eq(5).html(temptotal);
                        $('#maintablebillwise2 tfoot tr td').eq(6).html(tempbal);
                        $('#maintablebillwise2 tfoot tr td').eq(7).html(tempallow);
                        $('#maintablebillwise2 tfoot tr td').eq(8).html(tempcubal);

                    }
                });

                if (labno != null) {
                    $("#maintablebillwise2").append(rows);
                    $("#maintablebillwise2 tfoot").show();
                }
                $("#maintablebillwise2 tr").each(function () {


                    var colorstatusred = $(this).find("td:eq(7)").text();
                    if (colorstatusred == "0.00") {

                        $(this).css('background', '');
                    }
                    if (colorstatusred != "0.00") {

                        if (colorstatusred != "") {

                            $(this).css('background', '#DB7093');

                        }

                        else if (colorstatusred == "" || colorstatusred == "0.00") {

                            $(this).css('background', '');
                        }
                    }


                })

            }
        })
    })




//******************BILLWISECOLLECTION-SAVE***************************

    $(document).on('click', '#BillwiSave', function (e) {
        event.preventDefault();
        $('#BillwiSave').prop('disabled', true);

        var billwisearea = new Array();
        var billsave = {};
        var allowamt = $('#maintablebillwise2 tfoot tr td').eq(6).html();

        var currentbal = $('#maintablebillwise2 tfoot tr td').eq(8).html();


        if ($('#billwiseLab').is(':checked')) {
            var optCollection1 = 1;
        }
        else {
            optCollection1 = 0;
        }
        if ($('#billwisePurchase').is(':checked')) {
            var optCollectionpur = 1;
        }
        else {
            optCollectionpur = 0;
        }
        if ($('#billwisePharmacy').is(':checked')) {
            var optCollectionpha = 1;
        }
        else {
            optCollectionpha = 0;
        }
        var corpid = $("#Corpid").val();

        var corpname = $("#Corptxt").val();
        var corphone = $("#Corphone").val();
        var tdsid = $('#tdsid').val();
        var bankname = $("#txtbankname").val();
        var chqno = $("#txtchqno").val();
        var narration = $("#narrtxt").val();
        var chqDate = $("#chqDate1").val();
        var bankid = $("#bankid").val();
        var bankamount = $("#bankamount").val();
        var tdsamount = $("#tdsamount").val();
        var curdate = $("#datebillwise").val();
        if ($("#Cheqotp").prop('checked') == true) {
            var Chequeradio = 1;
        }
        if ($("#Cashotp").prop('checked') == true) {
            var Cashradio = 1;

        }

        $("#maintablebillwise2 tbody tr").each(function () {
            var bill = {};
            var row = $(this);

            if (row.find("td:eq(3) input[type='checkbox']").is(':checked')) {
                var ChkSelectS = true;
            }
            else {
                var ChkSelectS = false;
            }

            bill.selectall = ChkSelectS;
            bill.TempBalAmt = row.find("td").eq(6).html();
            bill.collallowAmt = row.find("td").eq(7).html();
            bill.Inv_Netamt = row.find("td").eq(5).html();
            bill.invno = row.find("td").eq(1).html();
            bill.currentbal = row.find("td").eq(8).html();

            bill.txtname = row.find("td").eq(4).html();
            billwisearea.push(bill);

        })
        if (confirm("Do you want to Save?")) {
            $.ajax({
                type: "POST",
                url: "/LISFY/BILLWISAVE",
                data: JSON.stringify({ corpid: corpid, corpname: corpname, billwisearea: billwisearea, allowamt: allowamt, optCollection1: optCollection1, optCollectionpur: optCollectionpur, optCollectionpha: optCollectionpha, bankname: bankname, chqno: chqno, narration: narration, chqDate: chqDate, Chequeradio: Chequeradio, Cashradio: Cashradio, bankid: bankid, currentbal: currentbal, bankamount: bankamount, tdsamount: tdsamount, curdate: curdate, corphone: corphone, tdsid: tdsid }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {

                    if (data.Result === "Invalid Bank") {
                        alert("Invalid Bank");
                        $("#txtbankname").focus();
                        $('#BillwiSave').prop('disabled', false);
                        return false;
                    }
                    if (data.Result === "Invalid Corporate") {
                        alert("Invalid Corporate");
                        $("#Corptxt").focus();
                        $('#BillwiSave').prop('disabled', false);
                        return false;
                    }

                    if (data.Result === "Invalid Cheque No") {
                        alert("Invalid Cheque No");
                        $("#txtchqno").focus();
                        $('#BillwiSave').prop('disabled', false);
                        return false;
                    }
                    if (data.Result === "InValid Bill Amount") {
                        alert("InValid Bill Amount");
                        $("#Amounttxt").focus();
                        $('#BillwiSave').prop('disabled', false);

                        return false;
                    }


                    alert("successfully");
                    $("#maintablebillwise2 tbody").empty();
                    $("#maintablebillwise2 tfoot tr td").empty();
                    $('#BillwiSave').prop('disabled', false);
                    $('#BillWiPrint').prop('disabled', false);
                    $('#txtbankname').val("");
                    $('#bankid').val("");
                    $('#txtchqno').val("");
                    $('#chqDate1').val("@ViewBag.cashcurdate");
                    $('#narrtxt').val("");
                    $('#tdsamount').val("");
                    $('#bankamount').val("");
                    $('#fromdate').val("@ViewBag.cashcurdate");
                    $("#otpUpto").prop('checked', false);
                    $('#uptobillwise1').val("@ViewBag.cashcurdate");
                    $('#Corptxt').val("");
                    $('#Corpid').val("");
                    $('#Corphone').val("");
                    $('#Amounttxt').val("");
                    $("#chkselectall").prop('checked', false);
                    $('#selectbillab').text("");
                    $('#billlabsum').text("");
                    $('#total').val("");
                    $('#baltotal').val("");
                    $('#allowtotal').val("");
                    $('#curnttotal').val("");
                    $('#chqdivv').hide();
                    $('#chqdivv1').hide();
                    $('#chqdivv2').hide();
                    $('#chqdivv3').hide();
                    $('#chqdivv4').hide();
                    $('#chqdivv5').hide();



                }
            })
        }
        else {
            return false;
        }

    })

//*******************END-BILLWISECOLLECTION*********************




    $(document).on('click', '#BillWiNew', function (e) {
        event.preventDefault();
        $("#maintablebillwise2 tbody").empty();
        $("#maintablebillwise2 tfoot").empty();
        $('#BillWiPrint').prop('disabled', false);
        $('#BillwiSave').prop('disabled', false);
        $('#txtbankname').val("");
        $('#bankid').val("");
        $('#txtchqno').val("");
        $('#chqDate1').val("@ViewBag.cashcurdate");
        $('#narrtxt').val("");
        $('#tdsamount').val("");
        $('#bankamount').val("");
        $('#fromdate').val("@ViewBag.cashcurdate");
        $("#otpUpto").prop('checked', false);
        $('#uptobillwise1').val("@ViewBag.cashcurdate");
        $('#Corptxt').val("");
        $('#Corpid').val("");
        $('#Corphone').val("");
        $('#Amounttxt').val("");
        $("#chkselectall").prop('checked', false);
        $('#selectbillab').text("");
        $('#billlabsum').text("");
        $('#total').val("");
        $('#baltotal').val("");
        $('#allowtotal').val("");
        $('#curnttotal').val("");

        $('#chqdivv').hide();
        $('#chqdivv1').hide();
        $('#chqdivv2').hide();
        $('#chqdivv3').hide();
        $('#chqdivv4').hide();
        $('#chqdivv5').hide();

    })


    $('#Cheqotp').change(function () {
        if ($("#Cheqotp").prop('checked') == true) {


            $('#chqdivv').show();
            $('#chqdivv1').show();
            $('#chqdivv2').show();
            $('#chqdivv3').show();
            $('#chqdivv4').show();
            $('#chqdivv5').show();

            $("#Cashotp").prop('checked', false);
        }
        if ($("#Cheqotp").prop('checked') == false) {
            $("#Cashotp").prop('checked', true);

            $('#chqdivv').hide();
            $('#chqdivv1').hide();
            $('#chqdivv2').hide();
            $('#chqdivv3').hide();
            $('#chqdivv4').hide();
            $('#chqdivv5').hide();

        }

    })
    $('#Cashotp').change(function () {
        if ($("#Cashotp").prop('checked') == true) {

            $("#txtbankname").val("");
            $("#bankid").val("");
            $("#txtchqno").val("");
            $("#chqDate1").val("@ViewBag.cashcurdate");
            $("#narrtxt").val("");

            $('#chqdivv').hide();
            $('#chqdivv1').hide();
            $('#chqdivv2').hide();
            $('#chqdivv3').hide();
            $('#chqdivv4').hide();
            $('#chqdivv5').hide();

            $("#Cheqotp").prop('checked', false);
        }
        if ($("#Cashotp").prop('checked') == false) {
            $("#Cheqotp").prop('checked', true);
            $('#chqdivv').show();
            $('#chqdivv1').show();
            $('#chqdivv2').show();
            $('#chqdivv3').show();
            $('#chqdivv4').show();
            $('#chqdivv5').show();


        }

    })

    $('#tdsamount').change(function () {
        var tdsamt = $('#tdsamount').val();
        var totalallowamt = $('#Amounttxt').val();
        $.ajax({
            type: "POST",
            url: "/LISFY/TDSAMOUNTGET",
            data: JSON.stringify({ tdsamt: tdsamt, totalallowamt: totalallowamt }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Result === "Tds Account Not Assigned!") {
                    alert("Tds Account Not Assigned!");
                    $('#tdsamount').val("");
                    $('#narrtxt').focus();
                    return false;


                }
                $.each(data, function (i, item) {
                    $('#bankamount').val(item.txtbankamt);
                    $('#tdsid').val(item.TdsId);


                })
            }
        })

    })
    $("#txtbankname").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#billwisesrchbank").click();

        }
    })
    $('body').on('dblclick', '.robillbank', function (evt) {
        event.preventDefault();

        var bankname = $(this).find("td:eq(0)").text();
        var banknameid = $(this).find("td:eq(1)").text();
        $("#txtbankname").val(bankname);
        $("#bankid").val(banknameid);
        $(".searchclose").trigger('click');
    })

    $(document).on('click', '#BillWifetch', function (e) {
        //event.preventDefault();
        $('#BillWiPrint').prop('disabled', false);
        if ($('#billwiseLab').is(':checked')) {
            var optCollection1 = 1;
        }
        else {
            optCollection1 = 0;
        }
        if ($('#otpUpto').is(':checked')) {
            var otpUpto = 1;
        }
        else {
            otpUpto = 0;
        }
        var uptodate = $('#uptobillwise1').val();
        var fromdate = $('#fromdate').val();
        var corpnameid = $("#Corpid").val();
        if (corpnameid == "") {
            alert("Invalid Corporate...");
            $("#Corptxt").focus();

            return false;
        }
        $('#maintablebillwise2 tfoot tr td').empty();

        $.ajax({
            type: 'GET',
            url: '/LISFY/BillwFetch',
            data: { optCollection1: optCollection1, corpnameid: corpnameid, otpUpto: otpUpto, uptodate: uptodate, fromdate: fromdate },
            dataType: 'json',
            success: function (data) {
                $('#maintablebillwise2 tbody').empty();
                $('#maintablebillwise tfoot tr td').empty();
                $('#total').val("");
                $('#baltotal').val("");
                $('#allowtotal').val("");
                $('#curnttotal').val("");


                var rows;
                var temptotal = parseFloat(0);
                var tempbal = parseFloat(0);
                var tempallow = parseFloat(0);
                var tempcubal = parseFloat(0);
                var invno = parseFloat(0);
                $.each(data, function (i, item) {
                    i = i + 1;
                    rows += "<tr class=maintable2>"
                    + "<td>" + i + "</td>"
                     + "<td data-toggle='tooltip'title='" + item.invno + "'>" + item.invno + "</td>"
                     + "<td data-toggle='tooltip'title='" + item.TempInvdate + "'>" + item.TempInvdate + "</td>"
                      + "<td>" + '<input type=checkbox id=chk> ' + "</td>"
                     + "<td data-toggle='tooltip'title='" + item.Inv_Name + "'>" + item.Inv_Name + "</td>"
                     + "<td data-toggle='tooltip'title='" + item.Inv_Netamt + "'>" + item.Inv_Netamt + "</td>"
                      + "<td data-toggle='tooltip'title='" + item.BalAmt + "'>" + item.BalAmt + "</td>"
                      + "<td contenteditable='true' id='allowamt' >" + '' + "</td>"
                       + "<td id='balamt'data-toggle='tooltip'title='" + item.BalAmt + "'>" + item.BalAmt + "</td>"
                    + "</tr>";



                    if (item.Inv_Netamt == "") {
                        item.Inv_Netamt = 0;
                    }
                    temptotal += parseFloat(item.Inv_Netamt);
                    tempbal += parseFloat(item.BalAmt);
                    tempcubal += parseFloat(item.BalAmt);

                    var invno = item.invno;
                    $('#maintablebillwise2 tfoot tr td').eq(4).html('Total');
                    $('#maintablebillwise2 tfoot tr td').eq(5).html(temptotal);
                    $('#maintablebillwise2 tfoot tr td').eq(6).html(tempbal);

                    $('#maintablebillwise2 tfoot tr td').eq(8).html(tempcubal);

                });
                if (invno != null) {
                    $("#maintablebillwise2").append(rows);
                    $("#maintablebillwise2 tfoot").show();
                }

                if (data.length < 1) {
                    $("#maintablebillwise2 tfoot").hide();
                }
                $.ajax({
                    type: "POST",
                    url: "/LISFY/GETBILLWISELABLSUMM",
                    data: JSON.stringify({ corpnameid: corpnameid }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        $.each(data, function (i, item) {
                            $("#billlabsum").text(item.LblSumm);

                        })
                    }
                })
            },




            error: function (emp) {
                alert('error');
            }

        })

    })
    $(document).on('click', '#BillWiPrint', function () {
        event.preventDefault();
        $('#BillWiPrint').prop('disabled', true);
        var currentdate = $("#datebillwise").val();
        var corpid = $("#Corpid").val();
        var txtName = $("#Corptxt").val();
        if (corpid == "") {
            alert("please select corporation name....");
            return false;
        }
        if (confirm("Do you want to see Print Preview?")) {
            $.ajax({
                type: 'POST',
                url: '/LISFY/BILLWISEPRINT',
                data: { currentdate: currentdate, corpid: corpid, txtName: txtName },
                dataType: 'json',
                success: function (data) {

                    if (data.Result === "OK") {
                        window.open("/LISFY/GetPDFbillwise", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=200,width=950,height=700");

                    }
                    $('#BillWiPrint').prop('disabled', false);



                }
            })
        }
        else {
            return false;
        }

    })
    $("#Amounttxt").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#tdsamount").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });



    $('#maintablebillwise2').on('focusout input', 'td[contenteditable]', function () {
        var manuvalamt = parseFloat(0);
        var manuvalbal = parseFloat(0);
        var manuvalcurbal = parseFloat(0);
        var tempcubal = parseFloat(0);
        var tempallow = parseFloat(0);

        $("#maintablebillwise2 tbody tr").each(function () {


            manuvalamt = $(this).find("td").eq(7).html();
            manuvalbal = $(this).find("td").eq(6).html();
            manuvalcurbal = manuvalbal - manuvalamt;
            $(this).find("td").eq(8).html(manuvalcurbal);



            if (manuvalamt != "") {
                tempallow += parseFloat(manuvalamt);
            }
            if (manuvalcurbal != "") {
                tempcubal += parseFloat(manuvalcurbal);
            }

        })



        $('#maintablebillwise2 tfoot tr td').eq(7).html(tempallow);
        $('#maintablebillwise2 tfoot tr td').eq(8).html(tempcubal);


    })
    $('body').on('click', '.maintable2', function (evt) {

        if ($(this).css("background-color") == "rgb(219, 112, 147)") {
            $(this).css("background-color", "");
            $(this).find("td:eq(7)").addClass('active_file');

        }


        $("#maintablebillwise2 tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');

        $("#maintablebillwise2 tr").focusout(function () {
            $(this).find("td:eq(7)").removeClass('active_file');

            var colorstatusred = $(this).find("td:eq(7)").text();
            if (colorstatusred == "0.00") {

                $(this).css('background', '');
            }
            if (colorstatusred != "0.00") {

                if (colorstatusred != "") {

                    $(this).css('background', '#DB7093');

                }

                else if (colorstatusred == "" || colorstatusred == "0.00") {

                    $(this).css('background', '');
                }
            }

        })
    })


    $("#Billwisearea").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#billwisesrcharea").click();

        }
    })
    $("#BillwiseCorp").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#srchBillwiseCorp").click();

        }
    })
    $("#Corptxt").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#srchCorp").click();

        }
    })
    $(document).ready(function () {
        $("#CashRecNew").click();
        $('#CashRecDate').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });


    })
    $(document).on('click', '#btnaccounts', function () {
        event.preventDefault();
        $('#lookuptb tbody').empty();
        $('#txt').val("");
        $("#spinner-div").show();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETCASHRECACCOUNTNAME',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=Cashrecaccount>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                    + "</tr>";
                });

                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");

                $('#featuredSelectField option[value="1"]').text('AccountName');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header").css("width", "400");
                $("#lookupLabel").html("Account,Code,Type");
                $("#header3").hide();
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $("#header").html("AccountName");
                $("#lookuptb").append(rows);


            },
            complete: function () {
                $('#spinner-div').hide();
            },
            error: function (emp) {
                alert('error');
            }

        })

    })
    $("#CashRecAccountTxt").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#btnaccounts").click();

        }
    })

    $('body').on('dblclick', '.Cashrecaccount', function (evt) {
        event.preventDefault();

        var accname = $(this).find("td:eq(0)").text();
        var accnameid = $(this).find("td:eq(1)").text();
        $("#CashRecAccountTxt").val(accname);
        $("#CashRecAccountTxtid").val(accnameid);
        $(".searchledgerclose").trigger('click');
    })
    $('body').on('click', '.Cashrecaccount', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $(document).on('click', '#btnTransNo', function () {
    //$('#CashRecTransNo').bind("Key", function (e) {

        var CashRecTransNo = $('#CashRecTransNo').val();
        $.ajax({
            type: "POST",
            url: "/LISFY/DISPLAYCASHRECEIPT",
            data: JSON.stringify({ CashRecTransNo: CashRecTransNo }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Result === "No Data Found") {
                    alert("No Data Found");

                    $('#CashRecDate').val("@ViewBag.cashcurdate");
                    $('#CashRecAccountTxtid').val("");
                    $('#CashRecamount').val("");
                    $('#CashRecNarr').val("");
                    $('#CashRecUsrInfo').val("");
                    $('#CashRecUsrInfoid').val("");
                    $('#CashRecAccountTxt').val("");
                    $("#CashRecTransNoid").val("");
                    return false;
                }

                $.each(data, function (i, item) {
                    $('#CashRecAccountTxt').val(item.CashRecAccountTxt);

                    const d = new Date(item.CashRecDate);
                    const formattedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();
                    $('#CashRecDate').val(formattedDate);
                    $('#CashRecamount').val(item.CashRecamount);
                    $('#CashRecNarr').val(item.CashRecNarr);
                    $('#CashRecUsrInfo').val(item.CashRecUsrInfo);
                    $('#CashRecUsrInfoid').val(item.CashRecUsrInfoid);
                    $('#CashRecTransNoid').val(item.CashRecTransNoid);
                    $('#CashRecAccountTxtid').val(item.CashRecAccountTxtid);





                })
            }
        })


    })
    $('#CashRecTransNo').keyup(function (e) {
        if (e.keyCode == 13) {
            $("#btnTransNo").click();
        }
    });



    //****************CASHCLOSING-SAVE*************************************
    $(document).on('click', '#CashRecSave', function () {
        //$("#CashRecNew").click();
        var CashRecTransNo=$('#CashRecTransNo').val();
        var CashReDate = $('#CashRecDate').val();
        var CashRecAccountTxtid = $('#CashRecAccountTxtid').val();
        var CashRecamount1 = $('#CashRecamount').val();

        var CashRecamount = parseFloat(CashRecamount1).toFixed(2);
        if (isNaN(CashRecamount)) {
            CashRecamount = "";
        }
        var CashRecNarr = $('#CashRecNarr').val();
        var CashRecUsrInfo = $('#CashRecUsrInfo').val();
        var CashRecUsrInfoid = $('#CashRecUsrInfoid').val();
        if (CashRecUsrInfoid == "") {
           CashRecUsrInfoid = 0;
        }
        if ($('#CashRecAccountTxt').val() == "") {
            alert("Can't allow Empty Account/Invalid Account");
            $('#CashRecAccountTxt').focus();
            return false;
        }
        if (CashRecamount == "") {
            alert("Can't allow Empty Account");
            $('#CashRecamount').focus();
            return false;
        }
        if (CashRecTransNo == "") {
            alert("Can't allow Empty Transation No");
            $('#CashRecTransNo').focus();
            return false;
        }


        $.ajax({
            type: "POST",
            url: "/LISFY/SAVECASHRECEIPT",
            data: JSON.stringify({ CashRecTransNo: CashRecTransNo, CashRecAccountTxtid: CashRecAccountTxtid, CashRecamount: CashRecamount, CashRecUsrInfo: CashRecUsrInfo, CashRecNarr: CashRecNarr, CashRecUsrInfoid: CashRecUsrInfoid, CashReDate: CashReDate }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                alert("save sucessfully");
                $("#CashRecNew").click();
                $('#CashRecDate').val("@ViewBag.cashcurdate");
                $('#CashRecAccountTxtid').val("");
                $('#CashRecamount').val("");
                $('#CashRecNarr').val("");
                $('#CashRecUsrInfo').val("");
                $('#CashRecUsrInfoid').val("");
                $('#CashRecAccountTxt').val("");
                $("#CashRecTransNoid").val("");
                $('#CashRecPrintprivew').click();

            }

        })

    })
    //**************END-CASHCLOSING-END*******************

    $(document).on('click', '#CashRecNew', function () {

        $.ajax({
            type: "POST",
            url: "/LISFY/NEWCASHRECEIPT",
            data:JSON.stringify({ }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $.each(data, function (i, item) {
                    $("#CashRecTransNo").val(item.CashRecTransNo);
                    $("#CashRecTransNoid").val(item.CashRecTransNoid);
                    $('#CashRecDate').val("@ViewBag.cashcurdate");
                    $('#CashRecAccountTxtid').val("");
                    $('#CashRecamount').val("");
                    $('#CashRecNarr').val("");
                    $('#CashRecUsrInfo').val("");
                    $('#CashRecUsrInfoid').val("");
                    $('#CashRecAccountTxt').val("");
                    $("#CashRecTransNoid").val("");

                })
                }

        })
    })


    $(document).on('click', '#CashRecDelete', function () {
        var userinfoid = $('#CashRecUsrInfoid').val();
        var transnoid = $("#CashRecTransNoid").val();
        var Accountid = $('#CashRecAccountTxtid').val();
        var accountname = $('#CashRecAccountTxt').val();
        var amount = $('#CashRecamount').val();
        if (userinfoid == "") {
            alert("No Data Found...");
            return false;
        }

        if (userinfoid != "") {
            if (confirm("Are you sure to delete this entry..?")) {


                $.ajax({
                    type: "POST",
                    url: "/LISFY/DELETECASHRECEIPT",
                    data: JSON.stringify({ userinfoid: userinfoid, transnoid: transnoid, Accountid: Accountid, accountname: accountname, amount: amount }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        alert("deleted successfully..");
                        $("#CashRecNew").click();
                        $('#CashRecDate').val("@ViewBag.cashcurdate");
                        $('#CashRecAccountTxtid').val("");
                        $('#CashRecamount').val("");
                        $('#CashRecNarr').val("");
                        $('#CashRecUsrInfo').val("");
                        $('#CashRecUsrInfoid').val("");
                        $('#CashRecAccountTxt').val("");
                        $("#CashRecTransNoid").val("");

                    }
                })
            }
            else {
                alert("No Data found");
                return false;
            }
        }

    })

    $(document).on('click', '#CashRecPrintprivew', function () {
        var transnoid = $("#CashRecTransNo").val();
        if (confirm("Do you Want to print")) {
            $.ajax({
                type: 'POST',
                url: '/LISFY/CASHRECEIPTPRINTPRIVEW',
                data: { transnoid: transnoid },
                dataType: 'json',
                success: function (data) {
                    if (data.Result === "No Data Found") {
                        alert("No Data Found");
                        return false;
                    }
                    if (data.Result === "OK") {
                        window.open("/LISFY/GetPDFCashRecprivew", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=200,width=950,height=700");

                    }
                }
            })
        }
        else {
            return false;
        }
    })



    $(document).on('click', '#CashRecPrint', function () {
        var transnoid = $("#CashRecTransNoid").val();

        $.ajax({
            type: 'POST',
            url: '/LISFY/CASHRECEIPTPRINT',
            data: { transnoid: transnoid },
            dataType: 'json',
            success: function (data) {

                if (data.Result === "OK") {
                    window.open("/LISFY/GetPDFCashRecprint", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=200,width=950,height=700");

                }
            }
        })
    })

    $(document).ready(function () {
        $("#CashPaymentNew").click();
        $('#CashPaymentDate').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });

    })


    $(document).on('click', '#CashPaymentNew', function () {

        $.ajax({
            type: "POST",
            url: "/LISFY/NEWCASHPAYMENT",
            data: JSON.stringify({}),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $.each(data, function (i, item) {
                    $("#CashPaymentTransNo").val(item.CashPaymentTransNo);
                    $("#CashPaymentTransNoid").val(item.CashPaymentTransNoid);
                    $('#CashPaymentDate').val("@ViewBag.cashcurdate");
                    $('#CashpaymentAct').val("");
                    $('#CashpaymentActid').val("");
                    $('#CashPaymentNarr').val("");
                    $('#CashPaymentUserinfo').val("");
                    $('#CashPaymentUserinfoid').val("");
                    $('#CashPaymentAmt').val("");
                    $('#displayfile').attr('src', '');
                    $("input[type=file]").val("");

                })
            }

        })
    })


    $(document).on('click', '#btnCashPaymentact', function () {
        event.preventDefault();
        $('#txt').val("");
        $('#spinner-div').show();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETCASHRECACCOUNTNAME',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=Cashpayaccount>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                    + "</tr>";
                });
                $("#modelsize").css("width", "400");
                $("#header").html("AccountName");
                $("#txt").css("width", "200");
                $("#header").css("width", "400");
                $('#featuredSelectField option[value="1"]').text('AccountName');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header3").hide();
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();


                $("#lookupLabel").html("Account,Code,Type");

                $("#lookuptb").append(rows);


            },
            complete: function () {
                $('#spinner-div').hide();
            },

            error: function (emp) {
                alert('error');
            }

        })

    })
    $("#CashpaymentAct").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#btnCashPaymentact").click();

        }
    })
    $('body').on('click', '.Cashpayaccount', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })

    $('body').on('dblclick', '.Cashpayaccount', function (evt) {
        event.preventDefault();

        var accname = $(this).find("td:eq(0)").text();
        var accnameid = $(this).find("td:eq(1)").text();
        $("#CashpaymentAct").val(accname);
        $("#CashpaymentActid").val(accnameid);
        $(".searchledgerclose").trigger('click');
    })
    $('body').on('click', '.Cashrecaccount', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $(document).on('click', '#CashPaymentRemove', function () {
        var userinfoid = $('#CashPaymentUserinfoid').val();
        var transnoid = $("#CashPaymentTransNoid").val();
        var Accountid = $('#CashpaymentActid').val();
        var accountname = $('#CashpaymentAct').val();
        var amount = $('#CashPaymentAmt').val();
        if (userinfoid == "") {
            alert("No Data Found");
            return false;

        }

        if (userinfoid != "") {
            if (confirm("Are you sure to delete this entry..?")) {


                $.ajax({
                    type: "POST",
                    url: "/LISFY/DELETECASHPAYMENT",
                    data: JSON.stringify({ userinfoid: userinfoid, transnoid: transnoid, Accountid: Accountid, accountname: accountname, amount: amount }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        if (data.Result === "You Can't Permission for Delete this Transaction,Refund Found...........") {
                            alert("You Can't Permission for Delete this Transaction,Refund Found...........");
                            return false;
                        }

                        alert("deleted successfully..");
                        $("#CashPaymentNew").click();
                    $('#CashPaymentDate').val("@ViewBag.cashcurdate");
                    $('#CashpaymentAct').val("");
                    $('#CashpaymentActid').val("");
                    $('#CashPaymentNarr').val("");
                    $('#CashPaymentUserinfo').val("");
                    $('#CashPaymentUserinfoid').val("");
                    $('#CashPaymentAmt').val("");
                    $('#displayfile').attr('src', '');
                    $("input[type=file]").val("");
                    $('#CashPaymentTransNoid').val("");


                    }
                })
            }
            else {
                return false;
            }
        }

    })

    //******CASH-PAYMENT-SAVE**************************************

    $(document).on('click', '#CashPaymentSave', function () {
        event.preventDefault();
        var CashpayTransNo = $('#CashPaymentTransNo').val();
        var CashpayDate = $('#CashPaymentDate').val();
        var CashpayAccountTxtid = $('#CashpaymentActid').val();
        var CashpayAccountTxt = $('#CashpaymentAct').val();
        var Cashpayamount1 = $('#CashPaymentAmt').val();
        var Cashpayamount = parseFloat(Cashpayamount1).toFixed(2);
        if (isNaN(Cashpayamount)) {
            Cashpayamount = "";
        }
        var CashpayNarr = $('#CashPaymentNarr').val();
        var CashpayUsrInfo = $('#CashPaymentUserinfo').val();
        var CashpayUsrInfoid = $('#CashPaymentUserinfoid').val();
        //var cashpaymentamt = $('#CashPaymentAmt').val();
        if (CashpayUsrInfoid == "") {
            CashpayUsrInfoid = 0;
        }
        //var file = $("#cashpaymentfile").get(0).files;
        var img = ("image", $('#displayfile').attr('src'));

        var file = img;
        if (file == "")
        {
            file = null;
        }
        if (CashpayAccountTxt == "") {
            alert("Can't Allow Empty Account/Invalid Account");
            $('#CashpaymentAct').focus();
            return false;
        }
        if (Cashpayamount == "") {
            alert("Can't allow Empty Account");
            $('#CashPaymentAmt').focus();
            return false;
        }
        if (CashpayTransNo == "") {
            alert("Can't allow Empty Transation No");
            $('#CashPaymentTransNo').focus();
            return false;
        }

        //var img = ("image", $('#img').attr('src'));

        $.ajax({
            type: "POST",
            url: "/LISFY/SAVECASHPAYMENT",
            data: JSON.stringify({ file: file, CashpayAccountTxt: CashpayAccountTxt, CashpayTransNo: CashpayTransNo, CashpayDate: CashpayDate, CashpayAccountTxtid: CashpayAccountTxtid, CashpayNarr: CashpayNarr, CashpayUsrInfo: CashpayUsrInfo, CashpayUsrInfoid: CashpayUsrInfoid, Cashpayamount: Cashpayamount }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                alert("save sucessfully");
                $('#displayfile').attr('src', '');
                $('#CashPaymentNew').click();
                $('#CashPaymentDate').val("@ViewBag.cashcurdate");
                    $('#CashpaymentAct').val("");
                    $('#CashpaymentActid').val("");
                    $('#CashPaymentNarr').val("");
                    $('#CashPaymentUserinfo').val("");
                    $('#CashPaymentUserinfoid').val("");
                    $('#CashPaymentAmt').val("");
                    $("input[type=file]").val("");
                    $('#CashPaymentTransNoid').val("");

                    $('#displayfile').attr('src', '');

                    $('#cashpayprivew').click();

            }
        })
    })
//***************END-CASH-PAYMENT-SAVE**********************************




    $(document).on('click', '#btncashpaymentno', function () {

        var CashpayTransNo = $('#CashPaymentTransNo').val();
        $.ajax({
            type: "POST",
            url: "/LISFY/DISCASHPAYMENT",
            data: JSON.stringify({ CashpayTransNo: CashpayTransNo }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {


                $.each(data, function (i, item) {
                    $('#CashRecAccountTxt').val(item.CashRecAccountTxt);

                    const d = new Date(item.CashPaymentDate);
                    const formattedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();
                    $('#CashPaymentDate').val(formattedDate);
                    $('#CashPaymentTransNoid').val(item.CashPaymentTransNoid);
                    $('#CashpaymentAct').val(item.CashpaymentAct);
                    $('#CashpaymentActid').val(item.CashpaymentActid);
                    $('#CashPaymentAmt').val(item.CashPaymentAmt);
                    $('#CashPaymentNarr').val(item.CashPaymentNarr);
                    $('#CashPaymentUserinfo').val(item.CashPaymentUserinfo);
                    $('#CashPaymentUserinfoid').val(item.CashPaymentUserinfoid);
                    $('#displayfile').attr('src', item.file);
                    //$('#displayfile').val(" ViewBag.imgSrc");






                })
                if (data.Result === "Not Data Found") {
                    alert("Not Data Found");
                    $('#CashPaymentDate').val("@ViewBag.cashcurdate");
                    $('#displayfile').attr('src', '');
                    $('#CashpaymentAct').val("");
                    $('#CashpaymentActid').val("");
                    $('#CashPaymentNarr').val("");
                    $('#CashPaymentUserinfo').val("");
                    $('#CashPaymentUserinfoid').val("");
                    $('#CashPaymentAmt').val("");
                    $("input[type=file]").val("");
                    $('#CashPaymentTransNoid').val("");
                    return false;


                }
            }
        })


    })
    $('#CashPaymentTransNo').keyup(function (e) {
        if (e.keyCode == 13) {
            $("#btncashpaymentno").click();
        }
    });



    $(document).on('change', '#cashpaymentfile', function () {
        var property = document.getElementById('cashpaymentfile').files[0];
        var image_name = property.name;
        var image_extension = image_name.split('.').pop().toLowerCase();

        if (jQuery.inArray(image_extension, ['png', 'jpg', 'jpeg', 'svg', '']) == -1) {
            alert("Invalid image file");
        }
    })

    function ShowPreview(input) {
        if (input.files && input.files[0]) {
            var ImageDir = new FileReader();
            ImageDir.onload = function (e) {
                $('#displayfile').attr('src', e.target.result);
            }
            ImageDir.readAsDataURL(input.files[0]);
        }
    }
    $("#cashpaymentfile").change(function () {
        ShowPreview(this);
    })

    $('#removefile').click(function () {
        $('#displayfile').attr('src',"");

        $('#cashpaymentfile').val("");
    })


    $("#CashRecamount").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#CashRecTransNo").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });




    $(document).on('click', '#CashRecExit', function () {

        $("#cashrecclose").click();
    })
    $(document).on('click', '#cashrecclose', function () {
        $('#CashRecNew').click();

    })
    $(document).on('click', '#cashpaymentclose', function () {
        $('#CashPaymentNew').click();


    })
    $(document).on('click', '#cashpaymentexit', function () {
        $('#cashpaymentclose').click();

    })



    $(document).on('click', '#cashpayprivew', function () {
        var transnoid = $("#CashPaymentTransNo").val();
        if (confirm("Do you Want to print")) {
            $.ajax({
                type: 'POST',
                url: '/LISFY/CASHPAYPRINTPRIVEW',
                data: { transnoid: transnoid },
                dataType: 'json',
                success: function (data) {
                    if (data.Result === "No Data Found") {
                        alert("No Data Found");
                        return false;
                    }

                    if (data.Result === "OK") {
                        window.open("/LISFY/GetPDFCashpayprint", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=200,width=950,height=700");

                    }
                }
            })
        }
        else {
            return false;
        }
    })
    $("#CashPaymentAmt").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
    $("#CashPaymentTransNo").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });






    $(document).ready(function () {
        $('#OptSplAct').prop("checked", true);
        $('#Spltxtbtn').prop('disabled', true);
        $('#SplImportbtn').prop('disabled', true);
        $('#SpltxtAct').focus();

    })
    $('#OptSplAct').change(function () {
        if ($("#OptSplAct").prop('checked') == true) {
            $('#SplImport').val("");
            $('#Spltxt').val("");
            $('#Spltxt').prop('disabled', true);
            $('#Spltxtbtn').prop('disabled', true);
            $('#OptSplAct').prop("checked", true);
            $('#OptSplSchm').prop("checked", false);
            $('#SplImport').prop('disabled', true);
            $('#SplImportbtn').prop('disabled', true);
            $('#SpltxtAct').prop('disabled', false);
            $('#SplActbtn').prop('disabled', false);
            $('#tbsplrate tbody').empty();
            $('#SpltxtAct').focus();
        }
        if ($("#OptSplAct").prop('checked') == false) {
            $('#OptSplAct').prop("checked", false);
            $('#OptSplSchm').prop("checked", true);
            $('#Spltxt').prop('disabled',false);
            $('#Spltxtbtn').prop('disabled', false);
            $('#SplImport').prop('disabled', false);
            $('#SplImportbtn').prop('disabled', false);
            $('#SpltxtAct').prop('disabled', true);
            $('#SplActbtn').prop('disabled', true);

        }


    })
    $('#OptSplSchm').change(function () {
        if ($("#OptSplSchm").prop('checked') == true) {
            $('#SpltxtAct').val("");
            $('#SplDPercent').val("");
            $('#tbsplrate tbody').empty();
            $('#SpltxtAct').prop('disabled', true);
            $('#SplActbtn').prop('disabled', true);
            $('#OptSplSchm').prop("checked", true);
            $('#OptSplAct').prop("checked", false);
            $('#Spltxt').prop('disabled', false);
            $('#Spltxt').focus();
            $('#Spltxtbtn').prop('disabled', false);
            $('#SplImportbtn').prop('disabled', false);
            $('#SplImport').prop('disabled', false);

        }
        if ($("#OptSplSchm").prop('checked') == false) {
            $('#OptSplSchm').prop("checked", false);
            $('#OptSplAct').prop("checked", true);
            $('#SpltxtAct').prop('disabled', false);
            $('#SplActbtn').prop('disabled', false);
            $('#Spltxt').prop('disabled', true);
            $('#Spltxtbtn').prop('disabled', true);
            $('#SplImportbtn').prop('disabled', true);
            $('#SplImport').prop('disabled', true);
        }

    })
    $(document).on('click', '#SplActbtn', function () {
        event.preventDefault();
        //$('#SplActbtn').prop('disabled',true);
        $('#txt').val("");
        $('#lookuptb tbody').empty();
        $('#spinner-div').show();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETSETACCOUNTNAME',
            data: {},
            dataType: 'json',
            success: function (data) {
                //$('#SplActbtn').prop('disabled',false);
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=setsplrateaccount>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                     + "<td style=display:none>" + item.AhMst_DiscPer + "</td>"
                    + "</tr>";
                });

                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");

                $('#featuredSelectField option[value="1"]').text('AccountName');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header").css("width", "400");
                $("#lookupLabel").html("Account,Code,Type");
                $("#header3").hide();
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#header").text('AccountName');
                $("#lookuptb").append(rows);


            },
            complete: function () {
                $('#spinner-div').hide();
            },
            error: function (emp) {
                alert('error');
            }

        })

    })
    $('body').on('click', '.setsplrateaccount', function (evt) {
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $('body').on('dblclick', '.setsplrateaccount', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
        $('#SplActbtn').prop('disabled',true);
        var accname = $(this).find("td:eq(0)").text();
        var accnameid = $(this).find("td:eq(1)").text();
        $("#SpltxtAct").val(accname);
        $("#SpltxtActid").val(accnameid);
        var accountid = $("#SpltxtActid").val();
        var txtdiscper = $("#SplDPercent").val();
        $('.pt-5').show();
        $.ajax({
            type: "POST",
            url: "/LISFY/GETMAINTABLESPLRATE",
            data: JSON.stringify({ accountid: accountid, txtdiscper: txtdiscper }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $('#SplActbtn').prop('disabled', false);
                $('#tbsplrate tbody').empty();
                var rows;

                $.each(data, function (i, item) {
                    i = i + 1;
                    rows += "<tr class=mainsprate>"
                         + "<td>" + i + "</td>"
                         + "<td style=display:none>" + item.TstMst_Key + "</td>"
                   + "<td data-toggle='tooltip'title='" + item.TstName + "'>" + item.TstName + "</td>"
                    + "<td>" + item.Rate + "</td>"
                     + "<td contenteditable='true'  >" + item.Disc + "</td>"
                     + "<td>" + item.SpRate + "</td>"

                     + "</tr>";
                });

                $("#tbsplrate").append(rows);


            },
            complete: function () {
                $('.pt-5').hide();
            }
            })

        $(".searchledgerclose").trigger('click');
    })

    $(document).on('click ', '#SplTestsrch', function () {
        event.preventDefault();
        $('#txt').val("");
        $('#lookuptb tbody').empty();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETTESTNAME',
            data: {},
            dataType: 'json',
            success: function (data) {
                //$('#SplActbtn').prop('disabled',false);
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=rosptst>"
                    + "<td style=display:none>" + item.TstMst_Key + "</td>"
                     + "<td style=width:400px;text-align:left>" + item.TstMst_name + "</td>"
                    + "</tr>";
                });

                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");

                $('#featuredSelectField option[value="1"]').text('TestName');
                $('#featuredSelectField option[value="2"]').hide();
                $('#featuredSelectField option[value="3"]').hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $("#lookupLabel").html("Test");
                $("#header3").hide();
                $("#header2").hide();
                $("#header").text('TestName');
                $("#lookuptb").append(rows);


            },
            error: function (emp) {
                alert('error');
            }

        })

    })

    $('#table-scroll1').on('keydown', function (e) {
        if (event.keyCode == 120) {

            $("#SplTestsrch").click();

        }
    })
    $('body').on('click', '.rosptst', function (evt) {
        $("#lookuptb tr").removeClass('highlight_file');
            $(this).addClass('highlight_file');
    })

    $('body').on('dblclick', '.rosptst', function (evt) {
        //event.preventDefault();
        var testname = $(this).find("td:eq(1)").text();
        tableContainer = $('#table-scroll1');
        $("#tbsplrate tbody tr").each(function () {
            if (testname == $(this).find("td:eq(2)").text()) {
                $("#tbsplrate tr").removeClass('orange_file');
                $(this).addClass('orange_file');
                var w = $("#table-scroll1");

                var row = $(this).find("td:eq(0)");

                if (row.length) {
                    w.scrollTop(row.offset().top - (w.height() / 2));
                }

            }
        })

        $(".searchledgerclose").trigger('click');
    })




    $(document).on('click', '#Splgetdefault', function () {
        event.preventDefault();
        var spl= $('#SplDPercent').val();
        if (spl == "") {
            alert("Default Percentage empty...");
            $('#SplDPercent').focus();
            return false;
        }
        if (spl == 0) {
            $("#tbsplrate tbody tr").each(function () {
                $(this).find("td:eq(4)").text("");
                $(this).find("td:eq(5)").text("");

            })
            return false;
        }


        var SpRate = parseFloat(0);
        var Rate = parseFloat(0);
        var SplDPercent =parseFloat($("#SplDPercent").val());
        var Disper = parseFloat(0);

        $("#tbsplrate tbody tr").each(function () {

            $(this).find("td:eq(4)").html(SplDPercent);
            Rate= parseFloat( $(this).find("td:eq(3)").html());

            Disper = parseFloat($(this).find("td:eq(4)").html());

            SpRate = parseFloat(Rate - (Rate * Disper / 100)).toFixed(2);
            $(this).find("td:eq(5)").text(SpRate);
        })





    })
    $('body').on('click', '.mainsprate', function (evt) {
        event.preventDefault();

        var SpRate = parseFloat(0);
        var Rate = parseFloat(0);

        var Disper = parseFloat(0);

        $("#tbsplrate tr").focusout(function () {

            Rate= parseFloat( $(this).find("td:eq(3)").html());

            Disper = parseFloat($(this).find("td:eq(4)").html());
            if (Disper == 0) {
                $(this).find("td:eq(5)").text("");
                return false;
            }
            if (isNaN(Disper)) {
                Disper = "";
                $(this).find("td:eq(5)").text("");
            }
            else {
                SpRate = parseFloat(Rate - (Rate * Disper / 100)).toFixed(2);
                $(this).find("td:eq(5)").text(SpRate);
            }
        })
        $("#tbsplrate tr").removeClass('orange_file');
        $(this).addClass('orange_file');
    })
    $('#SplDPercent').keyup(function (e) {
        if (e.keyCode == 13) {
            $("#Splgetdefault").click();
        }
    });


    $(document).on('click', '#Spltxtbtn', function () {
        event.preventDefault();

        $('#lookuptb tbody').empty();
        $("#txt").val("");

        $("#spinner - div").show();
            event.preventDefault();
            $.ajax({
                type: 'GET',
                url: '/LISFY/GETSCHEME',
                data: {},
                dataType: 'json',
                success: function (data) {
                    $('#lookuptb tbody').empty();
                    var rows;
                    $.each(data, function (i, item) {
                        rows += "<tr class=splrateschm>"
                        + "<td style=width:400px;text-align:left>" + item.Mstr_Desc + "</td>"
                        + "<td style=display:none>" + item.Mstr_Key + "</td>"
                        + "</tr>";

                    });
                    $("#modelsize").css("width", "400");

                    $("#txt").css("width", "200");
                    $("#header4").hide();
                    $("#header5").hide();
                    $("#header6").hide();
                    $("#header7").hide();
                    $("#header8").hide();
                    $("#header9").hide();
                    $("#header").css("width", "400");

                    $('#featuredSelectField option[value="1"]').text('Schme');
                    $('#featuredSelectField option[value="2"]').text('Id');
                    $('#featuredSelectField option[value="3"]').hide();
                    $("#header3").hide();
                    $("#header2").hide();
                    $("#header").css("width", "400");
                    $("#header").text('SchmeName');
                    $("#searchlookup").css("left", "8%");
                    $("#searchlookup").css("left", "8%");
                    $("#lookupLabel").html("Schme");
                    $("#featuredSelectField option[value=1]").attr('selected', 'selected');
                    $('#lookuptb').append(rows);
                },
                error: function (emp) {
                    alert('error');
                },
                complete: function () {
                    $('#spinner-div').hide();
                }
            });
        })

    $('body').on('click', '.splrateschm', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $('body').on('dblclick', '.splrateschm', function (evt) {
        event.preventDefault();
        $('#Spltxtbtn').prop('disabled', true);
        var schmname = $(this).find("td:eq(0)").text();
        var schmnameid = $(this).find("td:eq(1)").text();

        $("#Spltxt").val(schmname);
        $("#Spltxtid").val(schmnameid);

        var Spltxtid = $("#Spltxtid").val();

        var txtdiscper = $("#SplDPercent").val();
        $("#spinner-div3").show();
        $.ajax({
            type: "POST",
            url: "/LISFY/GETMAINTABLESPLRATESCHME",
            data: JSON.stringify({ Spltxtid: Spltxtid, txtdiscper: txtdiscper }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $('#Spltxtbtn').prop('disabled', false);
                $('#tbsplrate tbody').empty();
                var rows;

                $.each(data, function (i, item) {
                    i = i + 1;
                    rows += "<tr class=mainsprate>"
                         + "<td>" + i + "</td>"
                         + "<td style=display:none>" + item.TstMst_Key + "</td>"
                   + "<td data-toggle='tooltip'title='" + item.TstName + "'>" + item.TstName + "</td>"
                    + "<td>" + item.Rate + "</td>"
                     + "<td contenteditable='true' >" + item.Disc + "</td>"
                     + "<td>" + item.SpRate + "</td>"

                     + "</tr>";
                });

                $("#tbsplrate").append(rows);


            },
            complete: function () {
                $("#spinner-div3").hide();
            }

        })

        $(".searchledgerclose").trigger('click');
    })
    $(document).on('click', '#SplImportbtn', function () {
        event.preventDefault();

        $('#lookuptb tbody').empty();
        $("#txt").val("");
        $('#spinner-div').show();
        $(document).ready(function () {
            event.preventDefault();
            $.ajax({
                type: 'GET',
                url: '/LISFY/GETSCHEME',
                data: {},
                dataType: 'json',
                success: function (data) {

                    $('#lookuptb tbody').empty();
                    var rows;
                    $.each(data, function (i, item) {
                        rows += "<tr class=splrateimport>"
                        + "<td style=width:400px;text-align:left>" + item.Mstr_Desc + "</td>"
                        + "<td style=display:none>" + item.Mstr_Key + "</td>"
                        + "</tr>";

                    });

                    $("#header").css("width", "400");
                    $("#modelsize").css("width", "400");
                    $("#header4").hide();
                    $("#header5").hide();
                    $("#header6").hide();
                    $("#header7").hide();
                    $("#header8").hide();
                    $("#header9").hide();
                    $("#txt").css("width", "200");
                    $("#searchlookup").css("left", "8%");
                    $('#featuredSelectField option[value="1"]').text('Schme');
                    $('#featuredSelectField option[value="2"]').text('Id');
                    $('#featuredSelectField option[value="3"]').hide();
                    $("#header3").hide();
                    $("#header2").hide();
                    $("#header").text('Schme');
                    $("#lookupLabel").html("Schme");
                    $("#schemeSelectField option[value=1]").attr('selected', 'selected');
                    $("#lookuptb").append(rows);
                },
                error: function (emp) {
                    alert('error');
                },
                complete: function () {
                    $('#spinner-div').hide();
                }
            });
        })

    })
    $('body').on('click', '.splrateimport', function (evt) {
        event.preventDefault();
        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $('body').on('dblclick', '.splrateimport', function (evt) {
        event.preventDefault();
        $('#SplImportbtn').prop('disabled', true);
        var importname = $(this).find("td:eq(0)").text();
        var importnameid = $(this).find("td:eq(1)").text();
        $("#SplImport").val(importname);
        $("#SplImportid").val(importnameid);


        var SplImport = $("#SplImportid").val();
        var txtdiscper = $("#SplDPercent").val();
        $('#spinner-div3').show();
        $.ajax({
            type: "POST",
            url: "/LISFY/GETMAINTABLESPLIMPORT",
            data: JSON.stringify({ SplImport: SplImport, txtdiscper: txtdiscper }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $('#SplImportbtn').prop('disabled', true);
                $('#tbsplrate tbody').empty();
                var rows;

                $.each(data, function (i, item) {
                    i = i + 1;
                    rows += "<tr class=mainsprate>"
                         + "<td>" + i + "</td>"
                         + "<td style=display:none>" + item.TstMst_Key + "</td>"
                   + "<td data-toggle='tooltip'title='" + item.TstName + "'>" + item.TstName + "</td>"
                    + "<td >" + item.Rate + "</td>"
                     + "<td contenteditable='true'  >" + item.Disc + "</td>"
                     + "<td>" + item.SpRate + "</td>"

                     + "</tr>";
                });

                $("#tbsplrate").append(rows);


            },
            complete: function () {
                $('#spinner-div3').hide();
            }
        })

        $(".searchledgerclose").trigger('click');
    })
    $(document).on('click', '#SplSave', function () {
        event.preventDefault();
        if ($("#OptSplAct").prop('checked') == true) {
            if ($("#SpltxtAct").val() == "") {
                alert("Empty/Invalid Entry Of AccountName");
                $("#SpltxtAct").focus();
                return false;
            }
        }
        if ($("#OptSplSchm").prop('checked') == true) {
            if ($("#Spltxt").val() == "") {
                alert("Empty/Invalid Entry Of Scheme");
                $("#Spltxt").focus();
                return false;
            }
        }

        $('#SplSave').prop('disabled', true);
        var splarray = new Array();
        if ($("#OptSplSchm").prop('checked') == true) {
            var OptSplSchm = 1;
        }

        if ($("#OptSplAct").prop('checked') == true) {
            var OptSplAct = 1;
        }

        $("#tbsplrate tbody tr").each(function () {
            var spl = {};
            var row = $(this);
            spl.splrate = row.find("td").eq(5).html();
            spl.spldisc = row.find("td").eq(4).html();
            spl.spltestid = row.find("td").eq(1).html();
            spl.splrats = row.find("td").eq(3).html();
            spl.spltestname = row.find("td").eq(2).html();
            splarray.push(spl);
        })
        var schmeid = $("#Spltxtid").val();
        var SplImportid=$("#SplImportid").val();
        var accountid = $("#SpltxtActid").val();

        if (confirm("Do you Want to Save")) {

            $.ajax({
                type: "POST",
                url: "/LISFY/SAVESPLRATE",
                data: JSON.stringify({ splarray: splarray, accountid: accountid, schmeid: schmeid, SplImportid: SplImportid, OptSplAct: OptSplAct, OptSplSchm: OptSplSchm }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $('#SplSave').prop('disabled', false);
                    if (data.Result === "OK") {
                        alert("save successfully");
                        $("#SplDPercent").val("");
                        return false;
                    }
                    if (data.Result === "This Account is Already Set Scheme Rates,Are You Sure to Delete Scheme Rates & Continue With This SpecialRate?") {
                        if (confirm("This Account is Already Set Scheme Rates,Are You Sure to Delete Scheme Rates & Continue With This SpecialRate?")) {

                            $.ajax({
                                type: "POST",
                                url: "/LISFY/CHECKSPLRATE",
                                data: JSON.stringify({ accountid: accountid }),
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (data) {
                                    $("#SplSave").click();

                                }
                            })
                        }
                        else {
                            return false;
                        }

                    }
                    else {
                        return false;
                    }

                }
            })
        }
        else {
            $('#SplSave').prop('disabled',false);
            return false;
        }

    })
    $(document).on('click', '#SplNew', function () {
        event.preventDefault();

        $('#tbsplrate tbody').empty();
        $("#SpltxtAct").val("");

        $("#Spltxt").val("");

        $("#SplImport").val("");
        $("#SplImportid").val("");
        $("#Spltxtid").val("");

        $("#SpltxtActid").val("");
        $("#SplDPercent").val("");
        $('#OptSplAct').prop("checked", true);
        $('#SplActbtn').prop("disabled", false);

        $('#OptSplSchm').prop("checked", false);


    })









    $(document).on('click', '#splrateclose', function () {
        event.preventDefault();
        $("#SplNew").click();

    })
    $(document).on('click', '#SplExit', function () {
        event.preventDefault();
        $('#splrateclose').click();

    })
    $("#SplDPercent").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });


    $(document).on('click', '#SplPrint', function () {
        event.preventDefault();
        var schmeid="";
        var accid = "";

        if ($("#OptSplSchm").prop('checked') == true) {
            var OptSplSchm = 1;
            schmeid = $("#Spltxtid").val();
            if ($("#Spltxtid").val() == "") {
                alert("No Data Found");
                return false;
            }
        }

        if ($("#OptSplAct").prop('checked') == true) {
            var OptSplAct = 1;
            accid = $("#SpltxtActid").val();
            if ($("#SpltxtActid").val() == "") {
                alert("No Data Found");
                return false;
            }
        }
        $('#SplPrint').prop('disabled', true);

        if (confirm("Do you Want to print")) {
            $.ajax({
                type: 'POST',
                url: '/LISFY/SPLRATEPRINTPRIVEW',
                data: ({ OptSplSchm: OptSplSchm, OptSplAct: OptSplAct, accid: accid, schmeid: schmeid }),
                dataType: 'json',
                success: function (data) {
                    if (data.Result === "No Data Found") {
                        alert("No Data Found");
                        return false;
                    }
                    if (data.Result === "OK") {
                        window.open("/LISFY/GetPDFsplrate", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=200,width=950,height=700");

                    }
                    $('#SplPrint').prop('disabled', false);
                }
            })
        }
        else {
            $('#SplPrint').prop('disabled', false);
            return false;
        }
    })
    $("#SpltxtAct").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#SplActbtn").click();

        }
    })
    $("#Spltxt").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#Spltxtbtn").click();

        }
    })
    $("#SplImport").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#SplImportbtn").click();

        }
    })




    $(document).ready(function () {
        $('#optSetOrder').prop("checked", true);
    })

    $('#optSetOrder').change(function(){
        if ($("#optSetOrder").prop('checked') == true) {
            $("#optTestName").prop('checked', false);
            var deptname= $("#txtdepartment").val();
            var deptnameid=$("#txtdepartmentid").val();
            if (deptname != "") {
                if ($("#optSetOrder").prop('checked') == true) {
                    var optSetOrders = 1;
                }
                if ($("#optTestName").prop('checked') == true) {
                    var optTestName = 1;
                }
                var selectboxdept = $('#selectTestOption').find('option:selected').text();



                $.ajax({
                    type: "POST",
                    url: "/LISFY/GETMAINDEPARTMENTATBLE",
                    data: JSON.stringify({ selectboxdept: selectboxdept, deptnameid: deptnameid, optSetOrders: optSetOrders }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {

                        $('#TestOrdertb tbody').empty();
                        var rows;

                        $.each(data, function (i, item) {
                            i = i + 1;
                            rows += "<tr class=maindpttb>"
                                 + "<td id=rowid>" + i + "</td>"
                                 + "<td style=display:none>" + item.TstMst_Key + "</td>"
                           + "<td data-toggle='tooltip'title='" + item.TstMst_name + "'>" + item.TstMst_name + "</td>"
                            + "<td >" + item.TstMst_Rate + "</td>"
                             + "<td contenteditable='true'>" + item.TstMst_OrderBy + "</td>"
                             + "</tr>";
                        });

                        $("#TestOrdertb").append(rows);


                    }
                })


                $(".searchclose").trigger('click');
            }


        }
        if ($("#optSetOrder").prop('checked') == false) {
            $("#optTestName").prop('checked',true);
        }
    })

    $('#optTestName').change(function () {
        if ($("#optTestName").prop('checked') == true) {
            $("#optSetOrder").prop('checked', false);
            var deptname = $("#txtdepartment").val();
            var deptnameid = $("#txtdepartmentid").val();
            if (deptname != "") {
                if ($("#optSetOrder").prop('checked') == true) {
                    var optSetOrders = 1;
                }
                if ($("#optTestName").prop('checked') == true) {
                    var optTestName = 1;
                }
                var selectboxdept = $('#selectTestOption').find('option:selected').text();



                $.ajax({
                    type: "POST",
                    url: "/LISFY/GETMAINDEPARTMENTATBLE",
                    data: JSON.stringify({ selectboxdept: selectboxdept, deptnameid: deptnameid, optSetOrders: optSetOrders }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {

                        $('#TestOrdertb tbody').empty();
                        var rows;

                        $.each(data, function (i, item) {
                            i = i + 1;
                            rows += "<tr class=maindpttb>"
                                 + "<td id=rowid>" + i + "</td>"
                                 + "<td style=display:none>" + item.TstMst_Key + "</td>"
                           + "<td data-toggle='tooltip'title='" + item.TstMst_name + "'>" + item.TstMst_name + "</td>"
                            + "<td >" + item.TstMst_Rate + "</td>"
                             + "<td contenteditable='true'>" + item.TstMst_OrderBy + "</td>"
                             + "</tr>";
                        });

                        $("#TestOrdertb").append(rows);


                    }
                })


                $(".searchclose").trigger('click');
            }


        }
        if ($("#optTestName").prop('checked') == false) {
            $("#optSetOrder").prop('checked', true);
        }
    })


    $(document).on('click', '#btndepartment', function () {
        event.preventDefault();
        //$('#SplActbtn').prop('disabled',true);
        $.trim($("#txt").val(""));
        $('#lookuptb tbody').empty();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETTESTORDERDEPARTMENT',
            data: {},
            dataType: 'json',
            success: function (data) {
                //$('#SplActbtn').prop('disabled',false);
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=settestorder>"

                    + "<td style=width:400px;text-align:left>" + item.Mstr_Desc + "</td>"
                    + "<td style=display:none>" + item.Mstr_Key + "</td>"

                    + "</tr>";
                });

                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");
                $("#header3").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();
                $('#featuredSelectField option[value="1"]').text('Department');
                $('#featuredSelectField option[value="2"]').text('Key');
                $('#featuredSelectField option[value="3"]').hide();
                $("#lookupLabel").html("Department");
                $("#header").html("Department");
                $("#header2").hide();
                $("#searchlookup").css("left", "8%");
                $("#header").css("width", "400");

                $("#featuredSelectField option[value=1]").attr('selected', 'selected');

                $("#lookuptb").append(rows);


            },
            error: function (emp) {
                alert('error');
            }

        })

    })





    $('body').on('click', '.settestorder', function (evt) {
        event.preventDefault();

        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })

    $('body').on('dblclick', '.settestorder', function (evt) {
        event.preventDefault();

        var deptname = $(this).find("td:eq(0)").text();
        var deptnameid = $(this).find("td:eq(1)").text();
        $("#txtdepartment").val(deptname);
        $("#txtdepartmentid").val(deptnameid);

        if ($("#optSetOrder").prop('checked') == true) {
            var optSetOrders = 1;
        }
        if($("#optTestName").prop('checked') == true){
            var optTestName=1;
        }
        var selectboxdept =  $('#selectTestOption').find('option:selected').text();

        var deptname= $("#txtdepartment").val();
        var deptnameid=$("#txtdepartmentid").val();

        $.ajax({
            type: "POST",
            url: "/LISFY/GETMAINDEPARTMENTATBLE",
            data: JSON.stringify({ selectboxdept: selectboxdept, deptnameid: deptnameid, optSetOrders: optSetOrders}),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                $('#TestOrdertb tbody').empty();
                var rows;

                $.each(data, function (i, item) {
                    i = i + 1;
                    rows += "<tr class=maindpttb>"
                         + "<td id=rowid>" + i + "</td>"
                         + "<td style=display:none>" + item.TstMst_Key + "</td>"
                   + "<td data-toggle='tooltip'title='" + item.TstMst_name + "'>" + item.TstMst_name + "</td>"
                    + "<td >" + item.TstMst_Rate + "</td>"
                     + "<td contenteditable='true'>" + item.TstMst_OrderBy + "</td>"
                     + "</tr>";
                });

                $("#TestOrdertb").append(rows);


            }
        })

        $(".searchledgerclose").trigger('click');
    })


    $('#selectTestOption').change(function (event) {
        event.preventDefault();
        var selectedValue = $(this).find('option:selected').text();
        var deptid = $("#txtdepartmentid").val();
        if(deptid==0){
            return false;
        }
        $.ajax({
            type: "POST",
            url: "/LISFY/FILLSELECTTESTOPTION",
            data: JSON.stringify({ selectedValue: selectedValue, deptid: deptid}),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {

                $('#TestOrdertb tbody').empty();
                var rows;

                $.each(data, function (i, item) {
                    i = i + 1;
                    rows += "<tr class=maindpttb>"
                         + "<td>" + i + "</td>"
                         + "<td style=display:none>" + item.TstMst_Key + "</td>"
                   + "<td data-toggle='tooltip'title='" + item.TstMst_name + "'>" + item.TstMst_name + "</td>"
                    + "<td >" + item.TstMst_Rate + "</td>"
                     + "<td contenteditable='true'>" + item.TstMst_OrderBy + "</td>"
                     + "</tr>";
                });

                $("#TestOrdertb").append(rows);


            }
        })

        $(".searchclose").trigger('click');
    })



    //****************SAVE-SET-ORDER-TEST************************************
    $(document).on('click', '#TestOrderSave', function () {
        event.preventDefault();
        var dptarray = new Array();
        var txtdepartment = $("#txtdepartment").val();
        if (txtdepartment == "") {
            alert("Enter a Valid Department");
            $("#txtdepartment").focus();
            return false;
        }

        $("#TestOrdertb tbody tr").each(function () {
            var dept = {};
            var row = $(this);
            dept.TstMst_Key = row.find("td").eq(1).html();
            dept.TstMst_OrderBy = row.find("td").eq(4).html();
            dptarray.push(dept);
        })
        if (confirm("Do you Want to save")) {
            $('#TestOrderSave').prop('disabled', true);
            $.ajax({
                type: "POST",
                url: "/LISFY/SAVESETORDERTEST",
                data: JSON.stringify({ dptarray: dptarray }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    alert("Saved");
                    $('#TestOrderSave').prop('disabled', false);
                    $("#TestOrdertb tbody").empty();
                    $('#optSetOrder').prop("checked", true);
                    $('#optTestName').prop("checked", false);
                    $("#txtdepartment").val("");
                    $("#txtdepartmentid").val("");
                    $('#selectTestOption').prop('selected', false).find('option:first').prop('selected', true);



                }
            })
        }
        else {
            return false;
        }
    })
    //*****************END-SAVE-TEST-ORDER-TEST*****************************



    $(document).on('click', '#TestOrderNew', function () {
        event.preventDefault();
        $('#optSetOrder').prop("checked", true);
        $('#optTestName').prop("checked", false);
        $('#selectTestOption').prop('selected', false).find('option:first').prop('selected', true);

        $("#TestOrdertb tbody").empty();
        $("#txtdepartment").val("");
        $("#txtdepartmentid").val("");


    })

    $(document).on('click', '#TestOrderExit', function () {
        event.preventDefault();
        $('#optSetOrder').prop("checked", true);
        $('#optTestName').prop("checked", false);
        $('#selectTestOption').prop('selected', false).find('option:first').prop('selected', true);
        $("#TestOrdertb tbody").empty();
        $("#txtdepartment").val("");
        $("#txtdepartmentid").val("");

        $("#settestclose").click();
    })

    $(document).on('click', '#settestclose', function () {
        event.preventDefault();
        $('#optSetOrder').prop("checked", true);
        $('#optTestName').prop("checked", false);

        $('#selectTestOption').prop('selected', false).find('option:first').prop('selected', true);
        $("#TestOrdertb tbody").empty();
        $("#txtdepartment").val("");
        $("#txtdepartmentid").val("");


    })
    $(document).on('click ', '#srchtestname', function () {
        event.preventDefault();
        $('#txt').val("");
        $('#lookuptb tbody').empty();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETTESTNAME',
            data: {},
            dataType: 'json',
            success: function (data) {
                //$('#SplActbtn').prop('disabled',false);
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=rotstname>"
                    + "<td style=display:none>" + item.TstMst_Key + "</td>"
                     + "<td style=width:400px;text-align:left>" + item.TstMst_name + "</td>"
                    + "</tr>";
                });

                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");
                $("#header").css("width", "400");
                $('#featuredSelectField option[value="1"]').text('TestName');
                $('#featuredSelectField option[value="2"]').hide();
                $('#featuredSelectField option[value="3"]').hide();


                $("#lookupLabel").html("Test");
                $("#header3").hide();
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $("#header").text('TestName');
                $("#lookuptb").append(rows);


            },
            error: function (emp) {
                alert('error');
            }

        })

    })



    $('body').on('click', '.rotstname', function (event) {
        //event.preventDefault();

        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');

    })
    $('#table-scroll2').on('keydown', function (e) {
        if (event.keyCode == 120) {
            $("#srchtestname").click();
        }
    })

    $('body').on('dblclick', '.rotstname', function (evt) {
        event.preventDefault();
        var testname = $(this).find("td:eq(1)").text();
        tableContainer = $('#table-scroll2');
        $("#TestOrdertb tbody tr").each(function () {
            if (testname == $(this).find("td:eq(2)").text()) {
                $("#TestOrdertb tr").removeClass('highlight_file');
                $(this).addClass('highlight_file');
                var w = $("#table-scroll2");
                var row = $(this).find("td:eq(0)");
                if (row.length) {
                    w.scrollTop(row.offset().top - (w.height() / 2));
                }

            }
        })

        $(".searchledgerclose").trigger('click');
    })


    $("#txtdepartment").keyup(function (event) {
        if (event.keyCode == 120) {
            $("#btndepartment").click();

        }
    })

    $('body').on('click', '.maindpttb', function (event) {
        //event.preventDefault();

        $("#TestOrdertb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');

    })

    //$('#TestOrdertb').on('focusout input', 'td[contenteditable]', function () {

    //    this.value =this.value.replace(/[^0-9\.]/g, '');
    //})
    //$("maindpttb").keyup(function () {
    //    this.value = this.value.replace(/[^0-9\.]/g, '');
    //});
    //$('.maindpttb').keypress(function(e) {
    //    var verified = (e.which == 8 || e.which == undefined || e.which == 0) ? null : String.fromCharCode(e.which).match(/[^0-9]/);
    //    if (verified) {e.preventDefault();}
    //});

    //$(document).on('click ', '#Usrpriload', function () {
    //    $("#PriUsrName").focus();
    //})

    $(document).ready(function () {
        $("#PriUsrName").focus();
        $("#RdopriNone").prop("checked", true);
    })
    $("#RdopriNone").change(function () {
        if ($("#RdopriNone").prop("checked") == true) {
            $("#RdopriAdmin").prop('checked', false);
            $("#RdopriSpr").prop('checked', false);
            $("#RdopriStaff").prop('checked', false);
        }
    })
    $("#RdopriAdmin").change(function () {
        if ($("#RdopriAdmin").prop("checked") == true) {
            $("#RdopriNone").prop('checked', false);
            $("#RdopriSpr").prop('checked', false);
            $("#RdopriStaff").prop('checked', false);
            $("#RdopriAdmin").prop('checked', true);
        }
    })
    $("#RdopriSpr").change(function () {
        if ($("#RdopriSpr").prop("checked") == true) {
            $("#RdopriNone").prop('checked', false);
            $("#RdopriSpr").prop('checked', true);
            $("#RdopriStaff").prop('checked', false);
            $("#RdopriAdmin").prop('checked', false);

        }
    })
    $("#RdopriStaff").change(function () {
        if ($("#RdopriStaff").prop("checked") == true) {
            $("#RdopriNone").prop('checked', false);
            $("#RdopriSpr").prop('checked', false);
            $("#RdopriStaff").prop('checked', true);
            $("#RdopriAdmin").prop('checked', false);
        }
    })



    $(document).on('click ', '#btnusrname', function () {

                $("#UsrpriReset").click();


    })

    $("#PriUsrName").keyup(function (e) {
        if (e.keyCode == 13) {
            $("#btnusrname").click();
        }
    });

    $(document).on('click ', '#UsrpriReset', function () {
        var usrname = $("#PriUsrName").val();
        $('#userListtb tbody').empty();
        $("#spinner-div1").show();
        $.ajax({
            type: "POST",
            url: "/LISFY/CHECKPRIUSERNAME",
            data: JSON.stringify({ usrname: usrname }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Result === "Invalid Username") {
                    alert("Invalid Username");
                    $('#spinner-div1').hide();

                    $("#PriUsrName").focus();
                    return false;

                }

                    $.each(data, function (i, item) {
                        $("#PriUsrNameid").val(item.txtUserNameid);
                        if (item.UserGrp == "Administrator") {
                            $("#RdopriAdmin").prop('checked', true);
                            $("#RdopriStaff").prop('checked', false);
                            $("#RdopriSpr").prop('checked', false);
                            $("#RdopriNone").prop('checked', false);
                        }
                        if (item.UserGrp == "Staff") {
                            $("#RdopriAdmin").prop('checked', false);
                            $("#RdopriStaff").prop('checked',true);
                            $("#RdopriSpr").prop('checked', false);
                            $("#RdopriNone").prop('checked', false);

                        }
                        if (item.UserGrp == "Supervisor") {
                            $("#RdopriAdmin").prop('checked', false);
                            $("#RdopriStaff").prop('checked', false);
                            $("#RdopriSpr").prop('checked', true);
                            $("#RdopriNone").prop('checked', false);

                        }

                    })
                    var usrname = $("#PriUsrName").val();
                    var userid = $("#PriUsrNameid").val();
                    $.ajax({
                        type: "POST",
                        url: "/LISFY/FILLUSERSETTING",
                        data: JSON.stringify({ usrname: usrname, userid: userid }),
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (data) {
                            var rows;
                            $('#userListtb tbody').empty();
                            $.each(data, function (i, item) {
                                if (item.chkselect == true) {
                                    i = i + 1;
                                    rows += "<tr class=usertb>"
                                         + "<td style=display:none>" + i + "</td>"
                                   + "<td  style=border:none;>" + item.Usr_MainMenu + "</td>"
                                    + "<td  style=border:none>" + item.Usr_SubMenu + "</td>"
                                     + "<td style=display:none>" + item.pinkcolor + "</td>"
                                     + "<td style=display:none>" + item.Usr_MenuName + "</td>"
                                     + "<td style=display:none>" + item.Usr_MainMenu1 + "</td>"
                                    + "<td style=border:none >" + '<input type=checkbox  checked> ' + "</td>"
                                     + "</tr>";
                                }
                                if (item.chkselect == false) {
                                    i = i + 1;
                                    rows += "<tr class=usertb>"
                                         + "<td style=display:none>" + i + "</td>"
                                   + "<td  style=border:none>" + item.Usr_MainMenu + "</td>"
                                    + "<td  style=border:none>" + item.Usr_SubMenu + "</td>"
                                    + "<td style=display:none>" + item.pinkcolor + "</td>"
                                     + "<td style=display:none>" + item.Usr_MenuName + "</td>"
                                     + "<td style=display:none>" + item.Usr_MainMenu1 + "</td>"
                                      + "<td style=border:none>" + '<input type=checkbox > ' + "</td>"
                                     + "</tr>";
                                }


                            });

                            $("#userListtb").append(rows);

                            $("#userListtb tbody tr").each(function () {
                                if ($(this).find("td:eq(2)").text() == '') {
                                    $(this).css("background-color", "#A7C7E7");

                                }
                                if ($(this).find("td:eq(3)").text() == '1') {
                                    $(this).find("td:eq(2)").css("background-color", "#FFC0CB");
                                    $(this).find("td:eq(5)").css("background-color", "#FFC0CB");
                                }
                            })


                        },
                        complete: function () {
                            $('#spinner-div1').hide();
                        }


                    })
                }
            })
    })


    $('body').on('click', '.usertb', function (evt) {

        $("#userListtb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })





//***********************SAVE-USER-PRIVILLEGE********************************
    $(document).on('click ', '#UsrpriSave', function () {
        event.preventDefault();
        var userid = $("#PriUsrNameid").val();
        var usrpriarray = new Array();
        $("#userListtb tbody tr").each(function () {
            var pi = {};
            var row = $(this);
            if (row.find("td:eq(6) input[type='checkbox']").is(':checked')) {
                var Select = true;
            }
            else {
                var Select= false;
            }

            pi.chkselect = Select;
            var MainMenu = row.find("td").eq(1).html();
            if (MainMenu == "") {
                pi.Usr_MainMenu=" "
            }
            else {
                pi.Usr_MainMenu = MainMenu;
            }


            var MenuName = row.find("td").eq(4).html();
            if (MenuName=="") {
            pi.Usr_MenuName=" "
            }
            else {
                pi.Usr_MenuName = MenuName;
            }
            submen = row.find("td").eq(2).html();
          if (submen =="") {
              pi.Usr_SubMenu =" ";
          }
          else {
              pi.Usr_SubMenu = submen;
          }
            usrpriarray.push(pi);
        })
        if (confirm("Do you Want to Save")) {

            $.ajax({
                type: "POST",
                url: "/LISFY/SAVEUSERPRIVILEGE",
                data: JSON.stringify({ usrpriarray: usrpriarray, userid: userid }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    alert("Saved");
                    $('#userListtb tbody').empty();
                    $('#PriUsrName').val("");
                    $('#PriUsrNameid').val("");

                    $("#PriUsrName").focus();
                    $("#RdopriNone").prop("checked", true);
                    $("#RdopriAdmin").prop("checked", false);
                    $("#RdopriSpr").prop("checked", false);
                    $("#RdopriStaff").prop("checked", false);

                }
            })
        }
        else{
            return false;
        }
    })
//****************END-SAVE-USER-PRIVILLAGE************************************





    $(document).on('click ', '#UsrpriNew', function () {
        event.preventDefault();

        $('#userListtb tbody').empty();
        $('#PriUsrName').val("");
        $('#PriUsrNameid').val("");

        $("#PriUsrName").focus();
        $("#RdopriNone").prop("checked", true);
        $("#RdopriAdmin").prop("checked", false);
        $("#RdopriSpr").prop("checked", false);
        $("#RdopriStaff").prop("checked", false);

    })

    $(document).on('click ', '#previlageclose', function () {
        event.preventDefault();
        $('#UsrpriNew').click();
    })
    $(document).on('click ', '#UsrpriExit', function () {
        event.preventDefault();
        $('#previlageclose').click();
    })
    $('#userListtb').on('change', 'input[type="checkbox"]', function () {

        var row1 = (this).closest('tr');
        if ($(this).is(':checked')) {
            $(this).attr("checked", true);
            if ($(row1).find("td:eq(5)").text() == 'Front Office') {
                $("#userListtb input[type=checkbox]").each(function () {
                    var row = (this).closest('tr');
                    if ($(row).find("td:eq(1)").text() == 'Front Office') {
                        $(this).attr("checked", true);
                    }


                })

            }
            if ($(row1).find("td:eq(5)").text() == 'Sample Flow') {
                $("#userListtb input[type=checkbox]").each(function () {
                    var row = (this).closest('tr');
                    if ($(row).find("td:eq(1)").text() == 'Sample Flow') {
                        $(this).attr("checked", true);
                    }


                })

            }
            if ($(row1).find("td:eq(5)").text() == 'Reports') {
                $("#userListtb input[type=checkbox]").each(function () {
                    var row = (this).closest('tr');
                    if ($(row).find("td:eq(1)").text() == 'Reports') {
                        $(this).attr("checked", true);
                    }


                })

            }
            if ($(row1).find("td:eq(5)").text() == 'Technical') {
                $("#userListtb input[type=checkbox]").each(function () {
                    var row = (this).closest('tr');
                    if ($(row).find("td:eq(1)").text() == 'Technical') {
                        $(this).attr("checked", true);
                    }


                })

            }
            if ($(row1).find("td:eq(5)").text() == 'Accounts') {
                $("#userListtb input[type=checkbox]").each(function () {
                    var row = (this).closest('tr');
                    if ($(row).find("td:eq(1)").text() == 'Accounts') {
                        $(this).attr("checked", true);
                    }


                })

            }
            if ($(row1).find("td:eq(5)").text() == 'Master Settings') {
                $("#userListtb input[type=checkbox]").each(function () {
                    var row = (this).closest('tr');
                    if ($(row).find("td:eq(1)").text() == 'Master Settings') {
                        $(this).attr("checked", true);
                    }


                })

            }
            if ($(row1).find("td:eq(5)").text() == 'Administrator') {
                $("#userListtb input[type=checkbox]").each(function () {
                    var row = (this).closest('tr');
                    if ($(row).find("td:eq(1)").text() == 'Administrator') {
                        $(this).attr("checked", true);
                    }


                })

            }



        }
        //if ($(this).is(':checked') == false) {

        //    $(this).attr("checked", false);
        //    $("#userListtb input[type=checkbox]").each(function () {
        //        var ro = $(this).closest('tr');
        //        var row = (this).closest('tr');
        //        if ($(ro).find("td:eq(1)").text() == 'Front Office' && $(ro).find("td:eq(6) input[type='checkbox']").is(':checked') == true) {
        //            //$(ro).find("td:eq(6)").attr("checked", true);
        //            //retu
        //            //if ($(ro).find("td:eq(1)").text() == 'Front Office') {
        //                $(this).attr("checked", true);
        //            //}

        //        }

        //        //return false;
        //    })



        //if ($(row1).find("td:eq(5)").text() == 'Front Office') {
        //    $("#userListtb input[type=checkbox]").each(function () {
        //        var row = (this).closest('tr');
        //        if ($(row).find("td:eq(1)").text() == 'Front Office') {
        //            $(this).attr("checked", false);
        //        }


        //    })

        //}
        //}

        if ($(row1).find("td:eq(1)").text() == 'Front Office' ) {
            $("#userListtb tbody tr").each(function () {


                if ($(this).find("td:eq(1)").text() == 'Front Office' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == false) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Front Office') {
                            $(this).removeAttr("checked");
                        }

                    })
                }
                if ($(this).find("td:eq(1)").text() == 'Front Office' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == true) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Front Office') {
                            $(this).attr("checked", true);
                        }

                    })

                }
            })
        }
        if ($(row1).find("td:eq(1)").text() == 'Sample Flow') {
            $("#userListtb tbody tr").each(function () {
                if ($(this).find("td:eq(1)").text() == 'Sample Flow' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == false) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Sample Flow') {
                            $(this).removeAttr("checked");
                        }

                    })
                }
                if ($(this).find("td:eq(1)").text() == 'Sample Flow' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == true) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Sample Flow') {
                            $(this).attr("checked", true);
                        }

                    })


                }
            })
        }
        if ($(row1).find("td:eq(1)").text() == 'Technical') {
            $("#userListtb tbody tr").each(function () {
                if ($(this).find("td:eq(1)").text() == 'Technical' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == false) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Technical') {

                            $(this).removeAttr("checked");
                        }

                    })
                }
                if ($(this).find("td:eq(1)").text() == 'Technical' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == true) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Technical') {

                            $(this).attr("checked", true);
                        }

                    })

                }
            })
        }
        if ($(row1).find("td:eq(1)").text() == 'Accounts') {
            $("#userListtb tbody tr").each(function () {
                if ($(this).find("td:eq(1)").text() == 'Accounts' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == false) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Accounts') {

                            $(this).removeAttr("checked");
                        }

                    })
                }
                if ($(this).find("td:eq(1)").text() == 'Accounts' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == true) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Accounts') {

                            $(this).attr("checked", true);
                        }

                    })

                }
            })
        }
        if ($(row1).find("td:eq(1)").text() == 'Master Settings') {
            $("#userListtb tbody tr").each(function () {


                if ($(this).find("td:eq(1)").text() == 'Master Settings' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == false) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Master Settings') {

                            $(this).removeAttr("checked");
                        }

                    })
                }
                if ($(this).find("td:eq(1)").text() == 'Master Settings' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == true) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Master Settings') {

                            $(this).attr("checked", true);
                        }

                    })

                }
            })
        }



        if ($(row1).find("td:eq(1)").text() == 'Reports') {
            $("#userListtb tbody tr").each(function () {
                if ($(this).find("td:eq(1)").text() == 'Reports' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == false) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Reports') {

                            $(this).removeAttr("checked");
                        }

                    })
                }
                if ($(this).find("td:eq(1)").text() == 'Reports' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == true) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Reports') {

                            $(this).attr("checked", true);
                        }

                    })

                }
            })
        }
        if ($(row1).find("td:eq(1)").text() == 'Administrator') {
            $("#userListtb tbody tr").each(function () {
                if ($(this).find("td:eq(1)").text() == 'Administrator' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == false) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Administrator') {

                            $(this).removeAttr("checked");
                        }

                    })
                }
                if ($(this).find("td:eq(1)").text() == 'Administrator' && $(this).find("td:eq(6) input[type='checkbox']").is(':checked') == true) {
                    $("#userListtb input[type=checkbox]").each(function () {
                        var row = (this).closest('tr');
                        if ($(row).find("td:eq(5)").text() == 'Administrator') {

                            $(this).attr("checked", true);
                        }

                    })

                }
            })
        }
    })





    $(document).on('click', '#UsrpriPrint', function () {
        var userid = $("#PriUsrNameid").val();
        var usrname = $("#PriUsrName").val();
        if (confirm("Do you Want to print")) {
            $.ajax({
                type: 'POST',
                url: '/LISFY/USERPRIVILEGEPRINT',
                data: { userid: userid, usrname: usrname },
                dataType: 'json',
                success: function (data) {
                    if (data.Result === "No Data Found") {
                        alert("No Data Found");
                        return false;
                    }
                    if (data.Result === "OK") {
                        window.open("/LISFY/GetPDFusrPrivilege", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=200,width=950,height=700");

                    }
                }
            })
        }
        else {
            return false;
        }
    })
    $("#RdopriAdmin").change(function () {
        $("#userListtb input[type=checkbox]").each(function () {
            $(this).attr("checked", true);
        })

    })
    $("#RdopriNone").change(function () {
        $("#userListtb input[type=checkbox]").each(function () {
            $(this).removeAttr("checked");
        })

    })
    $("#RdopriSpr").change(function () {
        $("#userListtb input[type=checkbox]").each(function () {
            var row = $(this).closest('tr');
            if ($(row).find("td:eq(5)").text() == 'Front Office') {
                $(this).attr("checked", true);
                if ($(row).find("td:eq(2)").text() == 'Cancel Invoice') {
                    $(this).removeAttr("checked");
                }
            }
                if ($(row).find("td:eq(5)").text() == 'Sample Flow') {
                    $(this).attr("checked", true);
                }
                if ($(row).find("td:eq(5)").text() == 'Technical') {
                    if ($(row).find("td:eq(2)").text() == 'Second Authorization Queue') {
                        $(this).removeAttr("checked");
                    }
                }
                if ($(row).find("td:eq(5)").text() == 'Accounts' && $(row).find("td:eq(5)").text() == 'Master Settings' && $(row).find("td:eq(5)").text() == 'Reports') {
                    $(this).attr("checked", true);
                }
                if ($(row).find("td:eq(5)").text() == 'Administrator') {
                    $(this).removeAttr("checked");
                }

        })

    })

    $("#RdopriStaff").change(function () {
        $("#userListtb input[type=checkbox]").each(function () {
            var row = $(this).closest('tr');
            if ($(row).find("td:eq(5)").text() == 'Front Office') {
                $(this).attr("checked", true);
                if ($(row).find("td:eq(2)").text() == 'Cancel Invoice') {
                    $(this).removeAttr("checked");
                }
            }
            if ($(row).find("td:eq(5)").text() == 'Sample Flow') {
                $(this).attr("checked", true);
            }
            if ($(row).find("td:eq(5)").text() == 'Technical') {
                $(this).attr("checked", true);
            }
            if ($(row).find("td:eq(5)").text() == 'Accounts') {
                $(this).removeAttr("checked");
            }
            if ($(row).find("td:eq(5)").text() == 'Master Settings') {
                $(this).removeAttr("checked");
            }
            if ($(row).find("td:eq(5)").text() == 'Reports') {
                $(this).removeAttr("checked");
                if ($(row).find("td:eq(2)").text() == '          Referal Lab Management') {
                    $(this).attr("checked", true);
                }

            }
            if ($(row).find("td:eq(5)").text() == 'Administrator') {
                $(this).removeAttr("checked");
            }



        })
    })


    $(document).ready(function () {

        $("#ChqisueNew").click();
        $('#ChqissuecurDate').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $('#ChqissueDate').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
    })


    $(document).on('click', '#btnChqisuParty', function () {
        event.preventDefault();
        $('#lookuptb tbody').empty();
        $('#txt').val("");
        $('#spinner-div').show();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETCASHRECACCOUNTNAME',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=Chqparty>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                    + "</tr>";
                });

                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");

                $('#featuredSelectField option[value="1"]').text('AccountName');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header").css("width", "400");
                $("#lookupLabel").html("Party,Select");
                $("#header3").hide();
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $("#header").html("Account");
                $("#lookuptb").append(rows);


            },
            complete: function () {
                $('#spinner-div').hide();
            },

            error: function (emp) {
                alert('error');
            }

        })

    })


    $(document).on('click', '#btnChqisueBank', function () {
        event.preventDefault();
        $('#lookuptb tbody').empty();
        $('#txt').val("");
        $('#spinner-div').show();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETBANKACCOUNT',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=Chqisuebank>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                    + "</tr>";
                });

                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");

                $('#featuredSelectField option[value="1"]').text('AccountName');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header").css("width", "400");
                $("#lookupLabel").html("Bank,Select");
                $("#header3").hide();
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $("#header").html("Account");
                $("#lookuptb").append(rows);


            },
            complete: function () {
                $('#spinner-div').hide();
            },

            error: function (emp) {
                alert('error');
            }

        })

    })
    $('body').on('click', '.Chqparty', function (evt) {

        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $('body').on('dblclick', '.Chqparty', function (evt) {
        event.preventDefault();
        var chqpartyName = $(this).find("td:eq(0)").text();
        var chqpartyid = $(this).find("td:eq(1)").text();
        $("#ChqisuParty").val(chqpartyName);
        $("#ChqisuPartyid").val(chqpartyid);
        $(".searchledgerclose").click();

    })
    $('body').on('click', '.Chqisuebank', function (evt) {

        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })

    $('body').on('dblclick', '.Chqisuebank', function (evt) {
        event.preventDefault();
        var chqbankName = $(this).find("td:eq(0)").text();
        var chqBankid = $(this).find("td:eq(1)").text();
        $("#ChqisueBank").val(chqbankName);
        $("#ChqisueBankid").val(chqBankid);
        $(".searchledgerclose").click();

    })

    $(document).on('click', '#ChqisueNew', function () {
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETTRANSNOCHQISSUE',
            data: {},
            dataType: 'json',
            success: function (data) {
                $.each(data, function (i, item) {
                    $("#ChqisuTransNo").val(item.ChqTranNo);
                    $("#ChqisuTransNoid").val(item.ChqTranNoid);

                })
                $("#ChqisuParty").val("");
                $("#ChqisuPartyid").val("");
                $("#ChqisueBank").val("");
                $("#ChqisueBankid").val("");
                $("#ChqisueAmt").val("");

                $("#ChqisueNo").val("");
                $("#ChqisuNarr").val("");
                $("#ChqUsrinfo").val("");
                $("#ChkPass").prop('checked', false);
                $("#ChqissuecurDate").val("@ViewBag.cashcurdate");
                $("#ChqissueDate").val("@ViewBag.cashcurdate");


            }
        })
    })

    $(document).on('click', '#btnChqisueNo', function () {
        var ChqTransNo = $('#ChqisuTransNo').val();
        $.ajax({
            type: "POST",
            url: "/LISFY/DISPLAYCHEQUEISSUE",
            data: JSON.stringify({ ChqTransNo: ChqTransNo }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Result === "No Data Found") {
                    alert("No Data Found");
                   $("#ChqisueNew").click();
                    return false;
                }
                $.each(data, function (i, item) {

                    $("#ChqTranNoid").val(item.ChqTranNoid);
                    $("#ChqisuParty").val(item.ChqisuParty);
                    $("#ChqisuPartyid").val(item.ChqisuPartyid);
                    $("#ChqisueBank").val(item.ChqisueBank);
                    $("#ChqisueBankid").val(item.ChqisueBankid);
                    $("#ChqisueAmt").val(item.ChqisueAmt);
                    $("#ChqisuNarr").val(item.ChqisuNarr);
                    $("#ChqUsrinfo").val(item.ChqUsrinfo);
                    $("#ChqisueNo").val(item.ChqisueNo);

                    const d = new Date(item.ChqissuecurDate);
                    const formattedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();
                    $('#ChqissuecurDate').val(formattedDate);
                    const d1=new Date(item.ChqissueDate);
                    const formattedDate1 = ("0" + d1.getDate()).slice(-2) + '/' + ("0" + (d1.getMonth() + 1)).slice(-2) + '/' + d1.getFullYear();
                    $('#ChqissueDate').val(formattedDate);
                    if(item._IsCheqPass==1){
                        $("#ChkPass").prop('checked',true);
                    }
                    else{
                        $("#ChkPass").prop('checked',false);
                    }

                })
            }
        })

    })


    $('#ChqisuTransNo').keyup(function (e) {
        if (e.keyCode == 13) {
            $("#btnChqisueNo").click();
        }
    });
    $('#ChqisuParty').keyup(function (e) {
        if (e.keyCode == 120) {
            $("#btnChqisuParty").click();
        }
    })
    $('#ChqisueBank').keyup(function (e) {
        if (e.keyCode == 120) {
            $("#btnChqisueBank").click();
        }
    })

    
    

    $(document).on('click', '#ChqisueSave', function () {

        var partyName = $("#ChqisuParty").val();
        var partyNameid = $("#ChqisuPartyid").val();
        var ChqisuTransNo = $("#ChqisuTransNo").val();
        var ChqissuecurDate = $("#ChqissuecurDate").val();
        var ChqisueBank = $("#ChqisueBank").val();
        var ChqisueBankid = $("#ChqisueBankid").val();
        var ChqisueAmt1 = $("#ChqisueAmt").val();
        var ChqisueAmt = parseFloat(ChqisueAmt1).toFixed(2);
        if (isNaN(ChqisueAmt)) {
            ChqisueAmt = "";
        }
        var ChqisueNo = $("#ChqisueNo").val();
        var ChqissueDate = $("#ChqissueDate").val();
        var ChqisuNarr = $("#ChqisuNarr").val();
        var ChqUsrinfo = $("#ChqUsrinfo").val();
        var Trano = $("#ChqisuTransNo").val();
        var ChkPass;
        if ($('#ChkPass').is(':checked')) {
            ChkPass = 1;
        }
        else {
            ChkPass = 0;
        }
        if (partyNameid == "") {
            alert("Invalid PartyName");
            $("#ChqisuParty").focus();
            return false;

        }

        if (ChqisueBankid == "") {
            alert("Invalid Bank");
            $("#ChqisueBank").focus();
            return false;

        }
        if (ChqisueAmt == "") {
            alert("Invalid Amount");
            $("#ChqisueAmt").focus();
            return false;
        }
        if (ChqisueNo == "") {
            alert("Invalid Cheque No");
            $("#ChqisueNo").focus();
            return false;
        }

        if (ChqisuTransNo == "") {
            alert("Empty Trans No.. ");
            $("#ChqisuTransNo").focus();
            return false;
        }



        $.ajax({
            type: "POST",
            url: "/LISFY/SAVECHEQUEISSUE",
            data: JSON.stringify({
                partyName: partyName,
                partyNameid: partyNameid,
                ChqisuTransNo: ChqisuTransNo,
                ChqissuecurDate: ChqissuecurDate,
                ChqisueBank: ChqisueBank,
                ChqisueBankid: ChqisueBankid,
                ChqisueAmt: ChqisueAmt,
                ChqisueNo: ChqisueNo,
                ChqissueDate: ChqissueDate,
                ChqisuNarr: ChqisuNarr,
                ChkPass: ChkPass,
                ChqUsrinfo: ChqUsrinfo,
                Trano: Trano
            }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Result === "Check The Data Entered Correctly") {
                    alert("Check The Data Entered Correctly");
                    return false;
                }
                alert("Saved");
                $("#ChqisueNew").click();

            }
        })


    })


    $(document).on('click', '#ChqisueDet', function () {

        var partyName = $("#ChqisuParty").val();
        var partyNameid = $("#ChqisuPartyid").val();
        var Trano = $("#ChqisuTransNo").val();
        var ChqisueAmt = $("#ChqisueAmt").val();
        if (Trano == "") {
            alert("Empty Trans No.. ");
            $("#ChqisuTransNo").focus();
            return false;
        }
        if (confirm("Are you sure to delete this entry..?")) {

            $.ajax({
                type: "POST",
                url: "/LISFY/DELETECHEQUEISSUE",
                data: JSON.stringify({
                    partyName: partyName,
                    partyNameid: partyNameid,
                    ChqisueAmt: ChqisueAmt,
                    Trano: Trano
                }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.Result === "No Data Found") {
                        alert("No Data Found");
                        return false;
                    }
                    alert("Deleted Sucessfully...........");
                    $("#ChqisueNew").click();


                }
            })
        }
        else {
            return false;
        }


    })

    $(document).on('click', '#ChqisueExt', function () {

        $("#Chqissueclose").click();
    })
    $(document).on('click', '#Chqissueclose', function () {
        $("#ChqisueNew").click();
    })

    $("#ChqisuTransNo").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });


    $("#ChqisueAmt").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });


    $(document).ready(function () {

        $("#ChqRecNew").click();
        $('#ChqRecDate').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $('#ChqReccurDate').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
    })


    $(document).on('click', '#btnChqRecParty', function () {
        event.preventDefault();
        $('#lookuptb tbody').empty();
        $('#txt').val("");
        $('#spinner-div').show();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETCASHRECACCOUNTNAME',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=ChqReparty>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                    + "</tr>";
                });

                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");

                $('#featuredSelectField option[value="1"]').text('AccountName');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header").css("width", "400");
                $("#lookupLabel").html("Party,Select");
                $("#header3").hide();
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $("#header").html("Account");
                $("#lookuptb").append(rows);


            },
            complete: function () {
                $('#spinner-div').hide();
            },

            error: function (emp) {
                alert('error');
            }

        })

    })


    $(document).on('click', '#btnChqRecBank', function () {
        event.preventDefault();
        $('#lookuptb tbody').empty();
        $('#txt').val("");
        $('#spinner-div').show();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETBANKACCOUNT',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=ChqRecbank>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                    + "</tr>";
                });

                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");

                $('#featuredSelectField option[value="1"]').text('AccountName');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header").css("width", "400");
                $("#lookupLabel").html("Bank,Select");
                $("#header3").hide();
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $("#header").html("Account");
                $("#lookuptb").append(rows);


            },
            complete: function () {
                $('#spinner-div').hide();
            },

            error: function (emp) {
                alert('error');
            }

        })

    })

    $('body').on('click', '.ChqReparty', function (evt) {

        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })
    $('body').on('dblclick', '.ChqReparty', function (evt) {
        event.preventDefault();
        var chqpartyName = $(this).find("td:eq(0)").text();
        var chqpartyid = $(this).find("td:eq(1)").text();
        $("#ChqRecParty").val(chqpartyName);
        $("#ChqRecPartyid").val(chqpartyid);
        $(".searchledgerclose").click();

    })
    $('body').on('click', '.ChqRecbank', function (evt) {

        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })

    $('body').on('dblclick', '.ChqRecbank', function (evt) {
        event.preventDefault();
        var chqbankName = $(this).find("td:eq(0)").text();
        var chqBankid = $(this).find("td:eq(1)").text();
        $("#ChqRecBank").val(chqbankName);
        $("#ChqRecBankid").val(chqBankid);
        $(".searchledgerclose").click();

    })

    $(document).on('click', '#ChqRecNew', function () {
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETTRANSNOCHQREC',
            data: {},
            dataType: 'json',
            success: function (data) {
                $.each(data, function (i, item) {
                    $("#ChqRecTransNo").val(item.ChqRecTransNo);
                    $("#ChqRecTransNoid").val(item.ChqRecTransNoid);

                })
                $("#ChqRecParty").val("");
                $("#ChqRecPartyid").val("");
                $("#ChqRecBank").val("");
                $("#ChqRecBankid").val("");
                $("#ChqRecAmt").val("");

                $("#ChqRecNo").val("");
                $("#ChqRecNarr").val("");
                $("#ChqRecUsrinfo").val("");
                $("#ChqRecPass").prop('checked', false);
                $("#ChqReccurDate").val("@ViewBag.cashcurdate");
                $("#ChqRecDate").val("@ViewBag.cashcurdate");


            }
        })
    })

    $(document).on('click', '#btnChqRecNo', function () {
        var ChqTransNo = $('#ChqRecTransNo').val();
        $.ajax({
            type: "POST",
            url: "/LISFY/DISPLAYCHEQUEREC",
            data: JSON.stringify({ ChqTransNo: ChqTransNo }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Result === "No Data Found") {
                    alert("No Data Found");
                     $("#ChqRecNew").click();
                    return false;
                }
                $.each(data, function (i, item) {

                    $("#ChqRecTransNoid").val(item.ChqRecTransNoid);
                    $("#ChqRecParty").val(item.ChqRecParty);
                    $("#ChqRecPartyid").val(item.ChqRecPartyid);
                    $("#ChqRecBank").val(item.ChqRecBank);
                    $("#ChqRecBankid").val(item.ChqRecBankid);

                    $("#ChqRecAmt").val(item.ChqRecAmt);
                    $("#ChqRecNarr").val(item.ChqRecNarr);
                    $("#ChqRecUsrinfo").val(item.ChqRecUsrinfo);

                    $("#ChqRecNo").val(item.ChqRecNo);
                    const d = new Date(item.ChqReccurDate);
                    const formattedDate = ("0" + d.getDate()).slice(-2) + '/' + ("0" + (d.getMonth() + 1)).slice(-2) + '/' + d.getFullYear();
                    $('#ChqReccurDate').val(formattedDate);
                    const d1 = new Date(item.ChqRecDate);
                    const formattedDate1 = ("0" + d1.getDate()).slice(-2) + '/' + ("0" + (d1.getMonth() + 1)).slice(-2) + '/' + d1.getFullYear();
                    $('#ChqRecDate').val(formattedDate);
                    if (item._IsCheqPass == 1) {
                        $("#ChqRecPass").prop('checked', true);
                    }
                    else {
                        $("#ChqRecPass").prop('checked', false);
                    }

                })
            }
        })

    })


    $('#ChqRecTransNo').keyup(function (e) {
        if (e.keyCode == 13) {
            $("#btnChqRecNo").click();
        }
    });


    $(document).on('click', '#ChqRecSave', function () {

        var partyName = $("#ChqRecParty").val();
        var partyNameid = $("#ChqRecPartyid").val();
        var ChqRecTransNo = $("#ChqRecTransNo").val();
        var ChqReccurDate = $("#ChqReccurDate").val();
        var ChqRecBank = $("#ChqRecBank").val();
        var ChqRecBankid = $("#ChqRecBankid").val();
        var ChqRecAmt1 = $("#ChqRecAmt").val();
        var ChqRecAmt = parseFloat(ChqRecAmt1).toFixed(2);
        if (isNaN(ChqRecAmt)) {
            ChqRecAmt = "";
        }
        var ChqRecNo = $("#ChqRecNo").val();
        var ChqRecDate = $("#ChqRecDate").val();
        var ChqRecNarr = $("#ChqRecNarr").val();
        var ChqRecUsrinfo = $("#ChqRecUsrinfo").val();

        var ChqRecPass;
        if (ChqRecTransNo == "") {
            alert("Empty Trans No.. ");
            $("#ChqRecTransNo").focus();
            return false;
        }
        if ($('#ChqRecPass').is(':checked')) {
            ChqRecPass = 1;
        }
        else {
            ChqRecPass = 0;
        }
        if (partyNameid == "") {
            alert("Invalid PartyName");
            $("#ChqRecParty").focus();
            return false;

        }

        if (ChqRecBankid == "") {
            alert("Invalid Bank");
            $("#ChqRecBank").focus();
            return false;

        }
        if (ChqRecAmt1 == "") {
            alert("Invalid Amount");
            $("#ChqRecAmt").focus();
            return false;
        }
        if (ChqRecNo == "") {
            alert("Invalid Cheque No");
            $("#ChqRecNo").focus();
            return false;
        }





        $.ajax({
            type: "POST",
            url: "/LISFY/SAVECHEQUERECEIVAL",
            data: JSON.stringify({
                partyName: partyName,
                partyNameid: partyNameid,
                ChqRecTransNo: ChqRecTransNo,
                ChqReccurDate: ChqReccurDate,
                ChqRecBank: ChqRecBank,
                ChqRecBankid: ChqRecBankid,
                ChqRecAmt: ChqRecAmt,
                ChqRecNo: ChqRecNo,
                ChqRecDate: ChqRecDate,
                ChqRecNarr: ChqRecNarr,
                ChqRecPass: ChqRecPass,
                ChqRecUsrinfo: ChqRecUsrinfo,

            }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                if (data.Result === "Check The Data Entered Correctly") {
                    alert("Check The Data Entered Correctly");
                    return false;
                }
                alert("Saved");
                $("#ChqRecNew").click();

            }
        })

    })

    $(document).on('click', '#ChqRecDet', function () {

        var partyName = $("#ChqRecParty").val();
        var partyNameid = $("#ChqRecPartyid").val();
        var Trano = $("#ChqRecTransNo").val();
        var ChqRecAmt = $("#ChqRecAmt").val();
        if (Trano == "") {
            alert("Empty Trans No.. ");
            $("#ChqRecTransNo").focus();
            return false;
        }
        if (confirm("Are you sure to delete this entry..?")) {

            $.ajax({
                type: "POST",
                url: "/LISFY/DELETECHEQUEREC",
                data: JSON.stringify({
                    partyName: partyName,
                    partyNameid: partyNameid,
                    ChqRecAmt: ChqRecAmt,
                    Trano: Trano
                }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.Result === "No Data Found") {
                        alert("No Data Found");
                        return false;
                    }
                    alert("Deleted Sucessfully...........");
                    $("#ChqRecNew").click();


                }
            })
        }
        else {
            return false;
        }
    })

    $(document).on('click', '#ChqRecExt', function () {

        $("#ChqRecclose").click();
    })
    $(document).on('click', '#ChqRecclose', function () {
        $("#ChqRecNew").click();
    })

    $("#ChqRecTransNo").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });


    $("#ChqRecAmt").keyup(function () {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });

    $('#ChqRecParty').keyup(function (e) {
        if (e.keyCode == 120) {
            $("#btnChqRecParty").click();
        }
    })
    $('#ChqRecBank').keyup(function (e) {
        if (e.keyCode == 120) {
            $("#btnChqRecBank").click();
        }
    })

    $(document).ready(function () {
        $("#optChqTrParty").prop('checked', true);
        $(document).on('click', '#btnparty', function () {
            event.preventDefault();
            $('#lookuptb tbody').empty();
            $('#txt').val("");
            $('#spinner-div').show();
            $.ajax({
                type: 'GET',
                url: '/LISFY/GETCASHRECACCOUNTNAME',
                data: {},
                dataType: 'json',
                success: function (data) {
                    $('#lookuptb tbody').empty();
                    var rows;
                    $.each(data, function (i, item) {
                        rows += "<tr class=ChqTrparty>"

                        + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                        + "<td style=display:none>" + item.AhMst_Key + "</td>"
                        + "</tr>";
                    });

                    $("#modelsize").css("width", "400");

                    $("#txt").css("width", "200");

                    $('#featuredSelectField option[value="1"]').text('AccountName');
                    $('#featuredSelectField option[value="2"]').text('Id');
                    $('#featuredSelectField option[value="3"]').hide();
                    $("#searchlookup").css("left", "8%");
                    $("#header").css("width", "400");
                    $("#lookupLabel").html("Party,Select");
                    $("#header3").hide();
                    $("#header2").hide();
                    $("#header4").hide();
                    $("#header5").hide();
                    $("#header6").hide();
                    $("#header7").hide();
                    $("#header8").hide();
                    $("#header9").hide();

                    $("#header").html("Account");
                    $("#lookuptb").append(rows);


                },
                complete: function () {
                    $('#spinner-div').hide();
                },

                error: function (emp) {
                    alert('error');
                }

            })

        })


    })
    
  
    $("#optChqTrParty").change(function () {
        if ($("#optChqTrParty").prop('checked') == true) {
            $('#ChqTrTb tbody').empty();
            $("#txtbankparty").val("");
            $("#txtbankpartyid").val("");
            $("#optChqTrBank").prop('checked', false);
            $("#optChqTrParty").prop('checked', true);
            $(document).on('click', '#btnparty', function () {
                event.preventDefault();
                $('#lookuptb tbody').empty();
                $('#txt').val("");
                $('#spinner-div').show();
                $.ajax({
                    type: 'GET',
                    url: '/LISFY/GETCASHRECACCOUNTNAME',
                    data: {},
                    dataType: 'json',
                    success: function (data) {
                        $('#lookuptb tbody').empty();
                        var rows;
                        $.each(data, function (i, item) {
                            rows += "<tr class=ChqTrparty>"

                            + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                            + "<td style=display:none>" + item.AhMst_Key + "</td>"
                            + "</tr>";
                        });

                        $("#modelsize").css("width", "400");

                        $("#txt").css("width", "200");

                        $('#featuredSelectField option[value="1"]').text('AccountName');
                        $('#featuredSelectField option[value="2"]').text('Id');
                        $('#featuredSelectField option[value="3"]').hide();
                        $("#searchlookup").css("left", "8%");
                        $("#header").css("width", "400");
                        $("#lookupLabel").html("Party,Select");
                        $("#header3").hide();
                        $("#header2").hide();
                        $("#header4").hide();
                        $("#header5").hide();
                        $("#header6").hide();
                        $("#header7").hide();
                        $("#header8").hide();
                        $("#header9").hide();

                        $("#header").html("Account");
                        $("#lookuptb").append(rows);


                    },
                    complete: function () {
                        $('#spinner-div').hide();
                    },

                    error: function (emp) {
                        alert('error');
                    }

                })

            })

            
        }
        if ($("#optChqTrParty").prop('checked') ==false) {
            $("#optChqTrBank").prop('checked',true);
            $("#optChqTrParty").prop('checked', false);

        }
    })
            
    $("#optChqTrBank").change(function () {

        if ($("#optChqTrBank").prop('checked') == true) {
            $('#ChqTrTb tbody').empty();
            $("#txtbankparty").val("");
            $("#txtbankpartyid").val("");
            $("#optChqTrBank").prop('checked',true);
            $("#optChqTrParty").prop('checked', false);
            $(document).on('click', '#btnbank', function () {
        event.preventDefault();
        $('#lookuptb tbody').empty();
        $('#txt').val("");
        $('#spinner-div').show();
        $.ajax({
            type: 'GET',
            url: '/LISFY/GETBANKACCOUNT',
            data: {},
            dataType: 'json',
            success: function (data) {
                $('#lookuptb tbody').empty();
                var rows;
                $.each(data, function (i, item) {
                    rows += "<tr class=ChqTrbank>"

                    + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                    + "<td style=display:none>" + item.AhMst_Key + "</td>"
                    + "</tr>";
                });

                $("#modelsize").css("width", "400");

                $("#txt").css("width", "200");

                $('#featuredSelectField option[value="1"]').text('AccountName');
                $('#featuredSelectField option[value="2"]').text('Id');
                $('#featuredSelectField option[value="3"]').hide();
                $("#searchlookup").css("left", "8%");
                $("#header").css("width", "400");
                $("#lookupLabel").html("Bank,Select");
                $("#header3").hide();
                $("#header2").hide();
                $("#header4").hide();
                $("#header5").hide();
                $("#header6").hide();
                $("#header7").hide();
                $("#header8").hide();
                $("#header9").hide();

                $("#header").html("Account");
                $("#lookuptb").append(rows);


            },
            complete: function () {
                $('#spinner-div').hide();
            },

            error: function (emp) {
                alert('error');
            }

        })

    })


        }
        if ($("#optChqTrBank").prop('checked') == false) {
            $("#optChqTrBank").prop('checked', false);
            $("#optChqTrParty").prop('checked', true);
            $(document).on('click', '#btnparty', function () {
                event.preventDefault();
                $('#lookuptb tbody').empty();
                $('#txt').val("");
                $('#spinner-divchq').show();
                $.ajax({
                    type: 'GET',
                    url: '/LISFY/GETCASHRECACCOUNTNAME',
                    data: {},
                    dataType: 'json',
                    success: function (data) {
                        $('#lookuptb tbody').empty();
                        var rows;
                        $.each(data, function (i, item) {
                            rows += "<tr class=ChqTrparty>"

                            + "<td style=width:400px;text-align:left>" + item.AhMst_pName + "</td>"
                            + "<td style=display:none>" + item.AhMst_Key + "</td>"
                            + "</tr>";
                        });

                        $("#modelsize").css("width", "400");

                        $("#txt").css("width", "200");

                        $('#featuredSelectField option[value="1"]').text('AccountName');
                        $('#featuredSelectField option[value="2"]').text('Id');
                        $('#featuredSelectField option[value="3"]').hide();
                        $("#searchlookup").css("left", "8%");
                        $("#header").css("width", "400");
                        $("#lookupLabel").html("Party,Select");
                        $("#header3").hide();
                        $("#header2").hide();
                        $("#header4").hide();
                        $("#header5").hide();
                        $("#header6").hide();
                        $("#header7").hide();
                        $("#header8").hide();
                        $("#header9").hide();

                        $("#header").html("Account");
                        $("#lookuptb").append(rows);


                    },
                    complete: function () {
                        $('#spinner-div').hide();
                    },

                    error: function (emp) {
                        alert('error');
                    }

                })

            })

           
        }
    })

    $('#txtbankparty').keyup(function (e) {
        if (e.keyCode == 120) {
            if ($("#optChqTrBank").prop('checked') == true) {
                $("#btnbank").click();
            }
            if ($("#optChqTrParty").prop('checked') == true) {
                $("#btnparty").click();
            }
           
        }
    })

    $('body').on('click', '.ChqTrparty', function (evt) {

        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })

    $('body').on('dblclick', '.ChqTrparty', function (evt) {
        event.preventDefault();
        var partyname = $(this).find("td:eq(0)").text();
        var partynameid = $(this).find("td:eq(1)").text();
        $("#txtbankparty").val(partyname);
        $("#txtbankpartyid").val(partynameid);
        $(".searchledgerclose").click();

        $.ajax({
            type: "POST",
            url: "/LISFY/FILLCHEQUETRANSACTIONPARTY",
            data: JSON.stringify({partyname:partyname,partynameid:partynameid}),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                var rows;
                $('#ChqTrTb tbody').empty();
                $.each(data, function (i, item) {
                    if (item.ChqTrPass == true) {
                        i = i + 1;
                        rows += "<tr class=RoChqTrtb>"
                             + "<td>" + i + "</td>"
                       + "<td data-toggle='tooltip'title='" + item.ChqTrName + "'>" + item.ChqTrName + "</td>"
                        + "<td data-toggle='tooltip'title='" + item.ChqTrBank + "'>" + item.ChqTrBank + "</td>"
                         + "<td  data-toggle='tooltip'title='" + item.datts + "'>" + item.datts + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.ChqTrNarr + "'>" + item.ChqTrNarr + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.ChqTrChqNo + "'>" + item.ChqTrChqNo + "</td>"
                          + "<td data-toggle='tooltip'title='" + item.datts1 + "'>" + item.datts1 + "</td>"
                           + "<td data-toggle='tooltip'title='" + item.ChqTrPayment + "'>" + item.ChqTrPayment + "</td>"
                            + "<td data-toggle='tooltip'title='" + item.ChqTrRec + "'>" + item.ChqTrRec + "</td>"
                              + "<td data-toggle='tooltip'title='" + item.ChqTrTransType + "'>" + item.ChqTrTransType + "</td>"
                               + "<td style=display:none>" + item.ChqTrTransNo + "</td>"
                        + "<td>" + '<input type=checkbox  checked readonly> ' + "</td>"
                         + "</tr>";
                    }
                    if (item.ChqTrPass ==false) {
                        i = i + 1;
                        rows += "<tr class=RoChqTrtb>"
                             + "<td>" + i + "</td>"
                       + "<td data-toggle='tooltip'title='" + item.ChqTrName + "' >" + item.ChqTrName + "</td>"
                        + "<td data-toggle='tooltip'title='" + item.ChqTrBank + "'>" + item.ChqTrBank + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.datts + "'>" + item.datts + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.ChqTrNarr + "'>" + item.ChqTrNarr + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.ChqTrChqNo + "'>" + item.ChqTrChqNo + "</td>"
                          + "<td data-toggle='tooltip'title='" + item.datts1 + "'>" + item.datts1 + "</td>"
                           + "<td data-toggle='tooltip'title='" + item.ChqTrPayment + "'>" + item.ChqTrPayment + "</td>"
                            + "<td data-toggle='tooltip'title='" + item.ChqTrRec + "'>" + item.ChqTrRec + "</td>"
                              + "<td data-toggle='tooltip'title='" + item.ChqTrTransType + "'>" + item.ChqTrTransType + "</td>"
                               + "<td style=display:none>" + item.ChqTrTransNo + "</td>"
                        + "<td>" + '<input type=checkbox readonly> ' + "</td>"
                         + "</tr>";
                    }


                })
                $('#ChqTrTb').append(rows);
            }
        })
    })
    $('body').on('click', '.ChqTrbank', function (evt) {

        $("#lookuptb tr").removeClass('highlight_file');
        $(this).addClass('highlight_file');
    })

    $('body').on('dblclick', '.ChqTrbank', function (evt) {
        event.preventDefault();
        var bankname = $(this).find("td:eq(0)").text();
        var banknameid = $(this).find("td:eq(1)").text();
        $("#txtbankparty").val(bankname);
        $("#txtbankpartyid").val(banknameid);
        $(".searchledgerclose").click();

        $.ajax({
            type: "POST",
            url: "/LISFY/FILLCHEQUETRANSACTIONBANK",
            data: JSON.stringify({ bankname: bankname, banknameid: banknameid }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                var rows;
                $('#ChqTrTb tbody').empty();
                $.each(data, function (i, item) {
                    if (item.ChqTrPass == true) {
                        i = i + 1;
                        rows += "<tr class=RoChqTrtb>"
                             + "<td>" + i + "</td>"
                       + "<td data-toggle='tooltip'title='" + item.ChqTrName + "'>" + item.ChqTrName + "</td>"
                        + "<td data-toggle='tooltip'title='" + item.ChqTrBank + "'>" + item.ChqTrBank + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.datts + "'>" + item.datts + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.ChqTrNarr + "'>" + item.ChqTrNarr + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.ChqTrChqNo + "'>" + item.ChqTrChqNo + "</td>"
                          + "<td data-toggle='tooltip'title='" + item.datts1 + "'>" + item.datts1 + "</td>"
                           + "<td data-toggle='tooltip'title='" + item.ChqTrPayment + "'>" + item.ChqTrPayment + "</td>"
                            + "<td data-toggle='tooltip'title='" + item.ChqTrRec + "'>" + item.ChqTrRec + "</td>"
                              + "<td data-toggle='tooltip'title='" + item.ChqTrTransType + "'>" + item.ChqTrTransType + "</td>"
                               + "<td style=display:none>" + item.ChqTrTransNo + "</td>"
                        + "<td>" + '<input type=checkbox  checked readonly> ' + "</td>"
                         + "</tr>";
                    }
                    if (item.ChqTrPass == false) {
                        i = i + 1;
                        rows += "<tr class=RoChqTrtb>"
                             + "<td>" + i + "</td>"
                       + "<td data-toggle='tooltip'title='" + item.ChqTrName + "'>" + item.ChqTrName + "</td>"
                        + "<td data-toggle='tooltip'title='" + item.ChqTrBank + "'>" + item.ChqTrBank + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.datts + "'>" + item.datts + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.ChqTrNarr + "'>" + item.ChqTrNarr + "</td>"
                         + "<td data-toggle='tooltip'title='" + item.ChqTrChqNo + "'>" + item.ChqTrChqNo + "</td>"
                          + "<td data-toggle='tooltip'title='" + item.datts1 + "'>" + item.datts1 + "</td>"
                           + "<td data-toggle='tooltip'title='" + item.ChqTrPayment + "'>" + item.ChqTrPayment + "</td>"
                            + "<td data-toggle='tooltip'title='" + item.ChqTrRec + "'>" + item.ChqTrRec + "</td>"
                              + "<td data-toggle='tooltip'title='" + item.ChqTrTransType + "'>" + item.ChqTrTransType + "</td>"
                               + "<td style=display:none>" + item.ChqTrTransNo + "</td>"
                        + "<td>" + '<input type=checkbox readonly> ' + "</td>"
                         + "</tr>";
                    }


                })
                $('#ChqTrTb').append(rows);
            }
        })


    })
    $("#ChqTrTb").on("click", "td", function () {
        event.preventDefault();
        $("#ChqTrTb tr td").removeClass('blue_highlight');
        $(this).addClass('blue_highlight');
    })

    $('body').on('dblclick', '.RoChqTrtb', function (evt) {
        event.preventDefault();
        var TransNO = $(this).find("td:eq(10)").text();
        $("#ChqRecTransNo").val(TransNO);
        $("#btnChqRecNo").click();
        $("#dsplyChqRec").click();
       


    })
    $(document).on('click', '#chqtransclose', function () {
        $('#ChqTrTb tbody').empty();
        $("#txtbankparty").val("");
        $("#txtbankpartyid").val("");
        $("#optChqTrParty").prop('checked', true);
    })
    $(document).on('click', '#ChqTrExt', function () {
        $("#chqtransclose").click();
    })
    
    $(document).on('click', '#ChqTrPrint', function () {
   
        if ($("#optChqTrBank").prop('checked') == true) {
            var optChqbank = 1;
            var optChqbankname = $("#txtbankparty").val();
        }

        if ($("#optChqTrParty").prop('checked') == true) {
            var optChqparty = 1;
            var optChqpartyname = $("#txtbankparty").val();
        }
        if (confirm("Do you Want to print")) {
            $.ajax({
                type: 'POST',
                url: '/LISFY/CHEQUETRANSACTIONPRINT',
                data: { optChqbank: optChqbank, optChqparty: optChqparty, optChqbankname: optChqbankname, optChqpartyname: optChqpartyname },
                dataType: 'json',
                success: function (data) {
                    if (data.Result === "No Data Found") {
                        alert("No Data Found");
                        return false;
                    }
                    if (data.Result === "OK") {
                        window.open("/LISFY/GetPDFChqTr", "_blank", "toolbar=yes,scrollbars=yes,resizable=yes,top=500,left=200,width=950,height=700");

                    }
                }
            })
        }
        else {
            return false;
        }
    })
    $(document).ready(function () {
        $('#Dbdate').datepicker({
            dateFormat: 'dd/mm/yy',

            changeMonth: true,
            changeYear: true,
            yearRange: '-90:+80',
            onSelect: function () {
                dateFormat: 'dd/mm/yy'
            }
        });
        $("#Dbnew").click();
        $("#Dbooktb tfoot tr").hide();
    })
     
    $('#DbTrasno').keyup(function (e) {
        if (e.keyCode == 120) {
            $("#Dbnew").click();
        }
    })
    $(document).on('click', "#Dbnew" ,function(){
        $.ajax({
            type: "POST",
            url: "/LISFY/GETDAYBOOKTRANSNO",
            data: JSON.stringify({}),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $.each(data, function (i, item) {
                    $("#DbTrasno").val(item.DbTrasno);
                    $("#DbTrasnoid").val(item.DbTrasnoid);


                })
                $("#Dbusrinfo").val("");
                $("#Dbooktb tbody").empty();
                $("#Dbooktb tfoot tr").hide();

            }
            })
    })
    $("#DbacHead").autocomplete({
        source: function (request, response) {
            var regex = new RegExp(request.term, 'i');
            $.ajax({
                        
                url: '/REGISTRAION/DAYBOOKAUTOCOMPLETE',
                data:"{ 'prefix': '" + request.term + "'}",
                dataType:"json",
                type:"POST",
                contentType: "application/json; charset=utf-8",
                success:function (data) {
                    $("#AccountHeadlist").empty();
                    response($.map(data.Records, function (Record) {
                        return{
                            label: Record.AccountHeads,
                            val: Record.AccountHeads,

                        }

                    }))
                       

                
                },
            
                error:function (response) {
                    alert(response.responseText);
                },
                failure: function (response) {
                    alert(response.responseText);
                }
            });

        },
        select: function (event, ui) {
            $("#DbacHead").val(ui.item.label);
            $("#DbacHead").text(ui.item.val);
            minLength: 1
        }
        //minLength: 1

    
    });

        
            
                 

    


</script>
